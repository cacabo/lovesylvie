if (self.CavalryLogger) { CavalryLogger.start_js(["VhG7c"]); }

__d("MercurySyncDataFetcher",["Promise","LogHistory","MessagingConfig","MercurySyncDataFetcherImpl","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";var h=c("LogHistory").getInstance("mercury_sync_data_fetcher");function i(){var l=0;for(var m=0;m<c("MessagingConfig").syncFetchRetries;m++){var n=m===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,m);l+=n+c("MessagingConfig").syncFetchRequestTimeoutMs}return l}var j=i();function k(l){return new(c("Promise"))(function(m,n){var o=function o(q){h.error("fetch_timeout",JSON.stringify({timeout:j,uri:l.toString()}));n(q)},p=c("setTimeoutAcrossTransitions")(o,j);c("MercurySyncDataFetcherImpl").fetch(l).done(function(){clearTimeout(p);m.apply(undefined,arguments)},o)})}f.exports={fetch:k,getMaxTimeoutMs:i}}),null);