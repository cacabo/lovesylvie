if (self.CavalryLogger) { CavalryLogger.start_js(["4U3ng"]); }

__d("MercurySyncDFFDataFetcher",["Promise","ActorURI","AsyncRequest","MercuryConfig","MercuryMessages","MercuryThreads","MercuryThreadIDMap","MercurySingletonProvider","MercurySyncDataFetcher","XMercuryFetchMessageController","XMercuryInvalidateGlobalStateController","XMercuryInvalidateThreadStateController"],(function a(b,c,d,e,f,g){"use strict";function h(j){this.$MercurySyncDFFDataFetcher1=j;this.__messages=c("MercuryMessages").getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threads=c("MercuryThreads").getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threadIDMap=c("MercuryThreadIDMap").getForFBID(this.$MercurySyncDFFDataFetcher1)}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.fetchInvalidateGlobalState=function(j){var k=c("XMercuryInvalidateGlobalStateController").getURIBuilder();if(c("MercuryConfig").MessengerCachiusUseClientSeqIDWWW)k.setInt("cachius_min_seq_id",j);var l=k.getURI(),m=c("ActorURI").create(l,this.$MercurySyncDFFDataFetcher1);return c("MercurySyncDataFetcher").fetch(m)};h.prototype.fetchInvalidateThreadState=function(j,k){var l=11,m=3,n=j||k,o=this.__threadIDMap.getClientIDFromServerIDNow(n);if(!o)return c("Promise").resolve({getPayload:function s(){return{}}});var p=m+this.__messages.getCurrentlyLoadedMessages(o).length,q=c("XMercuryInvalidateThreadStateController").getURIBuilder().setInt("other_user_or_thread_fbid",n).setInt("num_messages",Math.max(p,l)).getURI(),r=c("ActorURI").create(q,this.$MercurySyncDFFDataFetcher1);return c("MercurySyncDataFetcher").fetch(r)};h.prototype.fetchInvalidateMessage=function(j,k,l){var m=c("XMercuryFetchMessageController").getURIBuilder().setInt("other_user_or_thread_fbid",j||k).setString("mid",l).getURI(),n=c("ActorURI").create(m,this.$MercurySyncDFFDataFetcher1);return c("MercurySyncDataFetcher").fetch(n)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);