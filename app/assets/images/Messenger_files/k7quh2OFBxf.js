if (self.CavalryLogger) { CavalryLogger.start_js(["U8Vg\/"]); }

__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;j.parseFiles=function(l){"use strict";var m={};c("forEachObject")(l,function(n,o){if(Array.isArray(n))m[o]=n;else{m[o]=[];if(n instanceof window.FileList)for(var p=0;p<n.length;p++)m[o].push(n.item(p));else if(n instanceof window.File||n instanceof window.Blob)m[o].push(n)}});return m};function j(l){"use strict";i.constructor.call(this);this._customHeader={};this.setURI(l);this.setNetworkErrorRetryLimit(0)}j.prototype.setAllowCrossOrigin=function(l){"use strict";this._allowCrossOrigin=!!l;return this};j.prototype.setAllowCrossPageTransition=function(l){"use strict";this._allowCrossPageTransition=!!l;return this};j.prototype.setCustomHttpHeader=function(l,m){"use strict";this._customHeader[l]=m;return this};j.prototype.setData=function(l){"use strict";this._data=l;return this};j.prototype.setLimit=function(l){"use strict";this._limit=l;return this};j.prototype.setNetworkErrorRetryLimit=function(l){"use strict";this._retryLimit=l;return this};j.prototype.setPreprocessHandler=function(l){"use strict";this._preprocessHandler=l;return this};j.prototype.setRelativeTo=function(l){"use strict";this._relativeTo=l;return this};j.prototype.setStatusElement=function(l){"use strict";this._statusElement=l;return this};j.prototype.setURI=function(l){"use strict";this._uri=l;return this};j.prototype.suspend=function(){"use strict";this._suspended=true;return this};j.prototype.resume=function(){"use strict";this._suspended=false;this._processQueue();return this};j.prototype.isUploading=function(){"use strict";return this._inFlight};j.prototype._createFileUpload=function(l,m,n){"use strict";return new k(l,m,n)};j.prototype._processQueue=function(){"use strict";if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var l=this._waiting.shift();if(this._preprocessHandler)this._preprocessHandler(l,this._processUpload.bind(this));else this._processUpload(l);this._pending.push(l)}};j.prototype._processUpload=function(l){"use strict";var m=c("Form").createFormData(l.getData()||this._data);if(l.getFile()){m.append(l.getName(),l.getFile());var n=l.getFile().uploadID;if(n)m.append("upload_id",n)}var o=new(c("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(m).setStatusElement(this._statusElement).setHandler(this._success.bind(this,l)).setErrorHandler(this._failure.bind(this,l)).setUploadProgressHandler(this._progress.bind(this,l)).setInitialHandler(this._initial.bind(this,l));for(var p in this._customHeader)o.setRequestHeader(p,this._customHeader[p]);if(this._relativeTo)o.setRelativeTo(this._relativeTo);o.send();l.setAsyncRequest(o);this._inFlight=true;if(!l.getRetryCount())this.inform("start",l)};j.prototype._abort=function(l){"use strict";if(this._pending.indexOf(l)!==-1){c("removeFromArray")(this._pending,l);this._processQueue()}c("removeFromArray")(this._waiting,l);l.abort()};j.prototype._initial=function(l){"use strict";if(l.isAborted())return;this.inform("initial",l)};j.prototype._success=function(l,m){"use strict";if(l.isAborted()){this.inform("success_after_abort",m);return}this._complete(l);this.inform("success",l.handleSuccess(m));this._processQueue()};j.prototype._retryUpload=function(l){"use strict";l.increaseRetryCount();this._processUpload(l)};j.prototype._failure=function(l,m){"use strict";if(l.isAborted())return;if(m.error===1004&&l.getRetryCount()<this._retryLimit)return this._retryUpload(l);this._complete(l);if(this.inform("failure",l.handleFailure(m))!==false)c("AsyncResponse").defaultErrorHandler(m);this._processQueue()};j.prototype._progress=function(l,event){"use strict";if(l.isAborted())return;this.inform("progress",l.handleProgress(event))};j.prototype._complete=function(l){"use strict";c("removeFromArray")(this._pending,l);if(!this._pending.length)this._inFlight=false};j.isSupported=function(){"use strict";return c("BrowserSupport").hasFileAPI()};Object.assign(j.prototype,{_limit:10});function k(l,m,n){"use strict";this._name=l;this._file=m;this._data=n;this._success=null;this._response=null;this._progressEvent=null;this._request=null;this._numRetries=0;this._aborted=false}k.prototype.getName=function(){"use strict";return this._name};k.prototype.getFile=function(){"use strict";return this._file};k.prototype.setFile=function(l){"use strict";this._file=l};k.prototype.getData=function(){"use strict";return this._data};k.prototype.isComplete=function(){"use strict";return this._success!==null};k.prototype.isSuccess=function(){"use strict";return this._success===true};k.prototype.getResponse=function(){"use strict";return this._response};k.prototype.getProgressEvent=function(){"use strict";return this._progressEvent};k.prototype.setAsyncRequest=function(l){"use strict";this._request=l;return this};k.prototype.increaseRetryCount=function(){"use strict";this._numRetries++;return this};k.prototype.getRetryCount=function(){"use strict";return this._numRetries};k.prototype.isWaiting=function(){"use strict";return!this._request};k.prototype.isAborted=function(){"use strict";return this._aborted};k.prototype.abort=function(){"use strict";this._request=null;this._aborted=true};k.prototype.handleSuccess=function(l){"use strict";this._success=true;this._response=l;this._progressEvent=null;return this};k.prototype.handleFailure=function(l){"use strict";this._success=false;this._response=l;this._progressEvent=null;return this};k.prototype.handleProgress=function(event){"use strict";this._progressEvent=event;return this};f.exports=j}),null);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("AsyncUploadBase"));i=h&&h.prototype;j.prototype.setFiles=function(k){"use strict";this._files=c("AsyncUploadBase").parseFiles(k);return this};j.prototype.abort=function(){"use strict";this._uploads.forEach(function(k){return this._abort(k)}.bind(this),this)};j.prototype.send=function(){"use strict";if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var k in this._files)this._files[k].forEach(function(l){this._uploads.push(this._createFileUpload(k,l))}.bind(this));this._waiting=this._uploads.slice(0);this._pending=[];if(this._uploads.length)this._processQueue();else this._processUpload(this._createFileUpload(null,null))};j.prototype._processQueue=function(){"use strict";i._processQueue.call(this);if(!this._pending.length&&!this._waiting.length)this.inform("complete",this._uploads)};j.isSupported=function(){"use strict";return c("AsyncUploadBase").isSupported()};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("AudioMimeTypes",[],(function a(b,c,d,e,f,g){var h={_extToMimeType:{aac:"audio/aac",mp1:"audio/mpeg",mp2:"audio/mpeg",mp3:"audio/mpeg",mpeg:"audio/mpeg",mpg:"audio/mpeg",ogg:"audio/mp4",mp4:"audio/mp4",m4a:"audio/mp4",wav:"audio/wav"},getMimeFromExt:function j(k){return this._extToMimeType[k]},isAudio:function j(k){return i(k)[0]==="audio"}};function i(j){return j.split("/")}f.exports=h}),null);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","CurrentUser","DataStore","DOMQuery","Event","Form","JSONPTransport","Parent","URI","isElementNode","mixin","shield"],(function a(b,c,d,e,f,g){var h,i;function j(m){var n={},o=c("DOMQuery").scry(m,'input[type="file"]');o.forEach(function(p){n[p.name]=p.files});return n}function k(m){var n=c("DOMQuery").scry(m,'input[type="file"]');n.forEach(function(o){o.files=null})}h=babelHelpers.inherits(l,c("mixin")(c("ArbiterMixin"),c("BehaviorsMixin")));i=h&&h.prototype;function l(m,n,o){"use strict";i.constructor.call(this);this._handleSubmit=function(event){if(event.isDefaultPrevented()||event.getTarget()!==this._form)return;if(this.inform("submit")===false){event.prevent();return}this.submit(event)}.bind(this);if(m.getAttribute("rel")==="async")throw new Error("FileForm cannot be used with Primer forms.");if(m.getAttribute("method").toUpperCase()!=="POST")throw new Error("FileForm must be used with POST forms.");this._form=m;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding="multipart/form-data";this._files=null;this._customHeader={};n&&this.enableBehaviors(n);this._options=o||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setAllowCrossPageTransition(this._options.allowCrossPageTransition);this.setUploadInParallel(this._options.uploadInParallel);this.setConcurrentLimit(this._options.concurrentLimit);this.setPreprocessHandler(this._options.preprocessHandler);this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);this._listeners=[c("Event").listen(document.documentElement,"submit",this._handleSubmit),c("Event").listen(this._form,"click",this._click.bind(this))];c("DataStore").set(this._form,"FileForm",this)}l.prototype.getRoot=function(){"use strict";return this._form};l.prototype.setAllowCrossOrigin=function(m){"use strict";this._allowCrossOrigin=!!m;return this};l.prototype.setAllowCrossPageTransition=function(m){"use strict";this._allowCrossPageTransition=!!m;return this};l.prototype.setUploadInParallel=function(m){"use strict";this._uploadInParallel=!!m;return this};l.prototype.setConcurrentLimit=function(m){"use strict";this._concurrentLimit=m;return this};l.prototype.setCustomHttpHeader=function(m,n){"use strict";this._customHeader[m]=n;return this};l.prototype.setPreprocessHandler=function(m){"use strict";this._preprocessHandler=m;return this};l.prototype.setNetworkErrorRetryLimit=function(m){"use strict";this._retryLimit=m;return this};l.prototype.setFiles=function(m){"use strict";this._files=m;return this};l.prototype.canUseXHR=function(){"use strict";var m="FormData"in window;if(m)if(!new(c("URI"))(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)m=false;return m};l.prototype._click=function(event){"use strict";var m=event.getTarget();while(c("isElementNode")(m)){if(m.type==="submit"){this._clickTarget=m;setTimeout(this._unclick.bind(this),0);break}m=m.parentNode}};l.prototype._unclick=function(){"use strict";this._clickTarget=null};l.prototype._sendViaFrame=function(){"use strict";var m=this._request=new(c("AsyncRequest"))();m.setStatusElement(this._getStatusElement());m.addStatusIndicator();m.setOption("useIframeTransport",true);var n=m.handleResponse.bind(m),o=new(c("JSONPTransport"))("iframe",this._form.action,n),p=o.getTransportFrame(),q=o.getRequestURI().addQueryData({__iframe:true,__user:c("CurrentUser").getID()});this._form.setAttribute("action",q.toString());o.createContinuationForFileForm_DO_NOT_USE();this._form.setAttribute("target",p.name);m.setJSONPTransport(o);m.setURI(q);m.setHandler(this.success.bind(this,null));m.setErrorHandler(this.failure.bind(this,null));m.setInitialHandler(c("shield")(this.initial,this,null))};l.prototype._sendViaXHR=function(event){"use strict";var m;if(this._uploadInParallel&&c("AsyncUploadRequest").isSupported()){m=new(c("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(c("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var n in this._customHeader)m.setCustomHttpHeader(n,this._customHeader[n]);if(this._concurrentLimit)m.setLimit(this._concurrentLimit);if(this._files)m.setFiles(this._files);else m.setFiles(j(this._form));var o=[m.subscribe("progress",function(s,t){this.progress(t,t.getProgressEvent())}.bind(this)),m.subscribe("initial",function(s,t){this.initial(t,t.getResponse())}.bind(this)),m.subscribe("success",function(s,t){this.success(t,t.getResponse())}.bind(this)),m.subscribe("start",function(s,t){this.inform("start",{upload:t})}.bind(this)),m.subscribe("failure",function(s,t){this.failure(t,t.getResponse());return false}.bind(this)),m.subscribe("complete",function(){while(o.length)o.pop().unsubscribe()})]}else{var p;if(this._files){p=c("Form").createFormData(c("Form").serialize(this._form,this._clickTarget));var q=c("AsyncUploadRequest").parseFiles(this._files);for(var n in q){var r=q[n];if(r.length===1)p.append(n,r[0]);else{n=n+"[]";r.forEach(function(s){p.append(n,s)})}}}else p=c("Form").createFormData(this._form,this._clickTarget);m=new(c("AsyncRequest"))().setRawData(p).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(c("shield")(this.initial,this,null))}m.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=m;event&&event.prevent()};l.prototype.forceSendViaXHR=function(){"use strict";return this._sendViaXHR(null)};l.prototype.initial=function(m){"use strict";return this.inform("initial",{upload:m})};l.prototype.success=function(m,n){"use strict";var o={response:n,upload:m};if(this.inform("success",o)!==false)c("Event").fire(this._form,"success",o);this._cleanup()};l.prototype.failure=function(m,n){"use strict";var o={response:n,upload:m};if(this.inform("failure",o)!==false)if(c("Event").fire(this._form,"error",o)!==false)c("AsyncResponse").defaultErrorHandler(n);this._cleanup()};l.prototype.progress=function(m,event){"use strict";this.inform("progress",{event:event,upload:m})};l.prototype.abort=function(){"use strict";if(this._request){this._request.abort();this._cleanup()}};l.prototype.clear=function(){"use strict";k(this._form)};l.prototype.destroy=function(){"use strict";this._cleanup();while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;c("DataStore").remove(this._form,"FileForm")};l.prototype.submit=function(event){"use strict";this.canUseXHR()?this._sendViaXHR(event):this._sendViaFrame()};l.prototype._cleanup=function(){"use strict";this._request=null};l.prototype._getStatusElement=function(){"use strict";return c("Parent").byClass(this._form,"stat_elem")||this._form};l.getInstance=function(m){"use strict";return c("DataStore").get(m,"FileForm")};Object.assign(l,{EVENTS:["start","submit","initial","progress","success","failure"]});f.exports=l}),null);
__d("FileFormResetOnSubmit",["DOMQuery","Event","emptyFunction"],(function a(b,c,d,e,f,g){function h(j,k){var l=c("Event").listen(j,"change",c("emptyFunction").thatReturnsFalse,c("Event").Priority.URGENT);try{k()}catch(m){throw m}finally{l.remove()}}function i(j){"use strict";this._form=j}i.prototype.enable=function(){"use strict";var j=this._reset.bind(this);this._subscription=this._form.subscribe("submit",function(){setTimeout(j,0)})};i.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null};i.prototype._reset=function(){"use strict";var j=this._form.getRoot();h(j,function(){var k=c("DOMQuery").scry(j,'input[type="file"]');k.forEach(function(l){l.value=""})})};f.exports=i}),null);
__d("DOMClone",[],(function a(b,c,d,e,f,g){var h={shallowClone:function j(k){return i(k,false)},deepClone:function j(k){return i(k,true)}};function i(j,k){var l=j.cloneNode(k);if(typeof l.__FB_TOKEN!=="undefined")delete l.__FB_TOKEN;return l}f.exports=h}),null);
__d("FileInput",["cx","ArbiterMixin","DOM","DOMClone","Event","Focus","Keys","UserAgent_DEPRECATED","mixin"],(function a(b,c,d,e,f,g,h){var i,j,k=c("UserAgent_DEPRECATED").ie();i=babelHelpers.inherits(l,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function l(m,n,o){"use strict";j.constructor.call(this);this.container=m;this.control=n;var p=c("DOM").scry(this.container,"a")[0];p&&p.removeAttribute("href");var q=c("DOM").create("div",{className:"_3jk"},o);c("DOM").appendContent(this.control,q);this._boundHandleChange=this._handleChange.bind(this);if(k)this._boundHandleIEKeyDown=this._handleIEKeyDown.bind(this);this._setInputElement(o)}l.prototype.getValue=function(){"use strict";return this.input.value};l.prototype.getInput=function(){"use strict";return this.input};l.prototype.getContainer=function(){"use strict";return this.container};l.prototype.getControl=function(){"use strict";return this.control};l.prototype.clear=function(){"use strict";this.input.value="";if(this.input.value!==""){var m=c("DOMClone").deepClone(this.input);c("DOM").replace(this.input,m);this._setInputElement(m)}};l.prototype.destroy=function(){"use strict";this._focus.remove();this._focus=null;this._listener.remove();this._listener=null;if(k){this._IEKeyDownListener.remove();this._IEKeyDownListener=null}this.container=null;this.control=null;this.input=null};l.prototype._setInputElement=function(m){"use strict";this.input=m;this._focus&&this._focus.remove();this._focus=c("Focus").relocate(m,this.control);this._listener&&this._listener.remove();this._listener=c("Event").listen(m,"change",this._boundHandleChange);if(k){this._IEKeyDownListener&&this._IEKeyDownListener.remove();this._IEKeyDownListener=c("Event").listen(m,"keydown",this._boundHandleIEKeyDown)}};l.prototype._handleChange=function(event){"use strict";this.inform("change",event);if(this.input){var m=this.input.form;if(m&&k<9)c("Event").fire(m,"change",event)}};l.prototype._handleIEKeyDown=function(event){"use strict";if(event.keyCode===c("Keys").RETURN){event.preventDefault();var m=document.createEvent("MouseEvents");m.initEvent("click",true,true);this.input.dispatchEvent(m)}};f.exports=l}),null);
__d("submitForm",["DOM"],(function a(b,c,d,e,f,g){var h=function h(i){var j=c("DOM").scry(i,'input[type="submit"]')[0];if(j)j.click();else{j=c("DOM").create("input",{type:"submit",className:"hidden_elem"});c("DOM").appendContent(i,j);j.click();c("DOM").remove(j)}};f.exports=h}),null);
__d("FormSubmitOnChange",["Event","submitForm"],(function a(b,c,d,e,f,g){function h(i){"use strict";this._form=i}h.prototype.enable=function(){"use strict";this._listener=c("Event").listen(this._form.getRoot(),"change",this._submit.bind(this))};h.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null};h.prototype._submit=function(){"use strict";c("submitForm")(this._form.getRoot())};Object.assign(h.prototype,{_listener:null});f.exports=h}),null);
__d("Emscripten",[],(function a(b,c,d,e,f,g){f.exports={isSupported:function h(){return typeof Int32Array!=="undefined"&&typeof Float64Array!=="undefined"&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set}}}),null);
__d("PUWErrorCodes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904})}),null);
__d("BlobFactory",["emptyFunction"],(function a(b,c,d,e,f,g){var h=void 0,i=void 0;function j(){try{new b.Blob();i=true}catch(l){i=false}}var k=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder;if(b.Blob)h={getBlob:function l(m,n){m=m||[];n=n||{};if(i===undefined)j();if(i)return new b.Blob(m,n);else{var o=new k();for(var p=0;p<m.length;p++)o.append(m[p]);return o.getBlob(n.type)}},isSupported:c("emptyFunction").thatReturnsTrue};else h={getBlob:function l(){},isSupported:c("emptyFunction").thatReturnsFalse};f.exports=h}),null);
__d("WebWorker",["invariant","BanzaiLogger","BlobFactory","EventListener","SubscriptionsHandler","URI","WebWorkerConfig","XHRRequest","areSameOrigin","destroyOnUnload","emptyFunction","filterObject","getCrossOriginTransport","memoize","performanceNow"],(function a(b,c,d,e,f,g,h){var i=b.URL||b.webkitURL;function j(q){"use strict";this.$WebWorker1=false;this.$WebWorker2=null;this.$WebWorker3=q;this.__worker=null;this.$WebWorker4=c("emptyFunction");this.$WebWorker5=c("emptyFunction");this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new(c("SubscriptionsHandler"))();c("destroyOnUnload")(function(){if(!this.$WebWorker7)this.terminate()}.bind(this));this.$WebWorker9("constructed")}j.prototype.setMessageHandler=function(q){"use strict";this.$WebWorker4=q||c("emptyFunction");return this};j.prototype.setErrorHandler=function(q){"use strict";this.$WebWorker5=q||c("emptyFunction");return this};j.prototype.postMessage=function(q,r){"use strict";!this.isCurrentState("constructed")||h(0);!this.isCurrentState("terminated")||h(0);if(this.isCurrentState("preparing")){this.$WebWorker6.push(this.postMessage.bind(this,q,r));return this}var s={type:"message",message:q};if(r)this.getInterfaceableWorker().postMessage(s,r);else this.getInterfaceableWorker().postMessage(s);return this};j.prototype.terminate=function(){"use strict";if(this.isCurrentState("executing"))this.__worker.terminate();if(!this.isCurrentState("terminated")){this.$WebWorker9("terminated");this.__worker=null;this.$WebWorker10();this.$WebWorker6=[]}return this};j.prototype.execute=function(){"use strict";!this.isCurrentState("terminated")||h(0);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$WebWorker9("preparing");j.prepareResource(this.$WebWorker3,this.$WebWorker11.bind(this));return this};j.prototype.setAllowCrossPageTransition=function(q){"use strict";this.$WebWorker7=q;return this};j.prototype.isCurrentState=function(q){"use strict";j.states.includes(q)||h(0);return q===this.$WebWorker2};j.prototype.$WebWorker11=function(){"use strict";!this.isCurrentState("executing")||h(0);if(this.isCurrentState("terminated"))return;this.$WebWorker3.sameOriginURL||this.$WebWorker3.source||h(0);if(this.$WebWorker3.sameOriginURL)this.__worker=this.constructWorker(this.$WebWorker3.sameOriginURL);else{this.__worker=this.constructWorker(j.evalWorkerURL);this.getInterfaceableWorker().postMessage(this.$WebWorker3.source)}this.$WebWorker12("ping",Date.now());if(this.$WebWorker3.dynamicModules)try{this.$WebWorker12("defineModules",this.$WebWorker3.dynamicModules)}catch(q){this.terminate();this.$WebWorker13("define_error",{message:q.message});throw q}this.$WebWorker14();this.$WebWorker9("executing");this.$WebWorker6.forEach(function(r){return r()});this.$WebWorker6=null};j.prototype.$WebWorker10=function(){"use strict";this.$WebWorker8.release()};j.prototype.$WebWorker12=function(q){for(var r=arguments.length,s=Array(r>1?r-1:0),t=1;t<r;t++)s[t-1]=arguments[t];"use strict";this.getInterfaceableWorker().postMessage({type:q,args:s})};j.prototype.$WebWorker13=function(event,q){"use strict";j.$WebWorker13(event,this.$WebWorker3.name,babelHelpers["extends"]({},q,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker2}))};j.$WebWorker15=function(){"use strict";return Object.keys(c("filterObject")({object_url:j.$WebWorker16(),eval_url:o(),data_url:j.$WebWorker17(),worker:j.isSupported(),transferables:j.areTransferablesSupported()},function(q){return!!q}))};j.prototype.$WebWorker14=function(){"use strict";this.$WebWorker8.addSubscriptions(c("EventListener").listen(this.getInterfaceableWorker(),"message",this.$WebWorker18.bind(this)),c("EventListener").listen(this.getInterfaceableWorker(),"error",this.$WebWorker19.bind(this)))};j.prototype.$WebWorker19=function(q){"use strict";var r=this.$WebWorker5(q);if(!r&&!q.defaultPrevented)this.$WebWorker13("exception",{message:q.message})};j.prototype.$WebWorker18=function(event){"use strict";var q=event.data;switch(q.type){case"message":this.$WebWorker4(q.message);break;case"pong":this.$WebWorker1=true;this.$WebWorker13("executed",{dt:Math.floor(q.args[1]-q.args[0]),bytes:this.$WebWorker3.source?this.$WebWorker3.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$WebWorker13("haste_error",{message:q.message});break;case"console":var r=q.args.shift();["log","error","info","debug","warn"].includes(r)||h(0);b.console[r].apply(b.console,q.args);break}};j.prototype.$WebWorker9=function(q){"use strict";j.states.includes(q)||h(0);this.$WebWorker13("transition",{next_state:q});this.$WebWorker2=q};j.prepareResource=function(q,r){"use strict";r=r||c("emptyFunction");q.sameOriginURL||q.url||q.source||h(0);!!j.isSupported()||h(0);if(q.sameOriginURL)r();else if(q.url&&c("areSameOrigin")(new(c("URI"))(q.url),new(c("URI"))(b.location.href))){q.sameOriginURL=q.url;r()}else if(q.source){if(j.$WebWorker20())q.sameOriginURL=j.$WebWorker21(q.source);r()}else if(!q.loading){var s=c("performanceNow")();q.loading=[r];j.$WebWorker22(q.url,function(t){if(t){q.source=t;if(j.$WebWorker20())q.sameOriginURL=j.$WebWorker21(t);j.$WebWorker13("prepared",q.name,{dt:Math.floor(c("performanceNow")()-s),bytes:t.length})}else j.$WebWorker13("failed",q.name,{dt:Math.floor(c("performanceNow")()-s),bytes:0});q.loading.forEach(function(u){return u()});q.loading=false})}else q.loading.push(r);return q};j.releaseResource=function(q){"use strict";if(q.sameOriginURL.indexOf("blob:")===0){if(i.revokeObjectURL)i.revokeObjectURL(q.sameOriginURL);q.sameOriginURL=null}return q};j.isSupported=function(){"use strict";return n&&(j.$WebWorker20()||o())};j.areTransferablesSupported=function(){"use strict";return j.isSupported()&&p()};j.$WebWorker22=function(q,r){"use strict";new(c("XHRRequest"))(q).setTransportBuilder(c("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(s){r(s)}).setErrorHandler(r.bind(null,null)).send()};j.$WebWorker21=function(q){"use strict";j.$WebWorker20()||h(0);if(j.$WebWorker16()){var r=c("BlobFactory").getBlob([q],{type:"application/javascript"});return i.createObjectURL(r)}if(j.$WebWorker17())return"data:application/javascript,"+encodeURIComponent(q)};j.$WebWorker16=function(){"use strict";return c("BlobFactory").isSupported()&&l()};j.$WebWorker17=function(){"use strict";return m()};j.$WebWorker20=function(){"use strict";return j.$WebWorker16()||j.$WebWorker17()};j.$WebWorker13=function(event,q,r){"use strict";if(!c("WebWorkerConfig").logging.enabled)return;c("BanzaiLogger").log(c("WebWorkerConfig").logging.config,babelHelpers["extends"]({},r,{features_array:j.$WebWorker15(),event:event,resource:q}))};j.prototype.constructWorker=function(q){"use strict";return k(q)};j.prototype.getInterfaceableWorker=function(){"use strict";return this.__worker};function k(q){return new b.Worker(q)}var l=c("memoize")(function(){var q,r;if(!i||!i.createObjectURL)return false;try{q=i.createObjectURL(c("BlobFactory").getBlob([""],{type:"application/javascript"}));var s=k(q);s.terminate();r=true}catch(t){r=false}finally{if(i.revokeObjectURL)i.revokeObjectURL(q)}return r}),m=c("memoize")(function(){var q;try{var r=k("data:application/javascript,");r.terminate();q=true}catch(s){q=false}return q}),n=!!b.Worker,o=c("memoize")(function(){var q;try{var r=k(j.evalWorkerURL);r.terminate();q=true}catch(s){q=false}return q}),p=c("memoize")(function(){var q;try{var r=k(j.evalWorkerURL),s=new ArrayBuffer(0);r.postMessage({buffer:s},[s]);r.terminate();q=true}catch(t){q=false}return q});j.states=["constructed","preparing","executing","terminated"];j.evalWorkerURL=c("WebWorkerConfig").evalWorkerURL;f.exports=j}),null);
__d("PooledWebWorker",["WebWorker"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("WebWorker"));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this,m);this.$PooledWebWorker1=l;this.$PooledWebWorker2=k}j.prototype.getIndex=function(){"use strict";return this.$PooledWebWorker1};j.prototype.getPool=function(){"use strict";return this.$PooledWebWorker2};f.exports=j}),null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],(function a(b,c,d,e,f,g){h.isSupported=function(){"use strict";return c("PooledWebWorker").isSupported()};function h(i,j){"use strict";this.$WebWorkerPool1=[];for(var k=0;k<j;k++)this.$WebWorkerPool1.push(new(c("PooledWebWorker"))(this,k,i).setErrorHandler(this.$WebWorkerPool2).setMessageHandler(this.$WebWorkerPool3).execute());this.$WebWorkerPool4=0}h.prototype.setMessageHandler=function(i){"use strict";this.$WebWorkerPool5=i||c("emptyFunction");return this};h.prototype.setAllowCrossPageTransition=function(i){"use strict";this.$WebWorkerPool1.forEach(function(j){return j.setAllowCrossPageTransition(i)});return this};h.prototype.setErrorHandler=function(i){"use strict";this.$WebWorkerPool6=i||c("emptyFunction");return this};h.prototype.postMessage=function(){"use strict";var i=this.getWorker();for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];i.postMessage.apply(i,k);return i};h.prototype.$WebWorkerPool3=function(){"use strict";for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];j.unshift(this);this.getPool().$WebWorkerPool5.apply(this.getPool(),j)};h.prototype.$WebWorkerPool2=function(){"use strict";for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];j.unshift(this);return this.getPool().$WebWorkerPool6.apply(this.getPool(),j)};h.prototype.getWorker=function(){"use strict";var i=this.$WebWorkerPool1[this.$WebWorkerPool4];this.$WebWorkerPool4=(this.$WebWorkerPool4+1)%this.$WebWorkerPool1.length;return i};f.exports=h}),null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","PUWErrorCodes","WebWorker","WebWorkerPool"],(function a(b,c,d,e,f,g){var h=null;i.isSupported=function(){"use strict";return c("WebWorkerPool").isSupported()&&c("Emscripten").isSupported()&&!c("JpegResizerConfig").isGKBlacklisted};i.getSingleton=function(j){"use strict";if(!h)h=new i(j||i.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return h};i.prepareResource=function(j){"use strict";c("WebWorker").prepareResource(c("JpegResizeWorkerResource"),j)};function i(j){"use strict";j=j||i.DEFAULT_POOL_SIZE;c("WebWorker").prepareResource(c("JpegResizeWorkerResource"));this.$JpegResizer1=new(c("WebWorkerPool"))(c("JpegResizeWorkerResource"),j).setErrorHandler(this.$JpegResizer2.bind(this)).setMessageHandler(this.$JpegResizer3.bind(this));this.$JpegResizer4={};this.$JpegResizer5=i.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer6=i.DEFAULT_RESIZE_WIDTH}i.prototype.setHighQuality=function(j){"use strict";if(j){this.$JpegResizer5=i.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer6=i.DEFAULT_RESIZE_WIDTH}else{this.$JpegResizer5=i.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer6=i.LOW_QUALITY_RESIZE_WIDTH}return this};i.prototype.setAllowCrossPageTransition=function(j){"use strict";this.$JpegResizer1.setAllowCrossPageTransition(j);return this};i.prototype.resizeBlob=function(j,k,l){"use strict";return this.$JpegResizer7(j,this.$JpegResizer6,this.$JpegResizer5,k,l)};i.prototype.resize360Blob=function(j,k,l,m){"use strict";var n=this.$JpegResizer6*3,o=this.$JpegResizer5*3;if(m){n=m;o=m}return this.$JpegResizer7(j,n,o,k,l)};i.prototype.$JpegResizer7=function(j,k,l,m,n){"use strict";var o=this.$JpegResizer1.getWorker();if(o.isCurrentState("terminated")){var p=new Error("Worker terminated");p.code=c("PUWErrorCodes").WORKER_TERMINATED;m(p);return this}var q=o.postMessage({blob:j,height:l,width:k}).getIndex();this.$JpegResizer8(q).unshift({done:m,progress:n});return this};i.prototype.$JpegResizer8=function(j){"use strict";if(!Object.prototype.hasOwnProperty.call(this.$JpegResizer4,j))this.$JpegResizer4[j]=[];return this.$JpegResizer4[j]};i.prototype.$JpegResizer2=function(j,k){"use strict";j.terminate();var l=this.$JpegResizer8(j.getIndex());this.$JpegResizer9(k);l.forEach(function(m){return m.done(k)});l.length=0};i.prototype.$JpegResizer3=function(j,k){"use strict";if(k.error)this.$JpegResizer9(k.error);if(k.done)this.$JpegResizer8(j.getIndex()).pop().done(k.error,k.blob,k.skipped);else{var l=this.$JpegResizer8(j.getIndex()),m=l[l.length-1].progress;if(m)m({written:k.written,total:k.total})}};i.prototype.$JpegResizer9=function(j){"use strict";var k=j.message;if(k&&k.indexOf("Not a JPEG file")!==-1)j.code=c("PUWErrorCodes").BAD_JPEG;else if(k&&k.indexOf("abort()")!==-1)j.code=c("PUWErrorCodes").WORKER_ABORT;else j.code=c("PUWErrorCodes").UNKNOWN_RESIZE_ERROR};i.DEFAULT_POOL_SIZE=3;i.DEFAULT_RESIZE_HEIGHT=2048;i.DEFAULT_RESIZE_WIDTH=2048;i.LOW_QUALITY_RESIZE_HEIGHT=960;i.LOW_QUALITY_RESIZE_WIDTH=960;f.exports=i}),null);
__d("PhotosUploadID",[],(function a(b,c,d,e,f,g){var h=1024,i={getNewID:function j(){return(h++).toString()}};f.exports=i}),null);
__d("DataViewPolyfill",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){if(j===undefined)this.$DataViewPolyfill1=new Uint8Array(i);else if(k===undefined)this.$DataViewPolyfill1=new Uint8Array(i,j);else this.$DataViewPolyfill1=new Uint8Array(i,j,k);this.byteLength=this.$DataViewPolyfill1.byteLength}h.prototype.getUint8=function(i){if(i>=this.$DataViewPolyfill1.length)throw new Error("Trying to read beyond bounds of DataViewPolyfill");return this.$DataViewPolyfill1[i]};h.prototype.getUint16=function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1);return j?l*256+k:k*256+l};h.prototype.getUint32=function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1),m=this.getUint8(i+2),n=this.getUint8(i+3);return j?((n*256+m)*256+l)*256+k:((k*256+l)*256+m)*256+n};h.isSupported=function(){return!!b.Uint8Array};f.exports=h}),null);
__d("getImageSize",["DataViewPolyfill"],(function a(b,c,d,e,f,g){var h=b.DataView||c("DataViewPolyfill");function i(m){return{width:m.getUint16(6,true),height:m.getUint16(8,true)}}function j(m){return{width:m.getUint32(16,false),height:m.getUint32(20,false)}}function k(m){var n=m.byteLength,o=2;while(o<n){var p=m.getUint16(o,false);o+=2;if(p==65472||p==65474)return{width:m.getUint16(o+5,false),height:m.getUint16(o+3,false)};else o+=m.getUint16(o,false)}return null}function l(m){var n=new h(m);if(n.getUint8(0)==255&&n.getUint8(1)==216)return k(n);if(n.getUint8(0)==71&&n.getUint8(1)==73&&n.getUint8(2)==70)return i(n);if(n.getUint8(0)==137&&n.getUint8(1)==80&&n.getUint8(2)==78&&n.getUint8(3)==71)return j(n);return null}f.exports=l;l.gif=i;l.png=j;l.jpeg=k}),null);
__d("ChatAutoSendPhotoUploader",["csx","fbt","invariant","ArbiterMixin","AsyncUploadRequest","AsyncRequest","AudioMimeTypes","DOM","Event","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","JpegResizer","MercuryAttachmentType","MercuryConfig","MercuryConstants","PhotosMimeType","PhotosUploadID","Run","SubscriptionsHandler","URI","getImageSize","getObjectValues","isEmpty","mixin"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k,l;function m(){return"upload_"+c("PhotosUploadID").getNewID()}function n(p){return Array.prototype.reduce.call(p,function(q,r){var s=m();q[s]=r;return q},{})}k=babelHelpers.inherits(o,c("mixin")(c("ArbiterMixin")));l=k&&k.prototype;function o(p,q,r,s){l.constructor.call(this);this.$ChatAutoSendPhotoUploader1=r;this.$ChatAutoSendPhotoUploader2=q;this.$ChatAutoSendPhotoUploader3=s;this.$ChatAutoSendPhotoUploader4=new(c("SubscriptionsHandler"))();this.$ChatAutoSendPhotoUploader5={};this.$ChatAutoSendPhotoUploader6={};this.$ChatAutoSendPhotoUploader7=false;this.$ChatAutoSendPhotoUploader8=p.getAttribute("action");this.$ChatAutoSendPhotoUploader9=new(c("FileForm"))(p,[c("FormSubmitOnChange"),c("FileFormResetOnSubmit")]);this.$ChatAutoSendPhotoUploader9.setAllowCrossOrigin(true);this.$ChatAutoSendPhotoUploader9.setUploadInParallel(true);if(s)this.$ChatAutoSendPhotoUploader9.setCustomHttpHeader("X-MSGR-Region",s);var t=c("DOM").find(p,"._4q60"),u=c("DOM").find(t,"._4q61");this.$ChatAutoSendPhotoUploader10=new(c("FileInput"))(t,u,q);this.$ChatAutoSendPhotoUploader4.addSubscriptions(c("Run").onBeforeUnload(this.onBeforeUnload.bind(this)),this.$ChatAutoSendPhotoUploader9.subscribe("submit",this.$ChatAutoSendPhotoUploader11.bind(this)),this.$ChatAutoSendPhotoUploader9.subscribe("success",this.$ChatAutoSendPhotoUploader12.bind(this)),this.$ChatAutoSendPhotoUploader9.subscribe("failure",this.$ChatAutoSendPhotoUploader13.bind(this)),this.$ChatAutoSendPhotoUploader9.subscribe("progress",this.$ChatAutoSendPhotoUploader14.bind(this)),c("Event").listen(u,"click",function(){if(this.$ChatAutoSendPhotoUploader15===undefined)this.$ChatAutoSendPhotoUploader16();if(this.$ChatAutoSendPhotoUploader15)if(c("JpegResizer").prepareResource)c("JpegResizer").prepareResource();this.inform("open")}.bind(this)))}o.prototype.$ChatAutoSendPhotoUploader16=function(){this.$ChatAutoSendPhotoUploader15=c("JpegResizer").isSupported();if(this.$ChatAutoSendPhotoUploader15)this.$ChatAutoSendPhotoUploader9.setPreprocessHandler(this.$ChatAutoSendPhotoUploader17.bind(this))};o.prototype.onBeforeUnload=function(){if(this.isUploading()&&!this.$ChatAutoSendPhotoUploader7)return i._("You haven't sent your message yet. Do you want to leave without sending?")};o.prototype.isUploading=function(){return!c("isEmpty")(this.$ChatAutoSendPhotoUploader5)};o.prototype.destroy=function(){this.$ChatAutoSendPhotoUploader4.release();this.$ChatAutoSendPhotoUploader9.destroy();this.$ChatAutoSendPhotoUploader5={};this.$ChatAutoSendPhotoUploader6={}};o.prototype.$ChatAutoSendPhotoUploader18=function(p,q){var r=this.$ChatAutoSendPhotoUploader19(p);if(q){r.preview_width=q.width;r.preview_height=q.height}return r};o.prototype.$ChatAutoSendPhotoUploader19=function(p){var q={upload_id:p,on_progress:function(r){this.$ChatAutoSendPhotoUploader4.addSubscriptions(this.subscribe("progress",r))}.bind(this),on_resizing_progress:function(r){this.$ChatAutoSendPhotoUploader4.addSubscriptions(this.subscribe("resize_progress",r))}.bind(this),on_success:function(r){this.$ChatAutoSendPhotoUploader4.addSubscriptions(this.subscribe("success",r))}.bind(this),upload_canceled:this.$ChatAutoSendPhotoUploader20.bind(this),attach_type:c("MercuryAttachmentType").PHOTO,preview_uploading:true};return q};o.prototype.$ChatAutoSendPhotoUploader17=function(p,q){var r=p.getFile();if(!c("PhotosMimeType").isJpeg(r.type))return q(p);c("JpegResizer").getSingleton().resizeBlob(r,function(s,t,u){if(t)p.setFile(t);q(p)},this.$ChatAutoSendPhotoUploader21.bind(this,p))};o.prototype.$ChatAutoSendPhotoUploader11=function(){if(!c("MercuryConfig").WWWMessengerUploadFilesPreview)this.uploadFiles(this.$ChatAutoSendPhotoUploader2.files);return false};o.prototype.$ChatAutoSendPhotoUploader22=function(p){if(!p)return false;var q=0;for(var r=0;r<p.length;r++){var s=p[r];q+=s.size;if(q>c("MercuryConstants").AttachmentMaxSize){this.inform("file-upload-error",{error:"size-exceeded"});return false}if(s.type==="application/x-msdownload"||s.type==="application/x-msdownload-x64"){this.inform("file-upload-error",{error:"wrong-type"});return false}}return true};o.prototype.$ChatAutoSendPhotoUploader23=function(p,q){var r,s=this,t,u=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];if(typeof FileReader!=="undefined"&&FileReader.prototype.readAsArrayBuffer&&q&&q.length===1)(function(){s.$ChatAutoSendPhotoUploader5[p]=p;u[p]=q[0];var v=new FileReader();v.onload=function(){this.inform("submit",{upload_id:p,preview_attachments:[this.$ChatAutoSendPhotoUploader18(p,c("getImageSize")(v.result))]})}.bind(s);v.onerror=function(){this.inform("submit",{upload_id:p,preview_attachments:[this.$ChatAutoSendPhotoUploader19(p)]})}.bind(s);if(q[0].size)v.readAsArrayBuffer(q[0]);else{var w=babelHelpers["extends"]({},s.$ChatAutoSendPhotoUploader18(p,q[0].source),{preview_url:q[0].preview_url});s.inform("submit",{upload_id:p,preview_attachments:[w]})}})();else(function(){var v=[];if(!q){s.$ChatAutoSendPhotoUploader5[p]=p;s.$ChatAutoSendPhotoUploader1.value=p;v.push(s.$ChatAutoSendPhotoUploader19(p))}else{var w=Object.keys(u);if(w.length>0)w.forEach(function(z){this.$ChatAutoSendPhotoUploader5[z]=p;v.push(this.$ChatAutoSendPhotoUploader19(z))}.bind(s));else for(var x=0;x<q.length;++x){var y=m();u[y]=q[x];s.$ChatAutoSendPhotoUploader5[y]=p;v.push(s.$ChatAutoSendPhotoUploader19(y))}}s.inform("submit",{upload_id:p,preview_attachments:v})})();if(Object.keys(u).length>0)this.$ChatAutoSendPhotoUploader9.setFiles(u)};o.prototype.$ChatAutoSendPhotoUploader12=function(event,p){var q=this.$ChatAutoSendPhotoUploader24(p);if(this.$ChatAutoSendPhotoUploader5[q]){var r=this.$ChatAutoSendPhotoUploader5[q];delete this.$ChatAutoSendPhotoUploader5[q];var s=p.response.getPayload();if(!this.$ChatAutoSendPhotoUploader6[r])this.$ChatAutoSendPhotoUploader6[r]=[];this.$ChatAutoSendPhotoUploader6[r].push({id:q,audio_id:s.metadata[0].audio_id,image_id:s.metadata[0].image_id,file_id:s.metadata[0].file_id,gif_id:s.metadata[0].gif_id,video_id:s.metadata[0].video_id});this.inform("success",{upload_id:q});if(!this.$ChatAutoSendPhotoUploader25(r))this.$ChatAutoSendPhotoUploader26(r);this.$ChatAutoSendPhotoUploader10.clear();this.$ChatAutoSendPhotoUploader2=this.$ChatAutoSendPhotoUploader10.getInput()}};o.prototype.$ChatAutoSendPhotoUploader26=function(p){!this.$ChatAutoSendPhotoUploader25(p)||j(0);this.$ChatAutoSendPhotoUploader6[p].sort(function(q,r){return q.id<r.id?-1:1});this.inform("all-uploads-completed",{upload_id:p,audio_ids:this.$ChatAutoSendPhotoUploader6[p].map(function(q){return q.audio_id}),image_ids:this.$ChatAutoSendPhotoUploader6[p].map(function(q){return q.image_id}),file_ids:this.$ChatAutoSendPhotoUploader6[p].map(function(q){return q.file_id}),gif_ids:this.$ChatAutoSendPhotoUploader6[p].map(function(q){return q.gif_id}),video_ids:this.$ChatAutoSendPhotoUploader6[p].map(function(q){return q.video_id})});delete this.$ChatAutoSendPhotoUploader6[p]};o.prototype.$ChatAutoSendPhotoUploader14=function(event,p){this.inform("progress",{upload_id:p.upload.getName(),event:p.event})};o.prototype.$ChatAutoSendPhotoUploader21=function(p,event){this.inform("resize_progress",{upload_id:p.getName(),event:event})};o.prototype.$ChatAutoSendPhotoUploader25=function(p){return c("getObjectValues")(this.$ChatAutoSendPhotoUploader5).includes(p)};o.prototype.$ChatAutoSendPhotoUploader13=function(event,p){var q=this.$ChatAutoSendPhotoUploader24(p);this.$ChatAutoSendPhotoUploader27(q,"last-upload-failed",p.additionalParams);this.$ChatAutoSendPhotoUploader10.clear();this.$ChatAutoSendPhotoUploader2=this.$ChatAutoSendPhotoUploader10.getInput();return false};o.prototype.$ChatAutoSendPhotoUploader20=function(p){this.$ChatAutoSendPhotoUploader27(p,"last-upload-canceled")};o.prototype.$ChatAutoSendPhotoUploader27=function(p,q,r){if(!this.$ChatAutoSendPhotoUploader5[p])return;var s=this.$ChatAutoSendPhotoUploader5[p];delete this.$ChatAutoSendPhotoUploader5[p];if(!this.$ChatAutoSendPhotoUploader25(s))if(this.$ChatAutoSendPhotoUploader6[s])this.$ChatAutoSendPhotoUploader26(s);else this.inform(q,babelHelpers["extends"]({upload_id:s},r))};o.prototype.$ChatAutoSendPhotoUploader24=function(p){if(p.upload)return p.upload.getName();else return p.response&&p.response.getPayload().uploadID||p.getName()};o.prototype.uploadFiles=function(p){if(!this.$ChatAutoSendPhotoUploader22(p))return;var q=m(),r=void 0;if(p.length===1){var s;r=(s={},s[q]=p[0],s)}else r=n(p);var t=new(c("AsyncUploadRequest"))(this.$ChatAutoSendPhotoUploader8).setAllowCrossOrigin(true).setAllowCrossPageTransition(this.$ChatAutoSendPhotoUploader7).setRelativeTo(this.$ChatAutoSendPhotoUploader9.getRoot()).setFiles(r);if(this.$ChatAutoSendPhotoUploader3)t.setCustomHttpHeader("X-MSGR-Region",this.$ChatAutoSendPhotoUploader3);var u=Array.prototype.some.call(p,function(v){return c("AudioMimeTypes").isAudio(v.type)});if(u)t.setData({voice_clip:true});this.$ChatAutoSendPhotoUploader4.addSubscriptions(t.subscribe("success",function(event,v){this.$ChatAutoSendPhotoUploader12(event,{upload:v,response:v.getResponse()})}.bind(this)),t.subscribe("failure",this.$ChatAutoSendPhotoUploader13.bind(this)));t.send();this.$ChatAutoSendPhotoUploader23(q,p,r)};o.prototype.uploadURL=function(p){var q=m(),r=p.errorDialogParams;delete p.errorDialogParams;var s=new(c("AsyncRequest"))().setURI(new(c("URI"))(this.$ChatAutoSendPhotoUploader8).getPath()).setAllowCrossPageTransition(this.$ChatAutoSendPhotoUploader7).setData(babelHelpers["extends"]({},p,{attach_id:q})).setErrorHandler(function(t){this.$ChatAutoSendPhotoUploader13(null,{additionalParams:{errorDialogParams:r},response:{getPayload:function u(){return{uploadID:q}}}})}.bind(this)).setHandler(function(t){this.$ChatAutoSendPhotoUploader12(null,{response:t})}.bind(this));s.send();this.$ChatAutoSendPhotoUploader23(q,[p])};o.prototype.setAllowCrossPage=function(p){this.$ChatAutoSendPhotoUploader7=p;this.$ChatAutoSendPhotoUploader9.setAllowCrossPageTransition(p)};f.exports=o}),null);
__d("intlList",["fbt","invariant","React","keyMirror"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("keyMirror")({AND:null,NONE:null,OR:null}),k=c("keyMirror")({COMMA:null,SEMICOLON:null}),l=function l(n,o,p){o=o||j.AND;p=p||k.COMMA;var q=n.length;if(q===0)return"";else if(q===1)return n[0];var r=n[q-1],s=n[0];for(var t=1;t<q-1;++t)switch(p){case k.SEMICOLON:s=h._("{previous items}; {following items}",[h.param("previous items",s),h.param("following items",n[t])]);break;default:s=h._("{previous items}, {following items}",[h.param("previous items",s),h.param("following items",n[t])])}return m(s,r,o,p)};function m(n,o,p,q){switch(p){case j.AND:return h._("{list of items} and {last item}",[h.param("list of items",n),h.param("last item",o)]);case j.OR:return h._("{list of items} or {last item}",[h.param("list of items",n),h.param("last item",o)]);case j.NONE:switch(q){case k.SEMICOLON:return h._("{previous items}; {last item}",[h.param("previous items",n),h.param("last item",o)]);default:return h._("{list of items}, {last item}",[h.param("list of items",n),h.param("last item",o)])}default:i(0)}}l.DELIMITERS=k;l.CONJUNCTIONS=j;f.exports=l}),null);