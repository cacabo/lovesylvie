if (self.CavalryLogger) { CavalryLogger.start_js(["Jpiux"]); }

__d("messengerMessageCountReact",["cx","fbt","bs_block","bs_curry","React","numberRe","ReasonReact","bs_js_primitive","MercuryThreadInformer"],(function a(b,c,d,e,f,g,h,i){"use strict";function j(p){return c("bs_block").__(0,[p])}function k(p){return c("bs_block").__(1,[p])}var l=c("ReasonReact").reducerComponentWithRetainedProps("MessengerMessageCountReact");function m(p,q){if(p==null)return 0;else return c("bs_js_primitive").undefined_to_opt(p[q])}function n(p,q,r){return[l[0],l[1],l[2],function(s){var t=s[4],u=+(s[5][0]===p.thread_id);return[u!==0?t[0]:p.message_count,t[1],t[2]]},function(s){var t=s[4],u=s[3],v=c("bs_curry")._1(u,j),w=c("bs_curry")._1(u,k),x=c("MercuryThreadInformer").getForFBID(q),y=[x.subscribe("messages-received",function(r,A){return c("bs_curry")._1(v,A)})],z=[x.subscribe("messages-reordered",function(r,A){return c("bs_curry")._1(w,A)})];t[1][0]=y;t[2][0]=z;return 0},l[5],function(s){var t=s[4],u=t[1][0];if(u)u[0].unsubscribe();var v=t[2][0];if(v){v[0].unsubscribe();return 0}else return 0},l[7],l[8],function(s){return c("React").createElement("div",{className:"_60oa"},i._("Messages Sent:"),c("React").createElement("div",{className:"_397l"},c("ReasonReact").element(0,0,c("numberRe").make(s[4][0],[]))))},function(){return[p.message_count,[0],[0]]},[p.thread_id],function(s,t){if(s.tag){var u=m(s[0],p.thread_id);if(u&&u[0].source==="client_delete_messages")return c("bs_block").__(0,[[t[0]-1|0,t[1],t[2]]]);else return 0}else{var v=m(s[0],p.thread_id);if(v)return c("bs_block").__(0,[[t[0]+v[0].length|0,t[1],t[2]]]);else return 0}},l[13]]}var o=c("ReasonReact").wrapReasonForJs(l,function(p){return n(p.thread,p.viewer,[])});g.received=j;g.deleted=k;g.component=l;g.getThreadPayloadFromInform=m;g.make=n;g.jsComponent=o}),null);