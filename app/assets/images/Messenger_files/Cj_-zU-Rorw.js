if (self.CavalryLogger) { CavalryLogger.start_js(["WMlTX"]); }

__d("FundsAvailability",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("bs_js_dict",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(n,o){delete n[o];return 0};function i(n){var o=Object.keys(n),p=o.length,j=new Array(p);for(var q=0,r=p-1|0;q<=r;++q){var s=o[q];j[q]=[s,n[s]]}return j}function j(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r)q[r]=n[o[r]];return q}function k(i){var n={},o=i;while(true){var p=o;if(p){var q=p[0];n[q[0]]=q[1];o=p[1];continue}else return n}}function l(i){var n={},o=i.length;for(var p=0,q=o-1|0;p<=q;++p){var r=i[p];n[r[0]]=r[1]}return n}function m(n,o){var p={},q=Object.keys(o),r=q.length;for(var s=0,t=r-1|0;s<=t;++s){var u=q[s];p[u]=n(o[u])}return p}g.unsafeDeleteKey=h;g.entries=i;g.values=j;g.fromList=k;g.fromArray=l;g.map=m}),null);
__d("LeadGenInfoFieldTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",MESSENGER:"MESSENGER",STORE_LOOKUP:"STORE_LOOKUP",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF"})}),null);
__d("MNCommerceBubbleType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14})}),null);
__d("PaymentModulesClient",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",MOCK:"mock"})}),null);
__d("ServicesCalendarSyncType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"})}),null);
__d("messengerStoryAttachmentTransformerRe",["fbt","URI","bs_array","bs_string","bs_caml_array","bs_js_boolean","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function aa(ba,a,ca,da,ea,b,c){"use strict";function d(C){return a("bs_array").map(function(D){var E=D.user_confirmation,F=E==null?[null,null,null,null,false]:[E.cancel_button_label,E.continue_button_label,E.confirmation_message,E.confirmation_title,true],G=D.payment_metadata;return{action_link:D.action_link,action_type:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MNCommerceCallToActionType")[D.action_open_type])),title:D.title,confirmation_cancel_label:F[0],confirmation_continue_label:F[1],confirmation_message:F[2],confirmation_title:F[3],id:D.id,is_disabled:D.is_disabled,is_mutable_by_server:D.is_mutable_by_server,payment_metadata:G==null?{payment_module_config:null,total_price:null}:{payment_module_config:G.payment_module_config,total_price:G.total_price},render_style:D.render_style,webview_metadata:{messenger_extensions:D.webview_metadata.messenger_extensions,webview_height_ratio:D.webview_metadata.webview_height_ratio,webview_share_button:D.webview_metadata.webview_share_button},should_show_user_confirmation:F[4],page_id:D.page_id}},C)}function e(C){return a("bs_array").map(function(D){var E=D.url,F=E==null?null:new(a("URI"))(E).getUnqualifiedURI().toString();return{title:D.title,uri:F}},C)}function fa(C){if(!(C==null)&&C!=="")return"#"+a("bs_string").sub(C,2,C.length-2|0);else return null}function ga(C){if(C==null)return null;else return{url:C.uri,src:C.uri,width:C.width,height:C.height}}function f(C,D){var E=D.cover_photo,F;if(E==null)F=[null,null,null];else{var G=E.photo.image,H=G==null?[null,null]:[G.uri,{height:G.height,width:G.width}];F=[E.photo.id,H[0],H[1]]}var I=D.location,J=I==null?[null,null]:[I.latitude,I.longitude],K=D.overall_star_rating;return{address:D.address.single_line_full_address,category:D.top_category_name,coverPhotoID:F[0],coverPhotoURL:F[1],coverPhotoDimensions:F[2],latitude:J[0],longitude:J[1],name:D.name,rating:K==null?null:K.value,pageID:D.id,priceRange:D.price_range_description,viewerID:C}}function g(C){var D=C.group_commerce_item_seller,E=C.primary_photo,F;if(E==null)F=null;else{var G=E.image;F=G==null?null:G.uri}return{caption:C.group_commerce_item_description.text,desc:C.group_commerce_item_description.text,owner_id:D==null?null:D.id,price:C.formatted_price.text,text:C.group_commerce_item_description.text,title:C.group_commerce_item_title,thumb_url:F,url:C.url}}function h(C){return{app_name:C.application_name,artists:C.artist_names,audio_url:C.audio_url,duration_ms:C.duration_ms,title:C.music_title}}function i(C){var D=C.payment;return{id:C.id,desc:C.desc,display_total_cost:C.total_cost,merchant_name:C.merchant_name,target_url:C.target_url,thumb_url:C.thumb_url,raw_amount:C.raw_amount,payment_id:D==null?null:D.id,total_cost:{amount:a("bs_caml_format").caml_float_of_string(C.price_amount),currency:C.price_currency},name:C.name}}function j(C){return{id:C.id,canDonate:C.canDonate,hasViewerDonated:C.hasViewerDonated,fundraiserDetailedProgressText:C.fundraiserDetailedProgressText,fundraiserSubtitleText:C.fundraiserSubtitleText,focusedCoverPhoto:C.focusedCoverPhoto}}function k(C){return{id:C.id,name:C.name,desc:C.desc,thumb_url:C.thumb_url,item_url:C.item_url,title:C.name,text:C.desc,source:C.source,image_aspect_ratio:C.image_aspect_ratio,metalines:{metaline_1:C.first_metaline,metaline_2:C.second_metaline,metaline_3:C.third_metaline},default_action:C.default_action,call_to_actions:d(C.call_to_actions)}}function l(C){var D=C.guestStatus,E=C.event_place,F=C.social_context;return{eventID:C.eventID,guestStatus:D==null?"unknown":a("bs_string").lowercase(D),canViewerJoin:C.canViewerJoin,timeString:C.timeString,locationString:E==null?null:E.name,socialOrTimeContextString:F==null?null:F.text,connectedButtonText:c._("Joined"),unconnectedButtonText:c._("Going"),watchStatus:a("bs_string").lowercase(C.watchStatus),showInterestedAction:a("bs_js_boolean").to_js_boolean(+(C.connection_style==="INTERESTED")),canViewerWatch:C.canViewerWatch}}function m(C){var D=function D($){var F=$.page_call_to_action;if(F==null)return undefined;else return F.id},E=function E($){var F=$.page_call_to_action;if(F==null)return false;else{var G=F.component_flow_service_config;if(G==null)return false;else return true}},F=C.page,G=F==null?[undefined,undefined,undefined,false]:[F.id,a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("ServicesCalendarSyncType")[F.calendar_sync_type])),D(F),E(F)],H=C.native_component_flow_request,I;if(H==null)I=null;else{var J=H.page,K=H.page,L=H.page,M;if(L==null)M=undefined;else{var N=L.profile_picture;M=N==null?undefined:N.uri}var O=H.suggested_time_range,P=H.product_item,Q=H.product_item,R=H.product_item,S=H.product_item,T;if(S==null)T=undefined;else{var U=S.profile_picture;T=U==null?undefined:U.uri}var V=H.user,W=H.user,X=H.user,Y;if(X==null)Y=undefined;else{var ha=X.profile_picture;Y=ha==null?undefined:ha.uri}I={requestAdminApprovalType:H.request_admin_approval_type,availability:H.availability,calendarSyncType:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("ServicesCalendarSyncType")[H.calendar_sync_type])),hasSavedToCalendar:H.has_saved_to_calendar,generalInfo:H.service_general_info,id:H.id,pageID:J==null?undefined:J.id,pageName:K==null?undefined:K.name,pageProfilePic:M,preferredTimeRange:O==null?null:{end:O.end,start:O.start},price:P==null?null:P.experimental_freeform_price,duration:Q==null?null:Q.duration_in_seconds,requestedTime:H.requested_time,serviceName:R==null?null:R.name,serviceProfilePic:T,specialRequest:H.special_request,status:H.booking_status_value,statusLabel:H.status,userID:V==null?undefined:V.id,username:W==null?undefined:W.short_name,userProfilePic:Y,additionalInfo:H.additional_info}}var ia=C.message_bubble_type,Z;switch(ia){case"CANCELLED":Z=["Cancelled",c._("Cancelled")];break;case"DECLINED":Z=["Declined",c._("Declined")];break;case"REQUESTED":Z=["Requested",c._("Requested")];break;case"SCHEDULEED":Z=["Scheduled",c._("Scheduled")];break;default:throw[a("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}return{id:C.id,pageID:G[0],calendarSyncType:G[1],ctaID:G[2],hasServiceConfig:G[3],userID:C.user.id,status:Z[0],statusLabel:Z[1],viewerID:a("CurrentUser").getAccountID(),requestMetadata:I}}function n(C){return{live_location_id:C.live_location_id,is_expired:a("bs_js_boolean").to_js_boolean(C.is_expired),expiration_time:C.expiration_time,sender:C.sender,coordinate:C.coordinate,location_title:C.location_title,sender_destination:C.sender_destination,stop_reason:C.stop_reason}}function o(C){var D=C.first_metaline;return{desc:C.description,id:C.id,image_aspect_ratio:C.image_aspect_ratio,item_url:C.target_url,metalines:D==null?{}:{metaline_1:D},name:C.name,source:C.source_name,text:C.description,thumb_url:C.image_url,title:C.name,default_action:C.default_action,call_to_actions:d(C.call_to_actions),media_blob_attachments:C.media_blob_attachments}}function p(C){var D=a("bs_array").map(o,C.business_items.nodes),E=d(C.call_to_actions);return{message:C.message,call_to_actions:E,items:D}}function q(C){return{message:C.message,call_to_actions:d(C.call_to_actions),items:a("bs_array").map(o,C.promotion_items.nodes)}}function r(C){var D=C.partner_logo;return{account_holder_name:C.account_holder_name,adjustments:a("bs_array").map(function(E){return{adjustment_type:E.adjustment_type,display_adjustment_amount:E.adjustment_amount}},C.adjustments),cancellation_url:C.cancellation_url,items:a("bs_array").map(o,C.items.nodes),merchant_name:C.merchant_name,messenger_commerce_bubble_type:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MNCommerceBubbleType")[C.messenger_commerce_bubble_type])),order_id:C.order_id,order_time:C.order_time,order_url:C.order_url,payment_method:C.payment_method,receipt_id:C.receipt_id,recipient_name:C.recipient_name,shipping_cost:C.shipping_cost,shipping_method:C.shipping_method,status:C.status,structured_address:{city:C.structured_address.city,state:C.structured_address.state,country:C.structured_address.country,postal_code:C.structured_address.postal_code,street_1:a("bs_caml_array").caml_array_get(C.structured_address.streets,0),street_2:a("bs_caml_array").caml_array_get(C.structured_address.streets,1)},subtotal:C.subtotal,total_cost:C.total_cost,total_tax:C.total_tax,partner_logo:D==null?undefined:D.uri}}function s(C,D){return{payment_modules_client:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("PaymentModulesClient")[D.payment_modules_client])),is_viewer_seller:D.is_viewer_seller,payment_snippet:D.payment_snippet,item_list:a("bs_array").map(function(E){return{item_id:E.item_id,name:E.name,subtitle:E.subtitle,description:E.description,unit_price:E.unit_price,image_urls:a("bs_array").map(function(F){return F.uri},E.images),quantity:E.quantity}},D.item_list),components:D.components,payment_call_to_actions:D.payment_call_to_actions,click_action:D.click_action,actor_id:C,invoicer_id:D.invoicer_id}}var t=function t(C){var D=a("LeadGenInfoFieldTypes"),E={},F=[];for(var G=C.field_data_list,H=Array.isArray(G),I=0,G=H?G:G[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var J;if(H){if(I>=G.length)break;J=G[I++]}else{I=G.next();if(I.done)break;J=I.value}var K=J,L=K.field_type,M=K.label,N=K.values;if(L===D.CUSTOM)F.push({label:M,values:N});else E[L]={label:M,values:N}}E.questions=F;return E};function u(C,D){var E=D.invite_recipient,F=E==null?null:E.id,G=D.invite_sender,H=G==null?null:G.id;return{quick_invite_id:D.id,recipient_id:F,sender_id:H,is_viewer_recipient:a("bs_js_boolean").to_js_boolean(+(C===F))}}function v(C){var D=function D(G){if(G==null)return null;else return G.uri},E=C.listing_category,F=E==null?[null,null]:[E.offer_image,E.request_image];return{listingType:C.listing_type,mapURI:D(C.map_image),offerURI:D(F[0]),requestURI:D(F[1])}}function w(C){return{sender:C.sender,receiver:C.receiver,transfer_id:C.transfer_id,bubbleView:C.bubble_view}}function x(C){var D=C.receiver_profile,E;if(D==null)E=null;else{var F=D.profile_picture;E={id:D.id,name:D.short_name,full_name:D.name,picture:F==null?null:F.uri,profile_url:D.url}}var G=C.sender,H;if(G==null)H={};else{var I=G.profile_picture;H={id:G.id,name:G.name,full_name:G.full_name,picture:I==null?null:I.uri,profile_uri:G.url}}var J=C.transfer_context,K;if(J==null)K=[null,null,null];else{var L=J.transfer_theme;K=[J.memoText,a("bs_array").map(function(O){var D=O.image;if(D==null)return null;else return D.uri},J.memo_images),L==null?null:L.id]}var M=C.platform_item,N=M==null?null:{name:M.name,description:M.description,image:a("bs_array").map(function(O){var D=O.image;if(D==null)return null;else return D.uri},M.photos),refURL:M.url};return{sender:H,amountWithSymbol:C.transaction_amount.formatted_amount,status:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("P2PTransferStatus")[C.transfer_status])),receiver:E,transfer_id:C.transfer_id,completedTime:C.completedTime,updatedTime:C.updatedTime,creationTime:C.creationTime,amount:C.transaction_amount.amount,memoText:K[0],memoPhotoURLs:K[1],themeID:K[2],discountAmount:C.amount_fb_discount.formatted,fundsAvailability:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("FundsAvailability")[C.funds_availability])),groupThreadFBID:C.group_thread_fbid,platform_item:N,statusDescription:{markup:C.status_description},bubbleView:C.bubble_view}}function y(C){var D=C.requester,E;if(D==null)E=undefined;else{var F=D.profile_picture;E={id:D.id,name:D.short_name,full_name:D.name,picture:F==null?null:F.uri,profile_url:D.url}}var G=C.requestee,H;if(G==null)H=undefined;else{var I=G.profile_picture;H={id:G.id,name:G.short_name,full_name:G.name,picture:I==null?null:I.uri,profile_url:G.url}}var J=a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("P2PPaymentRequestStatus")[C.request_status])),K=C.transfer,L=K==null?[null,""]:[x(K),K.id],M=C.request_theme;return{amount:C.transaction_amount.amount,amountWithSymbol:C.amount.formatted,requestee:H,requester:E,currentStatus:J,currency:C.amount.currency,creationTime:C.creation_time,groupThreadFBID:C.group_thread_fbid,id:C.id,memoText:C.memo_text,themeID:M==null?null:M.id,transfer:L[0],transferID:L[1],updatedTime:C.updated_time,statusDescription:{markup:C.status_description}}}function z(C){var D=y({amount:C.amount,transaction_amount:C.transaction_amount,requester:C.requester,requestee:C.requestee,request_status:C.request_status,request_theme:C.request_theme,id:C.id,memo_text:C.memo_text,transfer:C.transfer,creation_time:C.creation_time,group_thread_fbid:C.group_thread_fbid,updated_time:C.updated_time,status_description:C.status_description}),E={individualRequests:a("bs_array").map(y,C.individual_requests)};return Object.assign(D,E)}function A(C,D){var E=D.media,F=E==null?null:E.animated_image,G=E==null?null:E.image,H={};a("bs_array").iter(function(V){var I=V.value;H[V.key]=I==null?null:I.text;return 0},D.properties);var I=D.target,J;if(I==null)J=null;else switch(I.tag|0){case 0:J=v(I[0]);break;case 1:J=w(I[0]);break;case 2:J=x(I[0]);break;case 3:J=z(I[0]);break;case 4:J=s(C,I[0]);break;case 7:J=q(I[0]);break;case 8:J=p(I[0]);break;case 10:J=t(I[0]);break;case 11:J=n(I[0]);break;case 12:J=u(C,I[0]);break;case 13:J=m(I[0]);break;case 14:var K=I[0],L=K.genie_sender,M=L==null?[null,null]:[L.messaging_actor.id,L.messaging_actor.name],N=M[0],O=K.story_attachment,P=O==null?null:B(C,{legacy_attachment_id:N,story_attachment:{action_links:O.action_links,messaging_attribution:O.messaging_attribution,messenger_call_to_actions:O.messenger_call_to_actions,deduplication_key:O.deduplication_key,description:O.description,media:O.media,properties:O.properties,source:O.source,style_list:O.style_list,title_with_entities:O.title_with_entities,url:O.url,subattachments:[],target:null}});J={genie_id:N,genie_name:M[1],attachment:P};break;case 15:J=l(I[0]);break;case 16:J=h(I[0]);break;case 18:J=k(I[0]);break;case 19:J=i(I[0]);break;case 20:J=j(I[0]);break;case 21:J=r(I[0]);break;case 23:J=g(I[0]);break;case 24:J=f(C,I[0]);break;default:J=I[0]}var Q=D.target,R=!(Q==null)&&Q.tag===7?0:null,S=D.description,T=D.source,U=D.title_with_entities;return{description:S==null?null:S.text,media:{animated_image:F==null?null:F.uri,animated_image_size:F==null?{height:null,width:null}:{height:F.height,width:F.width},image:G==null?null:G.uri,image_size:G==null?{height:null,width:null}:{height:G.height,width:G.width},duration:E==null?null:E.playable_duration,playable:E==null?null:E.is_playable,source:E==null?null:E.playable_url},source:T==null?null:T.text,style_list:D.style_list,title:U==null?null:U.text,action_links:e(D.action_links),messaging_attribution:D.messaging_attribution,messenger_ctas:D.messenger_call_to_actions,properties:H,uri:D.url,deduplication_key:D.deduplication_key,target:J,label:R}}function B(C,D){var E=D.story_attachment,F;if(E==null)F=null;else{var G={share_id:D.legacy_attachment_id,subattachments:a("bs_array").map(function(I){return A(C,I)},E.subattachments)},H={description:E.description,media:E.media,source:E.source,style_list:E.style_list,title_with_entities:E.title_with_entities,properties:E.properties,url:E.url,deduplication_key:E.deduplication_key,action_links:E.action_links,messaging_attribution:E.messaging_attribution,messenger_call_to_actions:E.messenger_call_to_actions,target:E.target};F=Object.assign(G,A(C,H))}return{app_attribution:null,attach_type:a("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:F,thumbnail_url:null}}b._getCallToActions=d;b._getActionLinks=e;b._getColor=fa;b._getLogo=ga;b._getPageTarget=f;b._getGroupCommerceProductItemTarget=g;b._getExternalSongTarget=h;b._getAgentSuggestionItemTarget=i;b._getFundraiserTarget=j;b._getRetailItemTarget=k;b._getEventTarget=l;b._getPagesPlatformBookingMessageTarget=m;b._getMessageLiveLocationTarget=n;b._getBusinessRetailItem=o;b._getMessengerBusinessMessageTarget=p;b._getMessengerRetailPromotionTarget=q;b._getMessengerRetailReceiptTarget=r;b._getPagesPlatformAttachmentTarget=s;b._getPagesPlatformLeadGenInfoTarget=t;b._getQuickInviteTarget=u;b._getCrisisListingTarget=v;b._getMoneyTransferTarget=w;b._getP2PTransferTarget=x;b._getP2PTransferRequestTarget=y;b._getP2PTransferRequestWithIndividualRequests=z;b.transformStoryAttachment=A;b.getExtensibleAttachmentPayload=B}),null);
__d("messengerAttachmentTransformerRe",["fbt","bs_array","bs_js_boolean","bs_pervasives","MercuryAttachmentType","MercuryAttachmentContentType","messengerStoryAttachmentTransformerRe"],(function a(b,c,d,e,f,g,h){"use strict";function i(q){if(q.is_malicious)return{app_attribution:null,icon_type:c("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:c("MercuryAttachmentType").ERROR,error_msg:h._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var r=q.attribution_app,s;if(r==null)s=null;else{var t=r.square_logo;s={id:r.id,icon_url:t==null?null:t.uri,metadata:q.attribution_metadata,name:r.name}}var u=q.url;return{app_attribution:s,icon_type:q.content_type,metadata:null,name:q.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:u==null?null:u,attach_type:c("MercuryAttachmentType").FILE,error_msg:undefined,message_file_fbid:q.message_file_fbid,url_shimhash:q.url_shimhash,url_skipshim:q.url_skipshim}}}function j(q,r,s){var t=q.chat_image,u=t==null?[null,null,null]:[t.uri,t.width,t.height],v=u[0],w=q.chat_image,x=w==null?null:{width:w.width,height:w.height},y=q.large_image,z=y==null?[null,null]:[y.uri,{width:y.width,height:y.height}],A=q.inbox_image,B=A==null?[null,null]:[A.uri,{width:A.width,height:A.height}],C=q.attribution_app,D;if(C==null)D=null;else{var E=C.square_logo;D={id:C.id,icon_url:E==null?null:E.uri,metadata:q.attribution_metadata,name:C.name}}return{app_attribution:D,attach_type:c("MercuryAttachmentType").VIDEO,name:q.filename,url:q.playable_url,rel:"async",preview_url:v,preview_width:u[1],preview_height:u[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").VIDEO,metadata:{fbid:q.legacy_attachment_id,render_as_sticker:c("bs_js_boolean").to_js_boolean(+(q.video_type==="SPEAKING_STICKER")),dimensions:{width:q.original_dimensions.x,height:q.original_dimensions.y},duration:q.playable_duration_in_ms,large_size:z[1],large_preview:z[0],chat_size:x,chat_preview:v,inbox_size:B[1],inbox_preview:B[0],pageid:s?r:undefined},thumbnail_url:v,share:null}}function k(q){var r=q.attribution_app,s;if(r==null)s=null;else{var t=r.square_logo;s={id:r.id,icon_url:t==null?null:t.uri,metadata:q.attribution_metadata,name:r.name}}return{app_attribution:s,attach_type:c("MercuryAttachmentType").FILE,name:q.filename,url:q.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").MUSIC,metadata:{duration:q.playable_duration_in_ms,isVoicemail:q.is_voicemail?"1":"0",type:q.audio_type==="VOICE_MESSAGE"?"fb_voice_message":q.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:q.url_shimhash,url_skipshim:q.url_skipshim}}function l(q,r,s){var t=q.preview_image,u=t==null?[null,null,null]:[t.uri,t.width,t.height],v=q.animated_image,w=v==null?null:v.uri,x=q.attribution_app,y;if(x==null)y=null;else{var z=x.square_logo;y={id:x.id,icon_url:z==null?null:z.uri,metadata:q.attribution_metadata,name:x.name}}return{app_attribution:y,attach_type:c("MercuryAttachmentType").ANIMATED_IMAGE,name:q.filename,url:w,rel:"async",preview_url:u[0],preview_width:u[1],preview_height:u[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").PHOTO,metadata:{fbid:q.legacy_attachment_id,image:w,dimensions:c("bs_pervasives").string_of_int(q.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(q.original_dimensions.y)),pageid:s?r:undefined},thumbnail_url:w,share:null}}function m(q){var r=q.original_extension==="gif"?c("MercuryAttachmentType").ANIMATED_IMAGE:q.render_as_sticker?c("MercuryAttachmentType").THIRDPARTYSTICKER:c("MercuryAttachmentType").PHOTO,s=q.preview,t=s==null?[null,null,null]:[s.uri,s.width,s.height],u;if(r===c("MercuryAttachmentType").PHOTO){var v=q.large_preview;u=v==null?[null,null,null]:[v.uri,v.width,v.height]}else u=[null,null,null];var w=q.attribution_app,x;if(w==null)x=null;else{var y=w.square_logo;x={id:w.id,icon_url:y==null?null:y.uri,metadata:q.attribution_metadata,name:w.name}}var z=q.thumbnail;return{app_attribution:x,attach_type:r,name:q.filename,url:null,rel:"async",preview_url:t[0],preview_width:t[1],preview_height:t[2],large_preview_url:u[0],large_preview_width:u[1],large_preview_height:u[2],icon_type:c("MercuryAttachmentContentType").PHOTO,metadata:{fbid:q.legacy_attachment_id,dimensions:c("bs_pervasives").string_of_int(q.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(q.original_dimensions.y))},thumbnail_url:z==null?null:z.uri,share:null}}function n(q,r){var s=r,t=q;if(q>=r){var u=c("bs_pervasives").min(120,t/2),v=u/(t/2);return[u|0,s/2*v|0]}else{var w=c("bs_pervasives").min(120,s/2),x=w/(s/2);return[t/2*x|0,w|0]}}function o(q){var r=n(q.width,q.height),s=q.pack,t=q.sprite_image,u=q.sprite_image_2x,v=q.padded_sprite_image,w=q.padded_sprite_image_2x;return{app_attribution:null,attach_type:c("MercuryAttachmentType").STICKER,name:null,url:q.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:q.label,stickerID:q.id,packID:s==null?null:s.id,frameCount:q.frame_count,frameRate:q.frame_rate,framesPerRow:q.frame_count>1?q.frames_per_row:1,framesPerCol:q.frame_count>1?q.frames_per_column:1,height:r[1],width:r[0],spriteURI:t==null?null:t.uri,spriteURI2x:u==null?null:u.uri,paddedSpriteURI:v==null?null:v.uri,paddedSpriteURI2x:w==null?null:w.uri,thumbnail_url:null,share:null}}}function p(q,r,s){var t=[],u=r.extensible_attachment;if(!(u==null))t.push(c("messengerStoryAttachmentTransformerRe").getExtensibleAttachmentPayload(q,u));var v=r.sticker;if(!(v==null))t.push(o(v));var w=r.blob_attachments;if(!(w==null))c("bs_array").iter(function(x){switch(x.tag|0){case 0:t.push(m(x[0]));return 0;case 1:t.push(l(x[0],q,s));return 0;case 2:t.push(k(x[0]));return 0;case 3:t.push(j(x[0],q,s));return 0;case 4:t.push(i(x[0]));return 0}},w);return t}g._getFilePayload=i;g._getVideoPayload=j;g._getAudioPayload=k;g._getAnimatedImagePayload=l;g._getImagePayload=m;g._getStickerDimensions=n;g._getStickerPayload=o;g.transformAttachment=p}),null);
__d("MessengerThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1653440704674191"};j.getQueryID=function(){"use strict";return"989429627861476"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XGraphQLBatchAPIController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/api/graphqlbatch/",{queries:{type:"String"},batch_name:{type:"String"},scheduler:{type:"Enum",enumType:1}})}),null);
__d("WebGraphQL",["ActorURI","Deferred","WebGraphQLConfig","XGraphQLBatchAPIController","XHRRequest","createChunkedResponseParser","getAsyncParams","getSameOriginTransport"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getURIBuilder().getURI(),k={exec:function l(m,n){return k.execAll([m],n)[0]},execAll:function l(m,n){var o={},p={},q=m.map(function(t,u){var v="o"+u;o[v]={doc_id:t.__getDocID(),query_params:t.__getVariables()};return p[v]=new(c("Deferred"))()}),r=babelHelpers["extends"]({},c("getAsyncParams")("POST"));if(n&&n.actorID!=null)r[c("ActorURI").PARAMETER_ACTOR]=n.actorID;var s=new(c("XHRRequest"))(j).setMethod("POST").setTransportBuilder(c("getSameOriginTransport")).setRequestHeader("Content-Type","application/x-www-form-urlencoded").setData(babelHelpers["extends"]({},r,{queries:JSON.stringify(o)})).setResponseHandler(c("createChunkedResponseParser")(function(t,u,v){var w=JSON.parse(t);Object.keys(w).forEach(function(x){var y=p[x];if(y){var z=w[x];if(z.errors)y.reject(z);else if(z.data)y.resolve(z.data);else y.reject({data:{},errors:[{message:"Unexpected response received from server.",severity:"CRITICAL",response:z}]})}});if(v)Object.keys(p).forEach(function(x){if(!p[x].isSettled())p[x].reject({data:{},errors:[{message:"No response received from server.",severity:"CRITICAL"}]})})}));if(c("WebGraphQLConfig").use_timeout_handler)s.setTimeout(c("WebGraphQLConfig").timeout).setTimeoutHandler(function(){Object.keys(p).forEach(function(t){if(!p[t].isSettled())p[t].reject({data:{},errors:[{message:"Request timed out.",severity:"CRITICAL"}]})})});s.send();return q},__forController:h};return k}f.exports=h(c("XGraphQLBatchAPIController"))}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",MEDIA:"media"})}),null);
__d("MessagingTagUtils",["MessagingSourceEnum","MessagingTagConstants","MercuryMessageSourceTags","Set"],(function a(b,c,d,e,f,g){"use strict";var h=new(c("Set"))(Object.values(c("MessagingSourceEnum")));function i(l){for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(h.has(q))return q}return c("MessagingSourceEnum").UNKNOWN}function j(l){for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=q.split(c("MessagingTagConstants").app_id_root);if(r.length>1)return r[1].trim()}return null}function k(l,m){var n=[],o=j(l);if(o&&c("MessagingTagConstants").orca_app_ids.indexOf(o)!==-1)n.push(c("MercuryMessageSourceTags").MESSENGER);if(c("MessagingTagConstants").chat_sources.indexOf(m)!==-1)n.push(c("MercuryMessageSourceTags").CHAT);if(c("MessagingTagConstants").email_source===m)n.push(c("MercuryMessageSourceTags").EMAIL);if(c("MessagingTagConstants").mobile_sources.indexOf(m)!==-1)n.push(c("MercuryMessageSourceTags").MOBILE);return n}f.exports={getSourceFromTags:i,getSourceTags:k}}),null);
__d("messengerMessageTransformerRe",["FBID","bs_array","bs_block","bs_string","getByPath","bs_js_boolean","MercuryIDs","bs_pervasives","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","InstantGameUpdateXMATUpdateType","messengerAttachmentTransformerRe"],(function a(b,c,d,e,f,g){"use strict";function h(o,p,q){var r;if(o.__typename==="GroupPollExtensibleMessageAdminText"){var s=o.question,t;if(s==null)t=[{},null];else{var u=Object.assign({},s);Object.assign(u,{total_count:o.total_count,options:c("bs_array").map(function(v){var w=Object.assign({},v);return Object.assign(w,{total_count:v.voters.nodes.length,voters:c("bs_array").map(function(x){return x.id},v.voters.nodes)})},s.options.nodes)});t=[u,s.id]}r={message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{event_type:c("bs_string").lowercase(o.event_type),question_id:t[1],question_json:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(JSON.stringify(t[0])))}}}else r=o.__typename==="InstantGameUpdateExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{game_id:c("getByPath")(o,["game","id"]),update_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("InstantGameUpdateXMATUpdateType")[o.update_type])),collapsed_text:o.collapsed_text,expanded_text:o.expanded_text,cta_url:c("getByPath")(o,["instant_game_update_data","cta_url"]),cta_title:c("getByPath")(o,["instant_game_update_data","cta_title"]),custom_image_url:c("getByPath")(o,["instant_game_update_data","photo","image","uri"]),template:c("getByPath")(o,["instant_game_update_data","template"])}}:o.__typename==="MessengerAdContextAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{ad_url:o.ad_url}}:o.__typename==="ThemeColorExtensibleMessageAdminText"||o.__typename==="ThreadIconExtensibleMessageAdminText"||o.__typename==="ThreadNicknameExtensibleMessageAdminText"||o.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||o.__typename==="AddContactExtensibleMessageAdminText"||o.__typename==="RtcCallLogExtensibleMessageAdminText"||o.__typename==="GameScoreExtensibleMessageAdminText"||o.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||o.__typename==="PartiesInviteExtensibleMessageAdminText"||o.__typename==="AppointmentReminderExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:Object.assign({},o)}:{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:undefined};return{log_message_body:q,log_message_data:r,log_message_type:c("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function i(o){return c("bs_array").map(function(p){if(p==="p2p_transfer")return c("StoryAttachmentStyle").ORION;else if(p==="p2p_payment_request")return c("StoryAttachmentStyle").ORION_REQUEST;else return p},o)}function j(o){var p=o.target,q;if(p==null)q=null;else if(p.__typename==="CrisisListing")q=c("bs_block").__(0,[{listing_type:p.listing_type,listing_category:p.listing_category,map_image:p.map_image}]);else if(p.__typename==="MoneyTransfer")q=c("bs_block").__(1,[{sender:p.sender,receiver:p.receiver,transfer_id:p.transfer_id,bubble_view:p.bubble_view}]);else if(p.__typename==="PeerToPeerTransfer")q=c("bs_block").__(2,[{sender:p.sender,receiver_profile:p.receiver_profile,transaction_amount:p.transaction_amount,transfer_status:p.transfer_status,transfer_id:p.transfer_id,completedTime:p.completedTime,updatedTime:p.updatedTime,creationTime:p.creationTime,transfer_context:p.transfer_context,amount_fb_discount:p.amount_fb_discount,funds_availability:p.funds_availability,group_thread_fbid:p.group_thread_fbid,platform_item:p.platform_item,id:p.id,status_description:p.status_description,bubble_view:p.bubble_view}]);else if(p.__typename==="PeerToPeerPaymentRequest")q=c("bs_block").__(3,[{amount:p.amount,transaction_amount:p.transaction_amount,requester:p.requester,requestee:p.requestee,request_status:p.request_status,request_theme:p.request_theme,id:p.id,memo_text:p.memo_text,transfer:p.transfer,creation_time:p.creation_time,group_thread_fbid:p.group_thread_fbid,updated_time:p.updated_time,status_description:p.status_description,individual_requests:p.individual_requests}]);else if(p.__typename==="PaymentPlatformAttachment")q=c("bs_block").__(4,[{payment_modules_client:p.payment_modules_client,is_viewer_seller:p.is_viewer_seller,payment_snippet:p.payment_snippet,item_list:p.item_list,components:p.components,payment_call_to_actions:p.payment_call_to_actions,click_action:p.click_action,invoicer_id:p.invoicer_id}]);else if(p.__typename==="MomentsAppMessengerInvitation")q=c("bs_block").__(5,[{snippet:p.snippet}]);else if(p.__typename==="MomentsAppMessengerPhotoRequest")q=c("bs_block").__(6,[{snippet:p.snippet}]);else if(p.__typename==="MessengerRetailPromotion")q=c("bs_block").__(7,[{message:p.message,call_to_actions:p.call_to_actions,promotion_items:p.promotion_items}]);else if(p.__typename==="MessengerBusinessMessage")q=c("bs_block").__(8,[{message:p.message,call_to_actions:p.call_to_actions,business_items:p.business_items}]);else if(p.__typename==="Video")q=c("bs_block").__(9,[{video_id:p.video_id}]);else if(p.__typename==="PagesPlatformLeadGenInfo")q=c("bs_block").__(10,[{field_data_list:p.field_data_list}]);else if(p.__typename==="MessageLiveLocation")q=c("bs_block").__(11,[{live_location_id:p.live_location_id,is_expired:p.is_expired,expiration_time:p.expiration_time,sender:p.sender,coordinate:p.coordinate,location_title:p.location_title,sender_destination:p.sender_destination,stop_reason:p.stop_reason}]);else if(p.__typename==="QuickInvite")q=c("bs_block").__(12,[{id:p.id,invite_sender:p.invite_sender,invite_recipient:p.invite_recipient}]);else if(p.__typename==="PagesPlatformBookingMessage")q=c("bs_block").__(13,[{id:p.id,page:p.page,message_bubble_type:p.message_bubble_type,user:p.user,native_component_flow_request:p.native_component_flow_request}]);else if(p.__typename==="GenieMessage")q=c("bs_block").__(14,[{genie_sender:p.genie_sender,story_attachment:p.story_attachment}]);else if(p.__typename==="Event")q=c("bs_block").__(15,[{eventID:p.eventID,guestStatus:p.guestStatus,canViewerJoin:p.canViewerJoin,timeString:p.timeString,event_place:p.event_place,social_context:p.social_context,watchStatus:p.watchStatus,connection_style:p.connection_style,canViewerWatch:p.canViewerWatch}]);else if(p.__typename==="ExternalSong")q=c("bs_block").__(16,[{application_name:p.application_name,artist_names:p.artist_names,audio_url:p.audio_url,duration_ms:p.duration_ms,music_title:p.music_title}]);else if(p.__typename==="LightweightAction")q=c("bs_block").__(17,[{lwa_state:p.lwa_state,lwa_type:p.lwa_type}]);else if(p.__typename==="MessengerRetailItem")q=c("bs_block").__(18,[{id:p.id,name:p.name,desc:p.desc,thumb_url:p.thumb_url,item_url:p.item_url,source:p.source,image_aspect_ratio:p.image_aspect_ratio,first_metaline:p.first_metaline,second_metaline:p.second_metaline,third_metaline:p.third_metaline,default_action:p.default_action,call_to_actions:p.call_to_actions}]);else if(p.__typename==="AgentItemSuggestion")q=c("bs_block").__(19,[{id:p.id,desc:p.desc,total_cost:p.total_cost,merchant_name:p.merchant_name,target_url:p.target_url,thumb_url:p.thumb_url,raw_amount:p.raw_amount,payment:p.payment,price_amount:p.price_amount,price_currency:p.price_currency,name:p.name}]);else if(p.__typename==="FundraiserPersonToCharity"||p.__typename==="FundraiserPersonForPerson"){var r=p.fundraiser_detailed_progress_text,s=p.fundraiser_subtitle_text,t=p.focused_cover_photo;q=c("bs_block").__(20,[{id:p.id,canDonate:p.can_donate,hasViewerDonated:p.has_viewer_donated,fundraiserDetailedProgressText:r==null?null:r.text,fundraiserSubtitleText:s==null?null:s.text,focusedCoverPhoto:t==null?null:{src:t.photo.image.uri,data:{height:t.photo.image.height,width:t.photo.image.width}}}])}else q=p.__typename==="MessengerRetailReceipt"?c("bs_block").__(21,[{account_holder_name:p.account_holder_name,adjustments:p.retail_adjustments,cancellation_url:p.cancellation_url,items:p.retail_items,merchant_name:p.merchant_name,messenger_commerce_bubble_type:p.bubble_type,order_id:p.receipt_id,order_time:p.order_time_for_display,order_url:p.receipt_url,payment_method:p.order_payment_method,receipt_id:p.id,recipient_name:p.recipient_name,shipping_cost:p.shipping_cost,shipping_method:p.shipping_method,status:p.status,structured_address:p.structured_address,subtotal:p.subtotal,total_cost:p.total,total_tax:p.tax,partner_logo:p.partner_log}]):p.__typename==="JobApplication"?c("bs_block").__(22,[{id:p.id}]):p.__typename==="GroupCommerceProductItem"?c("bs_block").__(23,[{group_commerce_item_description:p.group_commerce_item_description,group_commerce_item_seller:p.group_commerce_item_seller,formatted_price:p.formatted_price,group_commerce_item_title:p.group_commerce_item_title,primary_photo:p.primary_photo,url:p.url}]):p.__typename==="Page"?c("bs_block").__(24,[{address:p.address,top_category_name:p.top_category_name,cover_photo:p.cover_photo,location:p.location,name:p.name,overall_star_rating:p.overall_star_rating,id:p.id,price_range_description:p.price_range_description}]):p.__typename==="MessengerEventReminder"?c("bs_block").__(25,[{is_active:p.is_active}]):p.__typename==="AirlineBoardingPassCollectionMessageAttachment"?c("bs_block").__(26,[{tint_color:p.tint_color,logo:p.logo,flight_label:p.flight_label,boarding_time_label:p.boarding_time_label,departure_label:p.departure_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,flight_terminal_label:p.flight_terminal_label,flight_gate_label:p.flight_gate_label,view_boarding_pass_cta_label:p.view_boarding_pass_cta_label,boarding_passes:p.boarding_passes,share_cta_label:p.share_cta_label,message_cta_label:p.message_cta_label,boarding_pass_title_label:p.boarding_pass_title_label,boarding_pass_error_title_label:p.boarding_pass_error_title_label}]):p.__typename==="AirlineCheckInReminderMessageAttachment"?c("bs_block").__(27,[{pnr_number:p.pnr_number,tint_color:p.tint_color,checkin_url:p.checkin_url,booking_number_label:p.booking_number_label,flight_label:p.flight_label,arrival_time_label:p.arrival_time_label,departure_time_label:p.departure_time_label,checkin_cta_label:p.checkin_cta_label,logo:p.logo,flight_infos:p.flight_infos}]):p.__typename==="AirlineUpdateMessageAttachment"?c("bs_block").__(28,[{pnr_number:p.pnr_number,tint_color:p.tint_color,update_type:p.update_type,departure_time_label:p.departure_time_label,arrival_time_label:p.arrival_time_label,booking_number_label:p.booking_number_label,flight_gate_label:p.flight_gate_label,flight_label:p.flight_label,flight_status_label:p.flight_status_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,logo:p.logo,flight_info:p.flight_info,hightlighted_labels:p.hightlighted_labels}]):p.__typename==="AirlineItineraryMessageAttachment"?c("bs_block").__(29,[{confirmation_number:p.confirmation_number,pnr_number:p.pnr_number,tint_color:p.tint_color,formatted_total:p.formatted_total,itemized_price_infos:p.itemized_price_infos,formatted_tax:p.formatted_tax,formatted_base_price:p.formatted_base_price,passenger_infos:p.passenger_infos,logo:p.logo,aircraft_type_label:p.aircraft_type_label,arrival_time_label:p.arrival_time_label,base_price_label:p.base_price_label,booking_number_label:p.booking_number_label,cabin_type_label:p.cabin_type_label,departure_time_label:p.departure_time_label,flight_confirmation_label:p.flight_confirmation_label,flight_date_label:p.flight_date_label,flight_label:p.flight_label,flight_terminal_label:p.flight_terminal_label,itinerary_error_title_label:p.itinerary_error_title_label,itinerary_title_label:p.itinerary_title_label,passenger_name_label:p.passenger_name_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,purchase_summary_label:p.purchase_summary_label,taxes_label:p.taxes_label,total_label:p.total_label,view_details_cta_label:p.view_details_cta_label,itinerary_legs:p.itinerary_legs}]):p.__typename==="MessengerRetailShipmentTrackingEvent"?c("bs_block").__(30,[{id:p.id,shipment:p.shipment,tracking_event_time_for_display:p.tracking_event_time_for_display,shipment_tracking_event_type:p.shipment_tracking_event_type,messenger_commerce_location:p.messenger_commerce_location,tracking_event_description:p.tracking_event_description,bubble_type:p.bubble_type}]):p.__typename==="MessengerRetailShipment"?c("bs_block").__(31,[{id:p.id,tracking_number:p.tracking_number,shipdate_for_display:p.shipdate_for_display,estimated_delivery_time_for_display:p.estimated_delivery_time_for_display,commerce_origin:p.commerce_origin,commerce_destination:p.commerce_destination,retail_carrier:p.retail_carrier,shipment_tracking_events:p.shipment_tracking_events,receipt:p.receipt,recipient:p.recipient,retail_shipment_items:p.retail_shipment_items,bubble_type:p.bubble_type}]):null;return{description:o.description,media:o.media,source:o.source,style_list:i(o.style_list),title_with_entities:o.title_with_entities,properties:o.properties,url:o.url,deduplication_key:o.deduplication_key,action_links:o.action_links,messaging_attribution:o.messaging_attribution,messenger_call_to_actions:o.messenger_call_to_actions,target:q}}function k(o){var p=j({description:o.description,media:o.media,source:o.source,style_list:o.style_list,title_with_entities:o.title_with_entities,properties:o.properties,url:o.url,deduplication_key:o.deduplication_key,action_links:o.action_links,messaging_attribution:o.messaging_attribution,messenger_call_to_actions:o.messenger_call_to_actions,target:o.target});if(p==null)return null;else{var q=c("bs_array").map(j,o.subattachments);return Object.assign({subattachments:q},p)}}function l(o){var p=o.blob_attachments,q=[];if(!(p==null))c("bs_array").iter(function(r){if(r.__typename==="MessageImage"){q.push(c("bs_block").__(0,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,preview:r.preview,large_preview:r.large_preview,thumbnail:r.thumbnail,legacy_attachment_id:r.legacy_attachment_id,original_dimensions:r.original_dimensions,original_extension:r.original_extension,render_as_sticker:r.render_as_sticker}]));return 0}else if(r.__typename==="MessageAnimatedImage"){q.push(c("bs_block").__(1,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,animated_image:r.animated_image,legacy_attachment_id:r.legacy_attachment_id,preview_image:r.preview_image,original_dimensions:r.original_dimensions}]));return 0}else if(r.__typename==="MessageAudio"){q.push(c("bs_block").__(2,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,playable_url:r.playable_url,playable_duration_in_ms:r.playable_duration_in_ms,is_voicemail:r.is_voicemail,audio_type:r.audio_type,url_shimhash:r.url_shimhash,url_skipshim:r.url_skipshim}]));return 0}else if(r.__typename==="MessageVideo"){q.push(c("bs_block").__(3,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,playable_url:r.playable_url,playable_duration_in_ms:r.playable_duration_in_ms,legacy_attachment_id:r.legacy_attachment_id,chat_image:r.chat_image,video_type:r.video_type,original_dimensions:r.original_dimensions,large_image:r.large_image,inbox_image:r.inbox_image}]));return 0}else if(r.__typename==="MessageFile"){q.push(c("bs_block").__(4,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,url:r.url,content_type:r.content_type,is_malicious:r.is_malicious,message_file_fbid:r.message_file_fbid,url_shimhash:r.url_shimhash,url_skipshim:r.url_skipshim}]));return 0}else return 0},p);return q}function m(o){var p=o.message;if(p==null)return[];else{var q=[];c("bs_array").iter(function(r){var p=r.entity;if(p==null)return 0;else{var s=p.id,t=p.thread_key;if(s==null)if(t==null)return 0;else{var u=t.thread_fbid;if(u==null)return 0;else{q.push({id:u,offset:r.offset,length:r.length,type:r.__typename});return 0}}else{q.push({id:s,offset:r.offset,length:r.length,type:r.__typename});return 0}}},p.ranges);return q}}function n(o,p,q,r){var s={};c("bs_array").iter(function(X){s[X.user.id]=X.reaction;return 0},p.message_reactions);var t=+c("FBID").isUser(p.message_sender.id),u=t?c("MessagingTagUtils").getSourceFromTags(p.tags_list):c("MessagingSourceEnum").UNKNOWN,v=t?c("MessagingTagUtils").getSourceTags(p.tags_list,u):[],w=p.commerce_message_type,x=p.customizations,y={thread_id:q.thread_id,thread_fbid:q.thread_fbid,other_user_fbid:q.other_user_fbid,action_type:p.__typename==="UserMessage"?c("MercuryActionType").USER_GENERATED_MESSAGE:c("MercuryActionType").LOG_MESSAGE,message_id:p.message_id,threading_id:null,offline_threading_id:p.offline_threading_id,author:c("MercuryIDs").getParticipantIDFromUserID(p.message_sender.id),author_email:p.message_sender.email,ephemeral_ttl_mode:p.ttl,timestamp:c("bs_caml_format").caml_float_of_string(p.timestamp_precise),is_unread:p.unread,is_filtered_content:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT)!==-1)),is_filtered_content_bh:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_BH)!==-1)),is_filtered_content_account:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1)),is_filtered_content_quasar:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1)),is_filtered_content_invalid_app:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1)),is_sponsored:p.is_sponsored,commerce_message_type:w==null?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MNCommerceMessageType")[w])),customizations:x==null?[]:x,source:u,source_tags:v,tags:p.tags_list,is_spoof_warning:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||p.tags_list.indexOf(c("MessagingTag").SPAM_SPOOFING)!==-1||p.tags_list.indexOf(c("MessagingTag").SPOOF_WARNING)!==-1)),folder:q.folder,platform_xmd:p.platform_xmd_encoded,message_source:p.message_source_data,montage_reply_data:p.montage_reply_data,skip_bump_thread:false,profile_ranges:m(p),reactions:s};if(p.__typename==="UserMessage"){var z=l(p),A=p.extensible_attachment,B;if(A==null)B=null;else{var C=A.story_attachment;B={legacy_attachment_id:A.legacy_attachment_id,story_attachment:C==null?null:k(C)}}var D=c("messengerAttachmentTransformerRe").transformAttachment(o,{extensible_attachment:B,blob_attachments:z,sticker:p.sticker},r),E=p.message,F=p.page_admin_sender;Object.assign(y,{body:E==null?null:E.text,creator_info:F==null?null:{creatorID:F.admin_id,creatorName:F.name,creatorType:F.sender_type,labelType:F.label_type,pageID:F.page_id,profileURI:F.profile_uri},subject:null,has_attachment:c("bs_js_boolean").to_js_boolean(+(D.length>0)),attachments:D,raw_attachments:null,ranges:undefined,meta_ranges:p.meta_ranges.map(function(X){return babelHelpers["extends"]({},X,{data:JSON.parse(X.data)})})})}else if(p.__typename==="VoiceCallMessage"||p.__typename==="VideoCallMessage"){var G=p.__typename,H=G==="VoiceCallMessage"?c("MercuryLogMessageType").PHONE_CALL:c("MercuryLogMessageType").VIDEO_CALL,I=p.message_sender.id,J=q.other_user_fbid,K=J==null?null:c("MercuryIDs").getParticipantIDFromUserID(I===J?c("CurrentUser").getID():J),L=p.answered;Object.assign(y,{log_message_type:H,log_message_data:{answered:L==null?false:L,caller:c("MercuryIDs").getParticipantIDFromUserID(I),callee:K},log_message_body:p.snippet})}else if(p.__typename==="ThreadNameMessage")Object.assign(y,{log_message_type:c("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:p.thread_name},log_message_body:p.snippet});else if(p.__typename==="ThreadImageMessage"){var M=p.image_with_metadata,N;if(M==null)N=null;else{var O=M.preview;N={preview_url:O==null?null:O.uri,metadata:{fbid:M.legacy_attachment_id,dimensions:c("bs_pervasives").string_of_int(M.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(M.original_dimensions.y))}}}Object.assign(y,{log_message_type:c("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:N},log_message_body:p.snippet})}else if(p.__typename==="ParticipantsAddedMessage"){var P=p.participants_added;Object.assign(y,{log_message_type:c("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:P==null?[]:c("bs_array").map(function(X){return c("MercuryIDs").getParticipantIDFromUserID(X.id)},P)},log_message_body:p.snippet})}else if(p.__typename==="ParticipantLeftMessage"){var Q=p.participants_removed;Object.assign(y,{log_message_type:c("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:Q==null?[]:c("bs_array").map(function(X){return c("MercuryIDs").getParticipantIDFromUserID(X.id)},Q)},log_message_body:p.snippet})}else if(p.__typename==="GenericAdminTextMessage"){var R=p.extensible_message_admin_text,S=p.extensible_message_admin_text_type;if(R==null){if(!(S==null))Object.assign(y,{log_message_body:p.snippet,log_message_data:{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[S])),untypedData:undefined},log_message_type:c("MercuryLogMessageType").GENERIC_ADMIN_TEXT})}else if(!(S==null))Object.assign(y,h(R,S,p.snippet))}else if(p.__typename==="P2PPaymentRequestMessage"){var T=p.p2p_sender,U=p.p2p_receiver,V=p.amount,W=p.message_type;Object.assign(y,{log_message_body:p.snippet,log_message_data:{transfer_id:p.transfer_id,senderId:T==null?null:c("MercuryIDs").getParticipantIDFromUserID(T.id),receiverId:U==null?null:c("MercuryIDs").getParticipantIDFromUserID(U.id),formattedAmount:V==null?null:V.formatted,subtype:W==null?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("P2PPaymentLogMessageSubtype")[W]))},log_message_type:c("MercuryLogMessageType").ORION})}return y}g._getGenericAdminTextMessage=h;g._getStyleList=i;g.unsafeCastExtensibleAttachmentWithoutSubattachments=j;g.unsafeCastExtensibleAttachment=k;g.unsafeCastBlobAttachments=l;g._getProfileRanges=m;g.transformMessage=n}),null);
__d("messengerReadReceiptTransformerRe",["bs_array","bs_caml_format"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k={};c("bs_array").iter(function(l){var m=l.actor;if(!(m==null)&&i!==m.id){k[m.id]={action:c("bs_caml_format").caml_float_of_string(l.action),watermark:c("bs_caml_format").caml_float_of_string(l.watermark)};return 0}else return 0},j.nodes);return k}g.transformReadReceipt=h}),null);
__d("messengerThreadTransformerRe",["URI","bs_array","bs_string","bs_caml_array","bs_js_boolean","MercuryIDs","bs_caml_format","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","MessagingThreadType","messengerAttachmentTransformerRe","MessengerThreadCannotReplyReason"],(function a(b,c,d,e,f,g){"use strict";function h(t){var u=t.location_coordinates,v=u==null?[null,null]:[u.latitude,u.longitude],w=t.location_page,x;if(w==null)x=null;else{var y=w.address;x=y==null?null:y.full_address}var z=t.allows_rsvp,A=z!==0?1:0,B=c("bs_array").fold_left(function(D,E){D[E.node.id]=E.guest_list_state;return D},{},t.event_reminder_members.edges),C=t.lightweight_event_creator;return{creator_id:C==null?null:C.id,event_members:B,event_time:t.time,event_type:t.lightweight_event_type,latitude:v[0],longitude:v[1],location_address:x,location_name:t.location_name,note:t.note,oid:t.id,related_event:t.related_event,repeat_mode:t.repeat_mode,seconds_to_notify_before:t.seconds_to_notify_before,status:t.lightweight_event_status,title:t.event_title,track_rsvp:A}}function i(t){var u=t.associated_object;if(u==null)return null;else{var v=u.action_link,w;if(v==null)w=null;else{var x=+c("WorkModeConfig").is_work_user,y=x!==0?c("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";w=new(c("URI"))(v).setDomain(y)}var z=u.profile_picture;return{id:u.id,name:u.name,action_link:w,profile_picture:z==null?null:{uri:z.uri},room_type:u.room_type,privacy_mode:u.privacy_mode,approval_mode_toggleable:u.approval_mode_toggleable,start_timestamp:u.start_timestamp,event_place:u.event_place}}}function j(t){var u=t.related_page_thread;if(u==null)return null;else{var v=c("bs_array").map(function(w){return w.name},u.custom_thread_tags.nodes);return{flagged:u.is_flagged,customTagNames:v}}}function k(t){var u=t.thread_key.other_user_id;if(u==null)return 0;else{var v=t.all_participants.nodes;return c("bs_array").fold_left(function(w,x){var y=x.messaging_actor;if(y.id===u)return+(y.__typename==="User");else return w},0,v)}}function l(t){if(t.length){var u={};c("bs_array").iter(function(v){var w=v.nickname;if(w==null)return 0;else{u[v.participant_id]=w;return 0}},t);return u}else return null}function m(t){if(!(t==null)&&t!=="")return"#"+c("bs_string").sub(t,2,t.length-2|0);else return null}function n(t){if(t==null)return null;else{var u={};c("bs_array").iter(function(v){u[v.participant_id]=v.days_active;return 0},t);return u}}function o(t){if(t==null)return null;else{var u={};c("bs_array").iter(function(v){u[v.participant_id]=v.participant_message_count;return 0},t);return u}}function p(t){if(t==null)return null;else{var u={};c("bs_array").iter(function(v){u[v.participant_id]=v.reacted_to_count;return 0},t);return u}}function q(t){if(t==null)return null;else return t}function r(t){return c("bs_caml_array").caml_array_get(t,0)}function s(t,u,v){var w=u.customization_info,x;if(w==null)x=[null,null,null];else{var y=w.emoji;x=[m(w.outgoing_bubble_color),y==null?null:{emoji:y},l(w.participant_customizations)]}var z=u.thread_streak_data,A=z==null?[null,null,null]:[q(z.days_in_streak),q(z.streak_reciprocation_timestamp),q(z.streak_begin_timestamp)],B=u.page_comm_item,C=B==null?[null,null,null,null,null]:[B.comm_status,B.comm_source_id,B.id,B.subtitle,B.comm_item_owners],D=u.last_message.nodes.length?[c("bs_caml_array").caml_array_get(u.last_message.nodes,0)]:0,E=u.last_read_receipt.nodes.length?[c("bs_caml_array").caml_array_get(u.last_read_receipt.nodes,0)]:0,F;if(D){var G=D[0];F=c("messengerAttachmentTransformerRe").transformAttachment(t,{extensible_attachment:G.extensible_attachment,blob_attachments:G.blob_attachments,sticker:G.sticker},v)}else F=[];var H=u.cannot_reply_reason,I=u.thread_queue_metadata,J=u.thread_type,K=u.montage_thread,L=u.image,M=u.thread_key.other_user_id,N=u.thread_queue_metadata,O=u.name,P=u.thread_key.other_user_id,Q;if(P==null){var R=u.thread_key.thread_fbid;Q=R==null?u.thread_key.legacy_thread_id:R}else Q=P;var S=u.thread_key.legacy_thread_id,T=u.rtc_call_data,U;if(T==null)U=null;else{var V=T.initiator;U={call_state:T.call_state,server_info_data:T.server_info_data,initiator_fbid:V==null?0:c("bs_caml_format").caml_float_of_string(V.id)}}return{admin_ids:c("bs_array").map(function(W){return W.id},u.thread_admins),approval_mode:u.approval_mode,approval_queue_ids:I==null?[]:c("bs_array").map(function(W){return c("MercuryIDs").getParticipantIDFromUserID(W.id)},I.approval_requests.nodes),can_reply:H==null?true:false,cannot_reply_reason:u.cannot_reply_reason,custom_color:x[0],custom_like_icon:x[1],custom_nickname:x[2],customization_enabled:u.customization_enabled,days_in_streak:A[0],thread_type:J==null?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingThreadType")[J])),participant_add_mode:u.participant_add_mode_as_string,ephemeral_ttl_mode:u.ephemeral_ttl_mode,folder:c("bs_string").lowercase(u.folder),has_email_participant:H==null?false:c("bs_js_boolean").to_js_boolean(+(H===c("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT)),has_montage:K==null?false:true,image_src:L==null?null:L.uri,is_archived:c("bs_js_boolean").to_js_boolean(u.has_viewer_archived),is_canonical_user:c("bs_js_boolean").to_js_boolean(k(u)),is_canonical:M==null?false:true,is_pin_protected:c("bs_js_boolean").to_js_boolean(u.is_pin_protected),is_subscribed:c("bs_js_boolean").to_js_boolean(u.is_viewer_subscribed),is_thread_queue_enabled:N==null?false:true,joinable_mode:{mode:c("bs_caml_format").caml_int_of_string(u.joinable_mode.mode),link:u.joinable_mode.link},last_message_timestamp:D?c("bs_caml_format").caml_float_of_string(D[0].timestamp_precise):0,last_message_type:D?D[0].commerce_message_type:null,last_read_timestamp:E?c("bs_caml_format").caml_float_of_string(E[0].timestamp_precise):0,lightweight_event:u.event_reminders.nodes.length?h(c("bs_caml_array").caml_array_get(u.event_reminders.nodes,0)):null,message_count:u.message_count,mute_until:u.mute_until,name:O==null?"":O,other_user_fbid:u.thread_key.other_user_id,page_thread_info:j(u),participants:c("bs_array").map(function(W){return c("MercuryIDs").getParticipantIDFromUserID(W.messaging_actor.id)},u.all_participants.nodes),participant_days_active:n(u.participant_days_active),participant_message_counts:o(u.participant_message_counts),participant_reacted_to_counts:p(u.participant_reacted_to_counts),participants_event_status:u.participants_event_status,read_only:H==null?false:c("bs_js_boolean").to_js_boolean(+(H===c("MessengerThreadCannotReplyReason").READ_ONLY)),recipients_loadable:H==null?true:c("bs_js_boolean").to_js_boolean(+(H!==c("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE)),server_timestamp:c("bs_caml_format").caml_float_of_string(u.updated_time_precise),snippet_attachments:F,snippet_sender:D?c("MercuryIDs").getParticipantIDFromUserID(D[0].message_sender.messaging_actor.id):null,snippet:D?D[0].snippet:null,streak_begin_ts:A[2],streak_reciprocation_ts:A[1],thread_fbid:Q,thread_id:S==null?"":S,timestamp:c("bs_caml_format").caml_float_of_string(u.updated_time_precise),top_emojis:u.top_emojis,unread_count:u.unread_count,rtc_call_data:U,associated_object:i(u),reactions_mute_mode:u.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:u.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:C[0],page_comm_item_id:C[2],comm_source_id:C[1],subtitle:C[3],comm_item_owners:C[4]}}g._getLightweightEvent=h;g._getAssociatedObject=i;g._getPageThreadInfo=j;g._getIsCanonicalUser=k;g._getNicknames=l;g._getCustomColor=m;g._getParticipantDaysActive=n;g._getParticipantMessageCounts=o;g._getParticipantReactedToCounts=p;g._getStreakRelatedData=q;g.indexZero=r;g.transformThread=s}),null);
__d("messengerGraphQLThreadFetcherRe",["Promise","bs_array","getByPath","bs_caml_array","bs_pervasives","WebGraphQL","messengerThreadTransformerRe","messengerMessageTransformerRe","MessengerThreadsWebGraphQLQuery","messengerReadReceiptTransformerRe"],(function a(b,c,d,e,f,g){"use strict";function h(l,m,n){var o=c("bs_array").map(function(p){var q=c("messengerMessageTransformerRe").unsafeCastBlobAttachments(p),r=p.extensible_attachment,s;if(r==null)s=null;else{var t=r.story_attachment;s={legacy_attachment_id:r.legacy_attachment_id,story_attachment:t==null?null:c("messengerMessageTransformerRe").unsafeCastExtensibleAttachment(t)}}return{snippet:p.snippet,message_sender:p.message_sender,timestamp_precise:p.timestamp_precise,commerce_message_type:p.commerce_message_type,extensible_attachment:s,blob_attachments:q,sticker:p.sticker}},m.last_message.nodes);return c("messengerThreadTransformerRe").transformThread(l,{thread_key:m.thread_key,name:m.name,all_participants:m.all_participants,last_message:{nodes:o},unread_count:m.unread_count,message_count:m.messages_count,image:m.image,updated_time_precise:m.updated_time_precise,mute_until:m.mute_until,is_pin_protected:m.is_pin_protected,is_viewer_subscribed:m.is_viewer_subscribed,thread_queue_enabled:m.thread_queue_enabled,folder:m.folder,has_viewer_archived:m.has_viewer_archived,cannot_reply_reason:m.cannot_reply_reason,ephemeral_ttl_mode:m.ephemeral_ttl_mode,customization_info:m.customization_info,thread_admins:m.thread_admins,approval_mode:m.approval_mode,joinable_mode:m.joinable_mode,thread_queue_metadata:m.thread_queue_metadata,event_reminders:m.event_reminders,montage_thread:m.montage_thread,last_read_receipt:m.last_read_receipt,related_page_thread:m.related_page_thread,rtc_call_data:m.rtc_call_data,associated_object:m.associated_object,reactions_mute_mode:m.reactions_mute_mode,mentions_mute_mode:m.mentions_mute_mode,privacy_mode:m.privacy_mode,customization_enabled:m.customization_enabled,thread_type:m.thread_type,participant_add_mode_as_string:m.participant_add_mode_as_string,top_emojis:m.top_emojis,participant_days_active:m.participant_days_active,participant_message_counts:m.participant_message_counts,participant_reacted_to_counts:m.participant_reacted_to_counts,participants_event_status:m.participants_event_status,thread_streak_data:m.thread_streak_data,page_comm_item:m.page_comm_item},n)}function i(l,m,n,o,p){if(l==null)if(o!==0)return{actions:null,thread:undefined,end_of_history:{type:"user",fbid:m},roger:null};else return{actions:null,thread:undefined,end_of_history:undefined,roger:null};else{var q=l.thread_key.other_user_id,r=l.thread_key.thread_fbid,s=l.thread_key.legacy_thread_id,t=q==null?r==null?s==null?c("bs_pervasives").failwith("No thread ID"):s:r:q;if(t!==m)c("bs_pervasives").failwith("Thread ID mismatch");var u=h(n,l,p),v=l.messages,w=v==null?null:c("bs_array").map(function(B){return c("messengerMessageTransformerRe").transformMessage(n,B,{thread_id:l.thread_key.legacy_thread_id,thread_fbid:l.thread_key.thread_fbid,other_user_fbid:l.thread_key.other_user_id,folder:u.folder},p)},v.nodes),x=l.read_receipts,y;if(x==null)y=null;else{var z={};z[m]=c("messengerReadReceiptTransformerRe").transformReadReceipt(n,x);y=z}var A=c("getByPath")(l,["messages","page_info"]);if(A==null)return{actions:w,thread:u,end_of_history:undefined,roger:y};else if(A.has_previous_page)return{actions:w,thread:u,end_of_history:undefined,roger:y};else return{actions:w,thread:u,end_of_history:{type:"thread",fbid:m},roger:y}}}function j(l){return new(c("MessengerThreadsWebGraphQLQuery"))({id:l.id,message_limit:l.limit,load_messages:+(l.limit>0),load_read_receipts:l.loadReadReceipts,before:l.timestamp})}function k(l,m,n){var o=c("bs_array").map(j,m);return c("Promise").all(c("WebGraphQL").execAll(o,{actorID:n?l:null})).then(function(p){return c("bs_array").mapi(function(q,r){var s=r.message_thread,t=c("bs_caml_array").caml_array_get(m,q);return i(s,t.id,l,t.isCanonical,n)},p)})}g.transformThread=h;g._transformPayload=i;g._getQuery=j;g.fetchAll=k}),null);
__d("DisplayGenderConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE"})}),null);
__d("MessengerThreadlistWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1646030448802398"};j.getQueryID=function(){"use strict";return"926789400801872"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("messengerGraphQLThreadlistFetcherRe",["Promise","URI","bs_array","bs_js_dict","bs_caml_array","WebGraphQL","bs_caml_format","GenderConst","WorkModeConfig","DisplayGenderConst","messengerGraphQLThreadFetcherRe","messengerReadReceiptTransformerRe","MessengerThreadlistWebGraphQLQuery"],(function a(b,c,d,e,f,g){"use strict";function h(l){return new(c("MessengerThreadlistWebGraphQLQuery"))({limit:l.limit,before:l.timestamp,tags:l.tags,includeDeliveryReceipts:l.includeDeliveryReceipts,includeSeqID:l.includeSeqID})}function i(l){var m=l.gender,n=l.url,o;if(n==null)o=null;else{var p=+c("WorkModeConfig").is_work_user,q=p!==0?c("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";o=new(c("URI"))(n).getUnqualifiedURI().setDomain(q).setProtocol("https").toString()}var r=l.image_src,s=l.big_image_src,t=l.__typename,u;switch(t){case"Page":u="page";break;case"User":u="user";break;default:u=null}var v=l.accepts_messenger_user_feedback,w=l.is_viewer_friend,x=l.is_messenger_user,y=l.is_verified,z=l.is_messenger_platform_bot,A=l.is_message_blocked_by_viewer;return{id:"fbid:"+l.id,fbid:l.id,gender:m==null?c("GenderConst").NOT_A_PERSON:m===c("DisplayGenderConst").MALE?c("GenderConst").MALE_SINGULAR:m===c("DisplayGenderConst").FEMALE?c("GenderConst").FEMALE_SINGULAR:c("GenderConst").NOT_A_PERSON,href:o,image_src:r==null?null:r.uri,big_image_src:s==null?null:s.uri,name:l.name,short_name:l.short_name,type:u,vanity:l.username,accepts_messenger_user_feedback:v==null?false:v,is_friend:w==null?false:w,is_messenger_user:x==null?false:x,is_business_enabled:l.__typename==="Page"?true:false,is_verified:y==null?false:y,is_messenger_platform_bot:z==null?false:z,is_messenger_blocked:A==null?false:A}}function j(l,m,n,o){var p=[],q=[],r={},s=[],t={},u=[undefined];c("bs_array").iteri(function(v,w){var x=c("bs_caml_array").caml_array_get(m,v),y=[],z=[],A=[];c("bs_array").iter(function(D){if(D==null)return 0;else{var E=c("messengerGraphQLThreadFetcherRe").transformThread(l,D,n);c("bs_array").iter(function(K){var L=i(K.messaging_actor);t[L.fbid]=L;return 0},D.all_participants.nodes);var F;if(E.is_canonical){var B=E.other_user_fbid;if(B==null)F=null;else{y.push(B);F=B}}else{var C=E.thread_fbid;if(C==null)F=null;else{z.push(C);F=C}}A.push(E.thread_id);p.push(E);var G=D.read_receipts;if(!(F==null))if(!(G==null))r[F]=c("messengerReadReceiptTransformerRe").transformReadReceipt(l,G);var H=D.delivery_receipts;if(F==null)return 0;else if(H==null)return 0;else{var I=H.nodes.sort(function(K,L){var M=c("bs_caml_format").caml_float_of_string(K.timestamp_precise),N=c("bs_caml_format").caml_float_of_string(L.timestamp_precise);if(M>N)return-1;else if(M===N)return 0;else return 1});if(I.length<1)return 0;else{var J=c("bs_caml_array").caml_array_get(I,0);if(E.is_canonical){s.push({other_user_fbid:F,thread_fbid:null,time:c("bs_caml_format").caml_float_of_string(J.timestamp_precise)});return 0}else{s.push({other_user_fbid:null,thread_fbid:F,time:c("bs_caml_format").caml_float_of_string(J.timestamp_precise)});return 0}}}}},w.viewer.message_threads.nodes);var B=w.viewer.message_threads.sync_sequence_id;if(!(B==null))u[0]=c("bs_caml_format").caml_int_of_string(B);var C=x.timestamp;q.push({start:x.offset,end:C==null?x.offset+x.limit|0:(x.offset+x.limit|0)-1|0,folder:x.folder,other_user_fbids:y,thread_fbids:z,thread_ids:A,filter:x.filter});return 0},o);return{threads:p,ordered_threadlists:q,roger:r,delivery_receipts:s,participants:c("bs_js_dict").values(t),sequence_id:u[0]}}function k(l,m,n){var o=c("bs_array").map(h,m);return c("Promise").all(c("WebGraphQL").execAll(o,{actorID:n?l:null})).then(function(p){return j(l,m,n,p)})}g._getQuery=h;g.transformParticipant=i;g.transform=j;g.fetchAll=k}),null);