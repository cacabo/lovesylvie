if (self.CavalryLogger) { CavalryLogger.start_js(["ywkJm"]); }

__d("MessengerMasterView.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","MercuryFilters","MercuryOrderedThreadlist","MercuryThreadlistConstants","MessagingTag","MessengerActions","MessengerRecentContainer.react","MessengerSearchContainer.react","MessengerSpinner.react","MessengerStateStore","MessengerView","React","messengerMasterViewHeaderReact"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("messengerMasterViewHeaderReact").jsComponent,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={aggregationView:false,resetAggregatedThreads:false,threadIDs:[]},this.$MessengerMasterView2=function(){var s=c("MercuryOrderedThreadlist").getForFBID(this.props.viewer),t=s.getAvailableThreadlistNow(c("MessagingTag").PENDING,c("MercuryFilters").ALL);this.setState({threadIDs:t,aggregationView:true})}.bind(this),this.$MessengerMasterView3=function(){this.setState({aggregationView:true,resetAggregatedThreads:false})}.bind(this),this.$MessengerMasterView4=function(){this.setState({aggregationView:false,resetAggregatedThreads:true},function(){c("MessengerActions").selectAggregation(null)})}.bind(this),this.$MessengerMasterView5=function(){this.setState({aggregationView:true,resetAggregatedThreads:false})}.bind(this),o}m.prototype.componentWillReceiveProps=function(n){var o=c("MessengerStateStore").getState().threadIDs;if(n.folder===c("MessagingTag").PENDING)this.$MessengerMasterView1();else if(o)this.setState({threadIDs:o,aggregationView:true})};m.prototype.$MessengerMasterView1=function(){var n=c("MercuryOrderedThreadlist").getForFBID(this.props.viewer),o=n.getAvailableThreadlistNow(c("MessagingTag").PENDING,c("MercuryFilters").ALL);if(o.length===0)n.getFilteredThreadlist(c("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,c("MessagingTag").PENDING,c("MercuryFilters").ALL,this.$MessengerMasterView2,true);else this.setState({threadIDs:o,aggregationView:true})};m.prototype.$MessengerMasterView6=function(){var n=this.props.detailView===c("MessengerView").DETAIL.COMPOSE;switch(this.props.view){case c("MessengerView").MASTER.PEOPLE:return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{activeThreadID:n?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:c("JSResource")("MessengerPeopleList.react").__setRef("MessengerMasterView.react"),placeholder:c("React").createElement("div",{className:"_2pif",style:{textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null))});case c("MessengerView").MASTER.PAYMENT:case c("MessengerView").MASTER.RECENT:return c("React").createElement(c("MessengerRecentContainer.react"),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,onAggregationClick:this.$MessengerMasterView3,onRenderBackArrow:this.$MessengerMasterView5,resetAggregatedThreads:this.state.resetAggregatedThreads,viewer:this.props.viewer});case c("MessengerView").MASTER.SEARCH:return c("React").createElement(c("MessengerSearchContainer.react"),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,viewer:this.props.viewer});default:throw new Error("Unknown master view: "+this.props.view)}};m.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(k,{aggregationView:this.state.aggregationView,filter:this.props.filter,folder:this.props.folder,onBackToRecent:this.$MessengerMasterView4,threadIDs:this.state.threadIDs,view:this.props.view,viewer:this.props.viewer}),this.$MessengerMasterView6())};m.propTypes={activeThreadID:l.string,detailView:l.string,filter:l.string,folder:l.string.isRequired,view:l.string.isRequired,viewer:l.string.isRequired};f.exports=m}),null);