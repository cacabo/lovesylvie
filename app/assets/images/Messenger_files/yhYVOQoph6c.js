if (self.CavalryLogger) { CavalryLogger.start_js(["K7CfP"]); }

__d("StickerContextualDialog.react",["cx","ContextualLayerAutoFlipHorizontal","ReactAbstractContextualDialog","ReactLayer"],(function a(b,c,d,e,f,g,h){"use strict";var i=7,j=c("ReactLayer").createClass(c("ReactAbstractContextualDialog").createSpec({addedBehaviors:[c("ContextualLayerAutoFlipHorizontal")],displayName:"StickerXUIContextualDialog",theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:i,length:16}}}));j.WIDTH={NORMAL:312,WIDE:400};f.exports=j}),null);
__d("StickersDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("StickersActions",["StickersDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_RECENT_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null}),i={Types:h,addRecentSticker:function j(k){c("StickersDispatcher").dispatch({type:h.ADD_RECENT_STICKER,sticker:k})},hideStickerFlyout:function j(){c("StickersDispatcher").dispatch({type:h.HIDE_FLYOUT})},loadRecentStickers:function j(k){c("StickersDispatcher").dispatch({type:h.LOAD_RECENT_STICKERS,stickers:k})},selectStorePack:function j(k){c("StickersDispatcher").dispatch({type:h.SELECT_STORE_PACK,packID:k})},selectTrayPack:function j(k){c("StickersDispatcher").dispatch({type:h.SELECT_TRAY_PACK,packID:k})},showStickerFlyout:function j(k){c("StickersDispatcher").dispatch({type:h.SHOW_FLYOUT,threadID:k})},trayLoaded:function j(){c("StickersDispatcher").dispatch({type:h.TRAY_LOADED})}};f.exports=i}),null);
__d("TypedFluxStore",["FluxStore"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("FluxStore")}),18);
__d("FluxReduceStore",["invariant","TypedFluxStore","abstractMethod"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k,l;i=babelHelpers.inherits(m,c("TypedFluxStore"));j=i&&i.prototype;function m(p){j.constructor.call(this,p);this.$FluxReduceStore1=this.getInitialState()}m.prototype.getState=function(){return this.$FluxReduceStore1};m.prototype.getInitialState=function(){return c("abstractMethod")("FluxReduceStore","getInitialState")};m.prototype.reduce=function(p,q){return c("abstractMethod")("FluxReduceStore","reduce")};m.prototype.areEqual=function(p,q){return p===q};m.prototype.__invokeOnDispatch=function(p){this.__changed=false;var q=this.$FluxReduceStore1,r=this.reduce(q,p);r!==undefined||h(0);if(!this.areEqual(q,r)){this.$FluxReduceStore1=r;this.__emitChange()}this.__inform()};var n=m;k=babelHelpers.inherits(o,m);l=k&&k.prototype;function o(){k.apply(this,arguments)}f.exports=n}),18);
__d("StickersStateStore",["FluxReduceStore","immutable","StickersActions","StickersConfig","StickersDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return c("immutable").Map({recentStickers:[],recentStickersLoaded:false,showFlyout:false,storePackID:null,threadID:null,trayLoaded:false,trayPackID:null})};j.prototype.reduce=function(k,l){var m=l,n=c("StickersActions").Types;switch(m.type){case n.ADD_RECENT_STICKER:var o=[m.sticker];k.get("recentStickers").forEach(function(p){if(p.id===m.sticker.id)return;o.push(p)});return k.set("recentStickers",o.splice(0,c("StickersConfig").max_mru_stickers));case n.HIDE_FLYOUT:return k.set("showFlyout",false);case n.LOAD_RECENT_STICKERS:return k.set("recentStickersLoaded",true).set("recentStickers",m.stickers);case n.SELECT_STORE_PACK:return k.set("storePackID",m.packID);case n.SELECT_TRAY_PACK:return k.set("trayPackID",m.packID).set("trayLoaded",true);case n.SHOW_FLYOUT:return k.set("showFlyout",true).set("threadID",m.threadID);case n.TRAY_LOADED:return k.set("trayLoaded",true);default:return k}};function j(){h.apply(this,arguments)}f.exports=new j(c("StickersDispatcher"))}),null);
__d("ChatStickerButton.react",["cx","fbt","BootloadedComponent.react","JSResource","Link.react","React","StickerContextualDialog.react","StickersActions","StickersStateStore","XUISpinner.react","emptyFunction","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k,l=c("React").PropTypes,m=278;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.$ChatStickerButton1=false;this.renderLayers=function(){if(!this.state.shown)return null;var p=this.props.ContextualDialogClass;return c("React").createElement(p,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link}.bind(this),onBeforeHide:this.$ChatStickerButton5,onBlur:this.$ChatStickerButton3,position:"above",shown:this.state.shown,width:this.props.flyoutWidth,key:"contextualDialog"},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("XUISpinner.react"),{size:"large"})),bootloadLoader:c("JSResource")("StickersFlyout.react").__setRef("ChatStickerButton.react"),className:this.props.flyoutClassName,onShown:function(q){if(this.props.onFlyoutShown)this.props.onFlyoutShown(q)}.bind(this),onHidden:function(){if(this.props.onFlyoutHidden)this.props.onFlyoutHidden()}.bind(this),onEscKeyDown:this.$ChatStickerButton3,onStickerSelect:this.$ChatStickerButton6,onEmoticonSelect:this.$ChatStickerButton7,shown:this.state.shown}))}.bind(this);this.$ChatStickerButton4=function(){this.$ChatStickerButton1=this.state.shown}.bind(this);this.showFlyout=function(p){p&&p.stopPropagation();if(this.$ChatStickerButton1||this.props.disabled){this.$ChatStickerButton1=false;return}c("StickersActions").showStickerFlyout(this.props.threadID)}.bind(this);this.$ChatStickerButton5=function(){if(this.state.shown)this.$ChatStickerButton3()}.bind(this);this.$ChatStickerButton3=function(){c("StickersActions").hideStickerFlyout()};this.$ChatStickerButton6=function(p){this.props.onStickerSelect(p)}.bind(this);this.$ChatStickerButton7=function(p){this.$ChatStickerButton3();this.props.onEmoticonSelect(p)}.bind(this);this.state={shown:!!o.clicked}}n.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad(this);this.$ChatStickerButton2=c("StickersStateStore").addListener(function(){var o=c("StickersStateStore").getState();if(o.get("showFlyout")&&o.get("threadID")===this.props.threadID){if(this.$ChatStickerButton1||this.props.disabled){this.$ChatStickerButton1=false;return}this.setState({shown:true})}else{var p=this.props.getInput&&this.props.getInput();p&&p.focus&&p.focus();this.setState({shown:false})}}.bind(this))};n.prototype.componentWillUnmount=function(){if(this.state.shown)this.$ChatStickerButton3();this.$ChatStickerButton2&&this.$ChatStickerButton2.remove()};n.prototype.render=function(){return c("React").createElement("span",null,c("React").createElement(c("Link.react"),{className:c("joinClasses")(this.props.className,this.state.shown?"open":""),href:"#",onClick:this.showFlyout,onMouseDown:this.$ChatStickerButton4,role:"button",title:i._("Choose a sticker"),ref:"link"}),this.renderLayers())};n.propTypes={className:l.string,clicked:l.bool,ContextualDialogClass:l.func.isRequired,disabled:l.bool,flyoutClassName:l.string,flyoutWidth:l.number,getInput:l.func,onLoad:l.func,onStickerSelect:l.func.isRequired,onEmoticonSelect:l.func.isRequired,onFlyoutShown:l.func,onFlyoutHidden:l.func,threadID:l.string};n.defaultProps={clicked:false,ContextualDialogClass:c("StickerContextualDialog.react"),disabled:false,flyoutWidth:m,onStickerSelect:c("emptyFunction"),onEmoticonSelect:c("emptyFunction")};f.exports=n}),null);
__d("FluxStoreGroup",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";function i(k,l,m){this.__dispatcher=j(k);var n=k.map(function(o){return o.getDispatchToken()});this.$FluxStoreGroup1=this.__dispatcher.register(function(o){this.__dispatcher.waitFor(n);l()}.bind(this),m,this);if(this.__dispatcher.explicitlyRegisterStore)this.__dispatcher.explicitlyRegisterStore(this)}i.prototype.release=function(){this.__dispatcher.unregister(this.$FluxStoreGroup1)};i.prototype.getDispatchToken=function(){return this.$FluxStoreGroup1};function j(k){k&&k.length||h(0);var l=k[0].getDispatcher();return l}f.exports=i}),null);
__d("FluxContainerSubscriptions",["FluxConfig","FluxStoreGroup"],(function a(b,c,d,e,f,g){"use strict";function h(j,k){if(j===k)return true;if(j.length!==k.length)return false;for(var l=0;l<j.length;l++)if(j[l]!==k[l])return false;return true}function i(j){this.$FluxContainerSubscriptions1=[];this.$FluxContainerSubscriptions5=j||this.constructor.name}i.prototype.setStores=function(j){var k,l=this;if(c("FluxConfig").ads_improve_perf_flux_container_subscriptions&&this.$FluxContainerSubscriptions4&&h(this.$FluxContainerSubscriptions4,j))return;this.$FluxContainerSubscriptions4=j;this.$FluxContainerSubscriptions6();this.$FluxContainerSubscriptions7();var m=false,n=[];(function(){var p=function p(){m=true};l.$FluxContainerSubscriptions3=j.map(function(q){return q.addListener(p)})})();var o=function(){if(m){this.$FluxContainerSubscriptions1.forEach(function(p){return p()});m=false}}.bind(this);this.$FluxContainerSubscriptions2=new(c("FluxStoreGroup"))(j,o,this.$FluxContainerSubscriptions5)};i.prototype.addListener=function(j){this.$FluxContainerSubscriptions1.push(j)};i.prototype.reset=function(){this.$FluxContainerSubscriptions6();this.$FluxContainerSubscriptions7();this.$FluxContainerSubscriptions8();this.$FluxContainerSubscriptions9()};i.prototype.$FluxContainerSubscriptions6=function(){if(this.$FluxContainerSubscriptions3){this.$FluxContainerSubscriptions3.forEach(function(j){return j.remove()});this.$FluxContainerSubscriptions3=null}};i.prototype.$FluxContainerSubscriptions7=function(){if(this.$FluxContainerSubscriptions2){this.$FluxContainerSubscriptions2.release();this.$FluxContainerSubscriptions2=null}};i.prototype.$FluxContainerSubscriptions9=function(){this.$FluxContainerSubscriptions4=null};i.prototype.$FluxContainerSubscriptions8=function(){this.$FluxContainerSubscriptions1=[]};f.exports=i}),18);
__d("FluxContainer",["FluxContainerSubscriptions","React","shallowEqual"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").Component,i=c("React").PureComponent,j={pure:true,pureProps:false,withProps:false,withContext:false};function k(n,o){var p,q,r=babelHelpers["extends"]({},j,o||{}),s=function s(w,x,y){var z=r.withProps?x:undefined,A=r.withContext?y:undefined;return n.calculateState(w,z,A)},t=function t(w,x){var y=r.withProps?w:undefined,z=r.withContext?x:undefined;return n.getStores(y,z)};p=babelHelpers.inherits(u,n);q=p&&p.prototype;function u(w,x){"use strict";q.constructor.call(this,w,x);this.$ContainerClass1=new(c("FluxContainerSubscriptions"))(n.displayName||n.name);this.$ContainerClass1.setStores(t(w,x));this.$ContainerClass1.addListener(function(){this.setState(function(z,A){return s(z,A,x)})}.bind(this));var y=s(undefined,w,x);this.state=babelHelpers["extends"]({},this.state||{},y)}u.prototype.componentWillReceiveProps=function(w,x){"use strict";if(q.componentWillReceiveProps)q.componentWillReceiveProps.call(this,w,x);var y=!r.withProps||r.pureProps&&c("shallowEqual")(w,this.props),z=!r.withContext||r.pureProps&&c("shallowEqual")(x,this.context);if(z&&y)return;this.$ContainerClass1.setStores(t(w,x));this.setState(function(A){return s(A,w,x)})};u.prototype.componentWillUnmount=function(){"use strict";if(q.componentWillUnmount)q.componentWillUnmount.call(this);this.$ContainerClass1.reset()};var v=r.pure&&!(n.prototype instanceof i)?l(u):u;return v}function l(n){var o,p;o=babelHelpers.inherits(i,n);p=o&&o.prototype;i.prototype.shouldComponentUpdate=function(q,r){"use strict";return!c("shallowEqual")(this.props,q)||!c("shallowEqual")(this.state,r)};function i(){"use strict";o.apply(this,arguments)}return i}function m(n,o,p,q){var r,s;r=babelHelpers.inherits(t,h);s=r&&r.prototype;t.getStores=function(v,w){"use strict";return o(v,w)};t.calculateState=function(v,w,x){"use strict";return p(v,w,x)};t.prototype.render=function(){"use strict";return n(this.state)};function t(){"use strict";r.apply(this,arguments)}var u=n.displayName||n.name||"FunctionalContainer";t.displayName=u;return k(t,q)}f.exports={create:k,createFunctional:m}}),18);