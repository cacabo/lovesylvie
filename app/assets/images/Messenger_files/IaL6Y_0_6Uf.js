if (self.CavalryLogger) { CavalryLogger.start_js(["Ffu8T"]); }

__d("MessengerThreadlistRowContainer.react",["IgnoreMessagesTypedLogger","ImmutableObject","MercuryConfig","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryMessages","MercuryParticipants","mercuryRogerRe","MercuryThreadActions","MercuryThreadInfo","MercuryThreadlistRowContainer.react","MercuryTriodeSourceUtil","MessagingSourceEnum","MessengerActions","messengerDialogsRe","messengerConfirmLeaveGroupDialogReact","messengerConfirmBlockThreadDialogReact","messengerBlockDialogReact","MessageRequestUtils","MessengerAdminGroupUtils","MessengerMessageRequestsTypedLogger","MessengerThreadlistRow.react","MessagingTag","MNPlatformTagsDataManager","ReactComponentWithPureRenderMixin","React","ReactDOM","StoreAndPropBasedStateMixin","CurrentUser"],(function a(b,c,d,e,f,g){"use strict";var h=c("mercuryRogerRe").get(),i=c("messengerConfirmLeaveGroupDialogReact").jsComponent,j=c("messengerConfirmBlockThreadDialogReact").jsComponent,k=c("messengerBlockDialogReact").jsComponent,l=c("React").PropTypes,m=c("React").createClass({displayName:"MessengerThreadlistRowContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryMessages"),h)],propTypes:{isActive:l.bool.isRequired,isTabbable:l.bool,folder:l.string,onOverrideSelect:l.func,showAggregation:l.bool,showActions:l.bool,thread:l.instanceOf(c("ImmutableObject")).isRequired,viewer:l.string.isRequired},statics:{calculateState:function n(o){var p=c("MercuryMessages").getForFBID(o.viewer),q=o.thread.thread_id,r=p.getThreadMessagesRangeNow(q,0,1)[0];return{lastMessage:r||null,readReceipts:h.getSeenTimestamps(q)}}},componentDidUpdate:function n(o){if(this.props.isActive&&!o.isActive)this.props.onScrollIntoView(c("ReactDOM").findDOMNode(this))},render:function n(){return c("React").createElement(c("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:c("MessengerThreadlistRow.react"),isMuted:c("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSetting,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchive:function n(){if(c("MercuryConfig").WMBF)this._handleBlockFromDecline();else{var o=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);o&&c("MessengerActions").selectThread(null)}},_handleDelete:function n(){var o=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);o&&c("MessengerActions").selectThread(null)},_handleMarkRead:function n(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function n(){var o=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);o&&c("MessengerActions").selectThread(null)},_handleMarkUnread:function n(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function n(o){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,o)},_handleSelect:function n(){var o=c("CurrentUser").getID(),p=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,o);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}c("MessengerActions").selectThread(this.props.thread.thread_id);var q=c("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),r=void 0;switch(this.props.folder){case"inbox":r="inbox";break;case"pending":r="pending";break;case"other":r="other";break}new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(q).setSurface(r).setFolderType(this.props.thread.folder).setThreadKey(p).log();c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c("MessagingSourceEnum").MESSENGER_WEB_SEARCH,q)},_handleUnmute:function n(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function n(){var o,p=this;if(this.props.viewer)(function(){var q=c("MessengerAdminGroupUtils").isViewerAdmin(p.props.thread.admin_ids,p.props.viewer);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(i,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:q,thread:this.props.thread})}.bind(p))})()},_handleIgnore:function n(){var o=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");o&&c("MessengerActions").selectThread(null);new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSetting:function n(){if(c("MercuryConfig").WMBF){var o=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(this.props.thread.other_user_fbid)),p=o&&o.short_name||"";this._handleConfirmBlock(p)}else this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id)},_handleBlockFromDecline:function n(){var o,p=this,q=c("MercuryIDs").isGroupChat(this.props.thread.thread_id);if(q)this._handleIgnore();else(function(){var r=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(p.props.thread.other_user_fbid)),s=r&&r.short_name||"";c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{onBlock:function(){this._handleConfirmBlock(s)}.bind(this),contact:r,onToggle:this._handleBlockDialogToggle})}.bind(p))})()},_handleBlockDialogToggle:function n(){c("messengerDialogsRe").removeDialog()},_handleConfirmBlock:function n(o){var p=this.props.thread.thread_id;if(p)this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,p,function(){this._handleAfterBlock(o)}.bind(this))},_handleAfterBlock:function n(o){var p=this.props.thread;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(j,{participantName:o})});var q=c("MercuryIDs").getThreadKeyfromThreadIDUserID(p.thread_id,c("CurrentUser").getID()),r=!!p&&c("MessageRequestUtils").isFiltered(p);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(p.thread_id)).setSurface("thread").setFolderType(r?c("MessagingTag").OTHER:c("MessagingTag").PENDING).setThreadKey(q).setEntryPoint(null).log()},_handleUnblock:function n(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function n(){if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var o=this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,c("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(o)}},_getThreadActions:function n(){return c("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function n(){return c("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function n(){return c("MercuryMessageObject").getForFBID(this.props.viewer)}});f.exports=m}),null);