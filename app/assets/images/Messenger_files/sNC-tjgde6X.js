if (self.CavalryLogger) { CavalryLogger.start_js(["05kIN"]); }

__d("ChatSpeakingSticker.react",["React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ChatSpeakingSticker1=function(){var q=c("ReactDOM").findDOMNode(this.refs.stickerVideo);q.play()}.bind(this),m}k.prototype.render=function(){return c("React").createElement("div",{onClick:this.$ChatSpeakingSticker1,role:"presentation"},c("React").createElement("video",{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},c("React").createElement("source",{src:this.props.videoURI})))};k.propTypes={videoURI:j.string.isRequired,videoSize:j.shape({height:j.number,width:j.number}).isRequired};f.exports=k}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","emptyFunction","ge"],(function a(b,c,d,e,f,g){var h={renderSpotlight:function j(k,l,m,n){var o=k.setID;if(!o)o=c("MessagesViewerSetID").MESSAGES;i(c("React").createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c("PhotoStore").hasBeenCreated(o)&&k.endpoint){var p=new(c("AsyncRequest"))(k.endpoint);if(l)p.setRelativeTo(l);p.send()}},renderVideo:function j(k){i(k)}};function i(j){var k=c("ge")("messages_viewer");if(!k){k=c("DOM").create("div",{id:"messages_viewer"});document.body.appendChild(k)}c("ReactDOM").render(j,k,function(){this.subscribeOnce("close",function(){c("ReactDOM").unmountComponentAtNode(k)})})}f.exports=h}),null);
__d("MessengerAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";var h={renderVideo:function i(j){c("Bootloader").loadModules(["MessagingVideoViewer.react","messengerForwardAttachmentDialogReact"],function(k,l){var m=l.jsComponent;c("MessagesViewer").renderVideo(c("React").createElement(k,babelHelpers["extends"]({},j,{forwardDialogComponent:m})))},"MessengerAttachmentViewer")},bootstrapWithConfig:function i(j,k){c("Bootloader").loadModules(["SpotlightMessagesViewer","messengerForwardAttachmentDialogReact"],function(l,m){var n=m.jsComponent;c("MessagesViewer").renderSpotlight(j,k,l,n)},"MessengerAttachmentViewer")},preload:function i(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","messengerForwardAttachmentDialogReact"],c("emptyFunction"),"MessengerAttachmentViewer")})}};f.exports=h}),null);
__d("chatSpeakingStickerReact",["ReasonReact","ChatSpeakingSticker.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("ChatSpeakingSticker.react"),{videoURI:i,videoSize:j},k)}g.make=h}),null);
__d("fBIDRe",["bs_string"],(function a(b,c,d,e,f,g){"use strict";var h=c("bs_string").compare;g.compare=h}),null);
__d("mercuryAttachmentPayloadRe",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=j?j[0]:null;return{app_attribution:null,attach_type:i,deduplication_key:null,description:null,icon_type:null,key:l,large_preview_height:null,large_preview_width:null,large_preview_url:null,media:null,metadata:null,name:null,preview_height:null,preview_uploading:null,preview_url:null,preview_width:null,rel:null,share:null,source:null,target:null,thumbnail_url:null,upload_id:null,uri:null,url:k,video_title:null}}g.create=h}),null);
__d("randomShuffle",["randomInt"],(function a(b,c,d,e,f,g){function h(i){for(var j=i.length-1;j>0;j--){var k=c("randomInt").call(this,j+1);if(k!=j){var l=i[k];i[k]=i[j];i[j]=l}}return i}f.exports=h}),null);
__d("MessagingFlowerCornerArrangements",["invariant","ix","Random","randomShuffle"],(function a(b,c,d,e,f,g,h,i){"use strict";var j={TOP_LEFT:"topLeft",BOTTOM_RIGHT:"bottomRight"},k={PINK:"pink",PURPLE:"purple",YELLOW:"yellow"},l={ROUND:"round",POINTY:"pointy"},m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c("Random").random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c("Random").random()>=.5?l.ROUND:l.POINTY];c("randomShuffle")(t);c("randomShuffle")(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]))}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999")}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000")}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r)};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop()};n.prototype.flower=function(r){var s=c("Random").random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y})};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y})};n.prototype.$ElementProducer9=function(r,s){var t=s.pivot*100+"%",u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,A=void 0,B=void 0,C=void 0;if(this.$ElementProducer2){var D=u;u=v;v=D;y=-y}if(this.$ElementProducer1===j.BOTTOM_RIGHT){C=this.$ElementProducer4+u+"px";A=this.$ElementProducer4+v+"px";w=100+w;y+=180}else if(this.$ElementProducer1===j.TOP_LEFT){B=this.$ElementProducer4+u+"px";z=this.$ElementProducer4+v+"px"}else h(0);var E=[];if(w!==0)E.push("translate("+w+"%, "+w+"%)");E.push("scale("+x+")");if(y!==0)E.push("rotate("+y+"deg)");return{style:{bottom:A,left:B,position:"absolute",right:C,top:z,transform:E.join(" "),transformOrigin:t+" "+t},image:r}};function o(r){return[r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})]}function p(r){return[r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})]}function q(r,s){var t=new n(r,s);return c("Random").random()<.5?o(t):p(t)}f.exports={createFlowers:q,corners:j}}),null);
__d("MessagingFlowerBorder.react",["Image.react","MessagingFlowerCornerArrangements","React"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.TOP_LEFT,this.props.offset).concat(c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.BOTTOM_RIGHT,this.props.offset))}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m}k.prototype.render=function(){return c("React").createElement("div",null,this.state.elements.map(function(l,m){return c("React").createElement(c("Image.react"),{key:m,style:l.style,src:l.image})}))};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k}),null);
__d("messagingFlowerBorderReact",["ReasonReact","MessagingFlowerBorder.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MessagingFlowerBorder.react"),{offset:i},j)}g.make=h}),null);
__d("MessagingGiftWrap.react",["cx","MessengerEnvironment","React","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap()}.bind(this),n}l.prototype.render=function(){var m=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:"_4p0m"+(this.state.unwrapped?" _4p0o":"")+(m?" _mxz":"")+(m?" _4br2":"")+(!m?" _3_om":"")+(this.props.isSticker?" _52vq":""),onClick:this.$MessagingGiftWrap1,role:"presentation"},c("React").createElement("div",{className:"_4p0r"}),c("React").createElement("div",{className:"_4p0s _4p0t"}),c("React").createElement("div",{className:"_4p0s _4p0u"}))};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c("emptyFunction")};f.exports=l}),null);
__d("messagingGiftWrapReact",["utilsRe","ReasonReact","bs_js_null_undefined","MessagingGiftWrap.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessagingGiftWrap.react"),{isSticker:c("utilsRe").optionBoolToNullUndefinedBoolean(i),onUnwrap:c("bs_js_null_undefined").from_opt(j)},k)}g.make=h}),null);
__d("messengerPhotoReact",["cx","fbt","bs_curry","React","utilsRe","linkReact","cssURL","imageReact","bs_js_boolean","bs_pervasives","ReasonReact","joinClasses","bs_js_primitive","MercuryAttachmentType","messengerSpinnerReact","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g,h,i){"use strict";function j(u,v){var w=u.metadata;if(w==null)return null;else if(u.attach_type===c("MercuryAttachmentType").VIDEO){var x=v&&c("utilsRe").isDefined(w.large_preview);if(x!==0)return w.large_preview;else return w.inbox_preview}else if(v!==0)return u.large_preview_url;else return u.preview_url}function k(u){if(u==null)return[null,null];else return[u.width,u.height]}function l(u){var v=+(window.screen.width>1800);if(c("utilsRe").isTruthy(u.preview_uploading)){var w=function w(K,L){var x=c("utilsRe").isDefined(K);if(x!==0)return K;else return L},x=v&&c("utilsRe").isDefined(u.large_preview_url);if(x!==0)return[[w(u.large_preview_width,480),w(u.large_preview_height,480),u.large_preview_url,v]];else return[[w(u.preview_width,280),w(u.preview_height,280),u.preview_url,v]]}else{var y=j(u,v),z=c("utilsRe").isDefined(y),A=u.metadata,B=0;if(z!==0)if(A==null)B=1;else{var C=v&&c("utilsRe").isDefined(A.large_size),D=C!==0?A.large_size:A.inbox_size,E=k(D);return[[E[0],E[1],y,v]]}else B=1;if(B===1)if(c("utilsRe").isDefined(u.preview_url)){var F=v&&c("utilsRe").isDefined(u.large_preview_url);if(F!==0)return[[u.large_preview_width,u.large_preview_height,u.large_preview_url,v]];else return[[u.preview_width,u.preview_height,u.preview_url,v]]}else{var G=u.media;if(G==null)return 0;else{var H=c("utilsRe").isDefined(G.playable)&&c("utilsRe").isDefined(G.animated_image);if(H!==0){var I=k(G.animated_image_size);return[[I[0],I[1],G.animated_image,v]]}else{var J=k(G.image_size);return[[J[0],J[1],G.image,v]]}}}}}function m(u){var v=function v(C){return[""+(String(C)+"")]};if(c("utilsRe").isTruthy(u.preview_uploading)){var w=c("utilsRe").isDefined(u.preview_url);return v(w!==0?0:280)}else{var x=function x(C){var D=C[1],E=C[0];if(!(E==null)&&!(D==null))return[[E,D]];else return 0},y=function y(C){if(C){var D=C[0];return x([D[0],D[1]])}else return 0},z=c("utilsRe").isDefined(u.media),A=z!==0?y(l(u)):x([u.preview_width,u.preview_height]);if(A){var B=A[0];return v(c("bs_pervasives").min(B[1]*c("bs_pervasives").min(1,450/B[0]),450))}else return 0}}function n(u,v,w,x,y){c("utilsRe").isTruthy(x.preview_uploading);var z=u[2];if(z==null)return null;else if(y){var A=u[3],B=A!==0?window.screen.height*.7:window.screen.height*.65,C={maxHeight:""+(String(B)+""),maxWidth:"100%",width:"100%"};return c("ReasonReact").element(0,0,c("imageReact").make([c("joinClasses")(w,c("bs_js_boolean").to_js_boolean(1-v)?"_5pf5":"")],[""],[z],0,0,0,[C],[]))}else return null}var o=c("ReasonReact").statelessComponent("MessengerPhoto");function p(u,v,w,x,y,z){var A=u?u[0]:"",B=o.slice();B[4]=function(){if(x)c("bs_curry")._1(x[0],0);return 0};B[9]=function(){var C=l(v);if(C){var D=C[0],E=+(v.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE),F=c("utilsRe").isDefined(v.app_attribution),G=n(D,w&&E,c("joinClasses")(c("bs_js_boolean").to_js_boolean(F)?"_mxz":"",c("bs_js_boolean").to_js_boolean(w&&1-F)?"_52mr":""),v,w),H=1-E||1-w,I;if(H!==0){var J=D[2],K=J==null?0:[c("cssURL")(J)],L=w!==0?m(v):0;I=[K,L]}else I=[0,0];var M={},N=I[0];if(N)M.backgroundImage=N[0];var O=I[1];if(O)M.minHeight=O[0];var P=M,Q=c("utilsRe").isTruthy(v.preview_uploading),R=Q!==0?c("ReasonReact").element(0,0,c("messengerSpinnerReact").make(0,0,0,[])):null,S=E!==0?[c("MercuryAttachmentType").ANIMATED_IMAGE]:0,T=function T(U){U.preventDefault();if(y)return c("bs_curry")._1(y[0],v);else return 0};return c("React").cloneElement(c("React").createElement("div",{className:c("joinClasses")(A,"_4tsk",c("bs_js_boolean").to_js_boolean(F)?"_mxz":"",c("bs_js_boolean").to_js_boolean(w&&1-F)?"_52mr":"",c("bs_js_boolean").to_js_boolean(c("utilsRe").isTruthy(v.preview_uploading)&&1-c("utilsRe").isDefined(D[2]))?"_3etv":""),role:"presentation",style:P,onClick:T}),{"data-testid":S},G,R,c("ReasonReact").element(0,0,c("linkReact").make([i._("Open Photo")],["_4tsl"],0,0,0,c("bs_js_primitive").null_undefined_to_opt(D[2]),0,0,0,0,0,0,0,0,z)))}else return null};return B}var q=280,r=480,s=1800,t=450;g.preview_thumbnail_size=q;g.preview_large_size=r;g.large_window_width=s;g.max_photo_width=t;g.getSrcFromAttachment=j;g.sizeToWidthHeight=k;g.extractPreviewMetadata=l;g.getMinHeightForAttachment=m;g.getImageFromMetadata=n;g.component=o;g.make=p}),null);
__d("MessengerSharedMediaReducer",["JSReliabilityFixesGatingConfig","MessengerSharedMediaActions","MessengerThreadSharedMediaHelper","Set","idx"],(function a(b,c,d,e,f,g){"use strict";var h=c("MessengerSharedMediaActions").Types;function i(s,t){switch(t.type){case h.LOAD_CURRENT:var u=s.get("sharedMedia").get(t.threadFBID);if(u){var v=u.edges.find(function(y){return y.node.legacy_attachment_id===t.photoID});if(v)return s}var w=s.get("isLoading").get(t.threadFBID);if(!!w&&w.curr)return s;var x=q(s,t.threadFBID,"curr",true);c("MessengerThreadSharedMediaHelper").search(t.threadFBID,t.photoID,function(y){return c("MessengerSharedMediaActions").currentLoaded(y)});return x}return s}function j(s,t){switch(t.type){case h.LOAD_MORE_PREVIOUS:var u=s.get("isLoading").get(t.threadFBID);if(!!u&&u.prev)return s;var v=q(s,t.threadFBID,"prev",true);if(v===null)return s;c("MessengerThreadSharedMediaHelper").loadMorePrevious(t.threadFBID,t.afterCursor,t.first,function(w){return c("MessengerSharedMediaActions").previousLoaded(w)});return v}return s}function k(s,t){switch(t.type){case h.LOAD_MORE_LATEST:var u=s.get("isLoading").get(t.threadFBID);if(!!u&&u.latest)return s;var v=q(s,t.threadFBID,"latest",true);if(v===null)return s;c("MessengerThreadSharedMediaHelper").loadMoreLatest(t.threadFBID,t.beforeCursor,t.last,function(w){return c("MessengerSharedMediaActions").latestLoaded(w)});return v}return s}function l(s,t){var u,v;switch(t.type){case h.CURRENT_LOADED:var w=t.data,x=Object.keys(w)[0],y=c("JSReliabilityFixesGatingConfig").should_get_fix,z=y?(u=w[x])!=null?u.message_shared_media:u:w[x].message_shared_media,A=y?(v=z)!=null?(v=v.edges)!=null?v.length:v:v:z.edges.length,B=q(s,x,"curr",false);if(A!==0){var C=p(s.get("sharedMedia").get(x),z,0),D=s.get("sharedMedia").set(x,C);B=B.set("sharedMedia",D);var E=z.edges[0];c("MessengerThreadSharedMediaHelper").loadMorePrevious(x,E.cursor,10,function(F){return c("MessengerSharedMediaActions").previousLoaded(F)});c("MessengerThreadSharedMediaHelper").loadMoreLatest(x,E.cursor,10,function(F){return c("MessengerSharedMediaActions").latestLoaded(F)})}return B}return s}function m(s,t){switch(t.type){case h.PREVIOUS_LOADED:var u=t.data,v=Object.keys(u)[0],w=u[v].message_shared_media,x=q(s,v,"prev",false),y=p(s.get("sharedMedia").get(v),w,1),z=s.get("sharedMedia").set(v,y);x=x.set("sharedMedia",z);return x}return s}function n(s,t){switch(t.type){case h.LATEST_LOADED:var u=t.data,v=Object.keys(u)[0],w=u[v].message_shared_media,x=q(s,v,"latest",false),y=p(s.get("sharedMedia").get(v),w,-1),z=s.get("sharedMedia").set(v,y);x=x.set("sharedMedia",z);return x}return s}function o(s,t){switch(t.type){case h.DELETE_PHOTOS:var u=t.threadFBID,v=t.photoFBIDs,w=s.get("sharedMedia").get(u),x=new(c("Set"))(v.map(function(A){return A.toString()}));w.edges=w.edges.filter(function(A){return!x.has(A.node.legacy_attachment_id)});var y=s.get("sharedMedia").set(u,w),z=s.set("sharedMedia",y);return z}return s}function p(s,t,u){var v={};v.count=t.count;if(u===1&&s){var w=s.edges;v.has_previous_page=s.has_previous_page;v.has_next_page=t.page_info.has_next_page;if(t.edges.length>0)v.edges=w.concat(t.edges);else v.edges=w}else if(u===-1&&s){var x=s.edges;v.has_previous_page=t.page_info.has_previous_page;v.has_next_page=s.has_next_page;if(t.edges.length>0)v.edges=t.edges.concat(x);else v.edges=x}else{v.has_previous_page=t.page_info.has_previous_page;v.has_next_page=t.page_info.has_next_page;if(t.edges.length>0)v.edges=t.edges}return v}function q(s,t,u,v){var w=s.get("isLoading").get(t);if(w===undefined){w={};w[u]=v}else w[u]=v;var x=s.set("isLoading",s.get("isLoading").set(t,w));return x}var r={currentLoaded:l,deletePhotos:o,latestLoaded:n,loadCurrent:i,loadMoreLatest:k,loadMorePrevious:j,previousLoaded:m};f.exports=r}),null);
__d("MessengerSharedMediaState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={sharedMedia:c("immutable").Map({}),isLoading:c("immutable").Map({})};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("MessengerSharedMediaStore",["MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState","FluxReduceStore"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=Object.keys(c("MessengerSharedMediaReducer"));h=babelHelpers.inherits(k,c("FluxReduceStore"));i=h&&h.prototype;k.prototype.getInitialState=function(){return new(c("MessengerSharedMediaState"))()};k.prototype.reduce=function(l,m){if(m.namespace!==c("MessengerSharedMediaActions").Namespace)return l;j.forEach(function(n){l=c("MessengerSharedMediaReducer")[n](l,m)});return l};function k(){h.apply(this,arguments)}f.exports=new k(c("MessengerFluxReduceDispatcher"))}),null);
__d("messengerSharedPhotosAlbumViewPhotoReact",["bs_curry","React","cssURL","ReasonReact"],(function a(b,c,d,e,f,g){"use strict";var h=c("ReasonReact").statelessComponent("MessengerSharedPhotosAlbumViewPhotoReact");function i(j,k,l,m,n){var o=h.slice();o[9]=function(){return c("React").createElement("a",{className:j,style:{backgroundImage:c("cssURL")(m)},href:"#",onClick:function p(){return c("bs_curry")._1(l,k)}})};return o}g.component=h;g.make=i}),null);
__d("messengerSharedPhotosAlbumViewVScrollReact",["cx","bs_array","bs_curry","React","ReactDOM","Animation","bs_caml_array","ReasonReact","bs_caml_builtin_exceptions","MessengerSharedMediaActions","messengerSharedPhotosAlbumViewPhotoReact"],(function a(b,c,d,e,f,g,h){"use strict";function i(C){var D=C[1],E=D.length;if(E<48){c("MessengerSharedMediaActions").loadMorePrevious(C[0],c("bs_caml_array").caml_array_get(D,D.length-1|0).cursor,48);return 0}else return 0}function j(C){if(C){var D=C[0];return+((D.scrollTop+D.clientHeight|0)>=(D.scrollHeight-20|0))}else throw c("bs_caml_builtin_exceptions").not_found}function k(C){if(C)return+(C[0].scrollTop<=20);else throw c("bs_caml_builtin_exceptions").not_found}function l(C){if(C)return C[0].clientHeight;else throw c("bs_caml_builtin_exceptions").not_found}function m(C,D){if(C){new(c("Animation"))(C[0]).to("scrollTop",D).duration(200).go();return 0}else return 0}function n(C){var D=C[2][0];if(D)return m(C[1][0],c("ReactDOM").findDOMNode(D[0]).offsetTop-70|0);else return 0}function o(C,D){var E=D[5],F=E[3],G=E[1],H=E[0],I=D[4],J=G.length;if(j(I[1][0]))if(J<E[2]&&!F.prev){c("MessengerSharedMediaActions").loadMorePrevious(H,c("bs_caml_array").caml_array_get(G,G.length-1|0).cursor,48);return 0}else return 0;else if(k(I[1][0])&&!F.latest){c("MessengerSharedMediaActions").loadMoreLatest(H,c("bs_caml_array").caml_array_get(G,0).cursor,48);return 0}else return 0}function p(C){var D=C[4],E=C[0];i(C[5]);var F=D[1][0],G;if(F){var H=c("bs_curry")._1(E,o);F[0].addEventListener("scroll",H);G=[H]}else G=0;var I=function I(J,K){if(l(D[3][0])>0){n(D);var F=D[0][0];if(F){clearInterval(F[0]);D[0][0]=0;return 0}else return 0}else return 0};D[0][0]=[setInterval(c("bs_curry")._1(E,I),200)];D[4][0]=G;return 0}function q(C){var D=C[4],E=D[1][0],F=D[4][0];if(E)if(F)E[0].removeEventListener("scroll",F[0]);var G=D[0][0];if(G){clearInterval(G[0]);return 0}else return 0}var r=c("ReasonReact").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function s(C,D){D[4][1][0]=C==null?0:[C];return 0}function t(C,D){D[4][3][0]=C==null?0:[C];return 0}function u(C,D){D[4][2][0]=C==null?0:[C];return 0}function v(C,D,E,F,G,H,I){var J=function J(K){return c("bs_array").map(function(L){var M=L.node,N=+(M.legacy_attachment_id===H);return c("ReasonReact").element([M.legacy_attachment_id],N!==0?[c("bs_curry")._1(K[0],u)]:0,c("messengerSharedPhotosAlbumViewPhotoReact").make("_3bly",M.legacy_attachment_id,D,M.image1.uri,[]))},E)};return[r[0],r[1],r[2],r[3],p,r[5],q,r[7],r[8],function(K){return c("React").createElement("div",{ref:c("bs_curry")._1(K[0],s),className:"_3xo8",onScroll:c("bs_curry")._1(K[0],o)},c("React").createElement("div",{ref:c("bs_curry")._1(K[0],t),className:"_3xoa"},J(K)))},function(){return[[0],[0],[0],[0],[0]]},[F,E,G,C],function(I,K){return 0},r[13]]}var w=c("ReasonReact").wrapReasonForJs(r,function(C){return v(C.isLoading,C.onClick,C.sharedPhotos,C.threadID,C.totalCount,C.viewedPhoto,[])}),x=200,y=48,z=6,A=20,B=70;g.animationDuration=x;g.imagesToLoad=y;g.photosPerRow=z;g.scrollToEdgeTolerance=A;g.headerHeight=B;g.graduallyLoadPhotos=i;g.isScrolledToBottom=j;g.isScrolledToTop=k;g.getScrollHeight=l;g.scrollTo=m;g.autoScrollWhenLoaded=n;g.handleScroll=o;g.didMount=p;g.willUnmount=q;g.component=r;g.setRefChildContainer=s;g.setRefScrollable=t;g.setRefChild=u;g.make=v;g.jsComponent=w}),null);
__d("MessengerSharedPhotosAlbumView.react",["cx","fbt","messengerSharedPhotosAlbumViewVScrollReact","MessengerPhotoViewCloseLink.react","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k,l=c("messengerSharedPhotosAlbumViewVScrollReact").jsComponent,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerSharedPhotosAlbumView2=function(){this.props.onClick(this.props.viewedPhoto)}.bind(this),this.$MessengerSharedPhotosAlbumView1=function(){return c("React").createElement("div",{className:"_3bm0 _5l-3",ref:"header"},c("React").createElement(c("ShimButton.react"),{className:"_3bm2",onClick:this.$MessengerSharedPhotosAlbumView2},c("React").createElement("div",{className:"_3bm3"}),i._("Back to photo")),c("React").createElement("div",{className:"_3bm4"},i._("Shared Photos")),c("React").createElement(c("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onCloseSharedPhotos}))}.bind(this),p}n.prototype.render=function(){return c("React").createElement("div",{className:"_3bl- _5l-3",ref:"window"},this.$MessengerSharedPhotosAlbumView1(),c("React").createElement(l,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}))};n.propTypes={onClick:m.func.isRequired,onCloseSharedPhotos:m.func.isRequired,sharedPhotos:m.arrayOf(m.object).isRequired,totalCount:m.number.isRequired,viewedPhoto:m.string.isRequired,threadID:m.string.isRequired,isLoading:m.object.isRequired};f.exports=n}),null);
__d("MessengerSharedPhotosAlbumViewContainer.react",["FluxContainer","MessengerSharedMediaStore","React","MessengerSharedPhotosAlbumView.react"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={edges:[],count:0,isLoading:{}},m}k.getStores=function(){return[c("MessengerSharedMediaStore")]};k.calculateState=function(l,m){var n=c("MessengerSharedMediaStore").getState(),o=n.sharedMedia;return{edges:o.get(m.threadID).edges,count:o.get(m.threadID).count,isLoading:n.isLoading.get(m.threadID)}};k.prototype.render=function(){if(this.state.edges.length===0)return null;return c("React").createElement(c("MessengerSharedPhotosAlbumView.react"),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading})};k.propTypes={onClick:j.func.isRequired,onCloseSharedPhotos:j.func.isRequired,viewedPhoto:j.string.isRequired,threadID:j.string};f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MessengerPhotoViewBottomBar.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){return c("React").createElement("div",{className:"_51an _50-m _16zz"},j.children)};f.exports=i}),null);
__d("MessengerPhotoViewHScroll.react",["cx","Animation","MessengerSharedPhoto.react","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes,l=200,m=80;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerPhotoViewHScroll1=null,p}n.prototype.componentDidMount=function(){this.$MessengerPhotoViewHScroll2()};n.prototype.componentDidUpdate=function(){this.$MessengerPhotoViewHScroll2()};n.prototype.componentWillUnmount=function(){this.$MessengerPhotoViewHScroll1&&this.$MessengerPhotoViewHScroll1.stop();this.$MessengerPhotoViewHScroll1=null};n.prototype.render=function(){var o=this.props.sharedPhotos,p=o.reduce(function(r,s){var t=s.node.image1===null?s.node.image:s.node.image1;if(t)r.push(c("React").createElement("div",{className:"_4dy9",key:s.node.legacy_attachment_id},c("React").createElement(c("MessengerSharedPhoto.react"),{className:"_42rl"+(this.props.photoID!==s.node.legacy_attachment_id?" _q1a":""),fbid:s.node.legacy_attachment_id,onClick:this.props.onScroll,uri:t.uri})));return r}.bind(this),[]),q=(this.props.width-m)/2;return c("React").createElement("div",{className:"_463g"},c("React").createElement("div",{className:"_463h",ref:"childContainer"},c("React").createElement("div",{className:"_463j",style:{paddingLeft:q,paddingRight:q},ref:"scrollable"},p)))};n.prototype.$MessengerPhotoViewHScroll2=function(){var o=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,p=this.props.sharedPhotos.findIndex(function(r){return r.node.legacy_attachment_id===this.props.photoID}.bind(this)),q=p*m;if(!this.$MessengerPhotoViewHScroll1)this.$MessengerPhotoViewHScroll1=new(c("Animation"))(this.refs.childContainer);this.$MessengerPhotoViewHScroll1.from("scrollLeft",o).to("scrollLeft",q).duration(l).go()};f.exports=n}),null);
__d("MessengerPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerActions","MessengerPhotoInfoDialogContainer.react","React","SpotlightViewerBottomBarLink","MessengerPhotoViewCloseLink.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerPhotoViewHeader3=function(){if(this.refs.forwardNUX)this.refs.forwardNUX.close();this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),this.$MessengerPhotoViewHeader2=function(){return c("React").createElement(c("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose})}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",{className:"_51an _50-m _3c1i _5l-3",role:"banner"},this.$MessengerPhotoViewHeader1(),this.$MessengerPhotoViewHeader2())};m.prototype.$MessengerPhotoViewHeader1=function(){var n=void 0,o=void 0;if(!this.props.disableForward){n=c("React").createElement(c("SpotlightViewerBottomBarLink"),{className:"_3c1o",onClick:this.$MessengerPhotoViewHeader3,ref:"forwardButton"},c("React").createElement("div",{className:"_2msr _3oo2"}),i._("Forward"));o=c("React").createElement(c("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},i._("Send this image to other people in separate messages."))}return c("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},c("React").createElement(c("SpotlightViewerBottomBarLink"),{ajaxify:this.props.url,className:"_3c1o",rel:"async"},c("React").createElement("div",{className:"_3ooo _2msr"}),i._("Download")),n,o,c("React").createElement(c("SpotlightViewerBottomBarLink"),{className:"_3c1o",href:"#",onClick:this.props.openInfo,ref:"moreInfo"},c("React").createElement("div",{className:"_3c1k _2msr"}),i._("Info")))};m.propTypes={disableForward:l.bool,onClose:l.func,openInfo:l.func,photoID:l.string,showForwardDialog:l.func,url:l.object};f.exports=m}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","MessengerPhotoViewHScroll.react","Event","KeyEventController","messengerForwardAttachmentDialogReact","MessengerPhotoInfoDialogContainer.react","MessengerPhotoViewHeader.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightViewer","SpotlightViewerImage","SpotlightMessagesViewerPagers.react","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","MessengerPhotoViewBottomBar.react"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";var l,m,n=c("messengerForwardAttachmentDialogReact").jsComponent,o=c("React").PropTypes,p=88,q=80,r=30,s="_4-og";l=babelHelpers.inherits(t,c("React").Component);m=l&&l.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.$SpotlightMessengerSharedMediaViewer1=undefined,this.$SpotlightMessengerSharedMediaViewer2=[],this.state={photoData:null,showForward:false,showInfo:false,stageDimensions:new(c("Vector"))()},this.$SpotlightMessengerSharedMediaViewer14=function(z){if(!this.props.sharedMedia)return;var A=this.props.sharedMedia.findIndex(function(C){return C.node.legacy_attachment_id===z});if(A<0)return;var B=this.props.sharedMedia[A];this.setState({photoData:B});this.$SpotlightMessengerSharedMediaViewer17(A)}.bind(this),this.$SpotlightMessengerSharedMediaViewer4=function(z,event){if(this.state.photoData==null)return;var A=this.state.photoData;if(event&&!!c("Parent").bySelector(event.target,"._3tsq"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===s)this.$SpotlightMessengerSharedMediaViewer7();var B=this.props.sharedMedia.findIndex(function(D){return D.node.legacy_attachment_id===A.node.legacy_attachment_id});if(B<0||B===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&z)return;if(B===0&&!z){c("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,r);return}var C=z?this.props.sharedMedia[B+1]:this.props.sharedMedia[B-1];this.setState({photoData:C});this.$SpotlightMessengerSharedMediaViewer17(B)}.bind(this),this.$SpotlightMessengerSharedMediaViewer7=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$SpotlightMessengerSharedMediaViewer12=function(){this.setState({showForward:true})}.bind(this),this.$SpotlightMessengerSharedMediaViewer15=function(){this.setState({showForward:false})}.bind(this),this.$SpotlightMessengerSharedMediaViewer11=function(){this.setState({showInfo:true})}.bind(this),this.$SpotlightMessengerSharedMediaViewer16=function(){this.setState({showInfo:false})}.bind(this),v}t.prototype.componentDidMount=function(){var u=this.props.sharedMedia.find(function(v){return v.node.legacy_attachment_id===this.props.photoID}.bind(this));this.setState({photoData:u,stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});this.$SpotlightMessengerSharedMediaViewer1=new(c("SubscriptionsHandler"))();this.$SpotlightMessengerSharedMediaViewer1.addSubscriptions(c("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()})}.bind(this)),c("KeyEventController").registerKey("LEFT",function(){this.$SpotlightMessengerSharedMediaViewer4(false);return false}.bind(this)),c("KeyEventController").registerKey("RIGHT",function(){this.$SpotlightMessengerSharedMediaViewer4(true);return false}.bind(this)))};t.prototype.componentWillUnmount=function(){this.$SpotlightMessengerSharedMediaViewer1&&this.$SpotlightMessengerSharedMediaViewer1.release();this.$SpotlightMessengerSharedMediaViewer1=null;this.$SpotlightMessengerSharedMediaViewer2.forEach(function(u){return u.abandon()})};t.prototype.render=function(){var u=this.$SpotlightMessengerSharedMediaViewer5(),v=this.state.stageDimensions,w=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var x=this.props.sharedMedia.findIndex(function(u){this.state.photoData!=null||k(0);return u.node.id===this.state.photoData.node.id}.bind(this)),y=c("React").createElement("div",null,this.$SpotlightMessengerSharedMediaViewer6(),this.props.disablepaging?null:c("React").createElement(c("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:x<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&x>=this.props.sharedMedia.length-1}));return c("React").createElement("span",null,c("React").createElement(c("SpotlightViewer"),{className:"_53vs",onHide:this.$SpotlightMessengerSharedMediaViewer7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},c("React").createElement(c("SpotlightViewport"),{active:false,fadeInNOut:true,media:u,onClick:this.$SpotlightMessengerSharedMediaViewer4,ref:"viewport",showLoadingIndicator:w,stageDimensions:v,useWidth:true},y),this.$SpotlightMessengerSharedMediaViewer8()),this.$SpotlightMessengerSharedMediaViewer9(),this.$SpotlightMessengerSharedMediaViewer10())};t.prototype.$SpotlightMessengerSharedMediaViewer6=function(){if(!this.state.photoData)return null;var u=this.state.photoData.node.legacy_attachment_id,v=c("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",u).getURI();if(this.props.actorid)v=c("ActorURI").create(v,this.props.actorid);return c("React").createElement(c("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$SpotlightMessengerSharedMediaViewer7,openInfo:this.$SpotlightMessengerSharedMediaViewer11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$SpotlightMessengerSharedMediaViewer12,url:v})};t.prototype.$SpotlightMessengerSharedMediaViewer13=function(u){return u?Math.ceil(u/q):r};t.prototype.$SpotlightMessengerSharedMediaViewer8=function(){if(!this.state.photoData)return null;var u=this.state.photoData,v=c("React").createElement("button",{className:"_2n5b",onClick:function(){return this.props.openAlbum(u.node.legacy_attachment_id)}.bind(this),type:"button"},c("React").createElement("div",{className:"_3por"}));return c("React").createElement(c("MessengerPhotoViewBottomBar.react"),null,c("React").createElement(c("MessengerPhotoViewHScroll.react"),{onScroll:this.$SpotlightMessengerSharedMediaViewer14,photoID:u.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),v)};t.prototype.$SpotlightMessengerSharedMediaViewer9=function(){if(!this.state.photoData||this.props.disableForward)return null;var u=j._("Forward in separate messages");return c("React").createElement(n,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMessengerSharedMediaViewer15,shown:this.state.showForward,title:u})};t.prototype.$SpotlightMessengerSharedMediaViewer10=function(){return this.state.showInfo?c("React").createElement(c("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$SpotlightMessengerSharedMediaViewer16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c("React").createElement("xhp",null)};t.prototype.$SpotlightMessengerSharedMediaViewer17=function(u){var v=this.$SpotlightMessengerSharedMediaViewer13(this.state.stageDimensions.x),w=this.props.sharedMedia;if(u<=v/2){c("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,w[0].cursor,v);if(w.length<v&&this.props.hasNextPage)c("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v)}else if(u>=w.length-v/2&&this.props.hasNextPage)c("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v)};t.prototype.$SpotlightMessengerSharedMediaViewer3=function(){var u=new(c("Vector"))(c("Vector").getViewportDimensions().x,c("Vector").getViewportDimensions().y-p);return u};t.prototype.$SpotlightMessengerSharedMediaViewer5=function(){if(this.state.photoData&&this.state.photoData.node){var u=this.state.photoData.node;if(u.__typename&&u.__typename==="MessageVideo")return this.$SpotlightMessengerSharedMediaViewer18();var v=this.state.stageDimensions,w=this.$SpotlightMessengerSharedMediaViewer19(u,v);if(!w)return null;var x=t.getImageDimensionsForStage(new(c("Vector"))(w.width,w.height),v);return this.$SpotlightMessengerSharedMediaViewer20(w,x)}else return null};t.prototype.$SpotlightMessengerSharedMediaViewer18=function(){if(this.state.photoData)return c("React").createElement(c("MessengerVideoPlayer.react"),{isVisible:true,isOnStage:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null};t.prototype.$SpotlightMessengerSharedMediaViewer20=function(u,v){return c("React").createElement(c("SpotlightViewerImage"),{dimensions:v,ref:"image",src:u.uri})};t.prototype.$SpotlightMessengerSharedMediaViewer19=function(u,v){var w=null,x=c("PhotoUtils").getImagesFromData(u);x=x.sort(function(z,A){return A.width-z.width});if(window.devicePixelRatio&&window.devicePixelRatio>1)v=new(c("Vector"))(v.x*window.devicePixelRatio,v.y*window.devicePixelRatio);for(var y=0;y<x.length;y++)if(!w||x[y].width>=v.x||x[y].height>=v.y)w=x[y];return w};t.propTypes={disableForward:o.bool,hasPrevPage:o.bool,hasNextPage:o.bool,onClosePhotoView:o.func,openAlbum:o.func,photoID:o.string,rootClassName:o.string,threadID:o.string,sharedMedia:o.arrayOf(o.object)};t.getImageDimensionsForStage=function(u,v){var w=u.x,x=u.y,y=v.x,z=v.y,A=w/x,B=y/z;if(w>=y||x>=z)if(B<A){w=y;x=Math.round(y/A)}else if(B>A){w=Math.round(z*A);x=z}else{w=y;x=z}else if(A<B)w=Math.round(x*A);else x=Math.round(w/A);return new(c("Vector"))(w,x)};f.exports=t}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaStore","MessengerSharedMediaActions","React","SpotlightMessengerSharedMediaViewer.react"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.getStores=function(){return[c("MessengerSharedMediaStore")]};j.calculateState=function(k,l){var m=c("MessengerSharedMediaStore").getState(),n=m.sharedMedia.get(l.threadID),o=m.isLoading.get(l.threadID);return{sharedMedia:n,isLoading:o}};j.prototype.componentDidMount=function(){c("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};j.prototype.render=function(){if(!this.state.sharedMedia)return null;var k=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(l){return l.node.legacy_attachment_id===this.props.photoID}.bind(this));if(!k)return null;return c("React").createElement(c("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j,{withProps:true})}),null);
__d("MessengerThreadSharedPhotos.react",["cx","MessengerSharedPhotosAlbumViewContainer.react","React","SpotlightViewer","SpotlightMessengerSharedMediaViewerContainer.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={photoView:this.props.findFBID,albumView:""},this.$MessengerThreadSharedPhotos3=function(r){this.setState({albumView:r,photoView:""})}.bind(this),this.$MessengerThreadSharedPhotos4=function(){this.setState({albumView:""})}.bind(this),this.$MessengerThreadSharedPhotos5=function(r){this.setState({albumView:"",photoView:r})}.bind(this),this.$MessengerThreadSharedPhotos6=function(){this.setState({photoView:""})}.bind(this),this.$MessengerThreadSharedPhotos7=function(r){this.setState({photoView:r})}.bind(this),n}l.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos()};l.prototype.render=function(){var m=this.state.photoView?this.$MessengerThreadSharedPhotos1():null,n=this.state.albumView?this.$MessengerThreadSharedPhotos2():null;return c("React").createElement("div",null,n,m)};l.prototype.$MessengerThreadSharedPhotos1=function(){return c("React").createElement(c("SpotlightMessengerSharedMediaViewerContainer.react"),{disableForward:false,onClosePhotoView:this.$MessengerThreadSharedPhotos6,openAlbum:this.$MessengerThreadSharedPhotos3,photoID:this.state.photoView,rootClassName:"",threadID:this.props.threadFBID})};l.prototype.$MessengerThreadSharedPhotos2=function(){return c("React").createElement(c("SpotlightViewer"),{className:"_3ode",onHide:this.$MessengerThreadSharedPhotos4,open:true,ref:"spotlightViewer"},c("React").createElement(c("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:this.$MessengerThreadSharedPhotos5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}))};l.propTypes={findFBID:k.string,onCloseSharedPhotos:k.func,threadFBID:k.string};f.exports=l}),null);
__d("messengerThreadSharedPhotosReact",["ReasonReact","MessengerThreadSharedPhotos.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("MessengerThreadSharedPhotos.react"),{findFBID:i,onCloseSharedPhotos:j,threadFBID:k},l)}g.make=h}),null);
__d("messengerVideoPlayerReact",["utilsRe","ReasonReact","bs_js_null_undefined","MessengerVideoPlayer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r){return c("ReasonReact").wrapJsForReason(c("MessengerVideoPlayer.react"),{attachment:c("bs_js_null_undefined").from_opt(i),className:c("bs_js_null_undefined").from_opt(j),isInThread:c("utilsRe").optionBoolToNullUndefinedBoolean(k),isVisible:c("utilsRe").optionBoolToNullUndefinedBoolean(l),isOnStage:c("utilsRe").optionBoolToNullUndefinedBoolean(m),stageDimensions:c("bs_js_null_undefined").from_opt(n),videoData:o,onClick:c("bs_js_null_undefined").from_opt(p),onSelect:c("bs_js_null_undefined").from_opt(q)},r)}g.make=h}),null);
__d("messengerVideoReact",["cx","ix","bs_curry","React","utilsRe","imageReact","bs_js_boolean","bs_pervasives","ReasonReact","joinClasses","bs_js_primitive","messengerPhotoReact","messengerVideoPlayerReact"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("ReasonReact").statelessComponent("MessengerVideo");function k(o){var p=true,q=true,r=false,s=o.metadata,t=0;if(s==null)t=1;else if(c("utilsRe").isDefined(s.fbid)){var u=+(window.screen.width>1800)&&c("utilsRe").isDefined(s.large_size)&&c("utilsRe").isDefined(s.large_preview),v=s.fbid,w=u!==0?s.large_size:s.inbox_size,x=w==null?{x:0,y:0}:{x:w.width,y:w.height},y=u!==0?s.large_preview:s.inbox_preview;return{legacy_attachment_id:v,original_dimensions:x,start_muted:p,hide_controls_on_finish:q,url:y,is_share:r}}else t=1;if(t===1)return{legacy_attachment_id:null,original_dimensions:null,start_muted:p,hide_controls_on_finish:q,url:null,is_share:r}}function l(o){var p=o%60,q=+(p<10);return c("bs_pervasives").string_of_int(o/60|0)+(":"+((q!==0?"0":"")+c("bs_pervasives").string_of_int(p)))}function m(o,p,q,r,s,t,u,v){var w=o?o[0]:"",x=function x(){var B=p.metadata,C=p.media,D=B==null?C==null?0:c("bs_js_primitive").null_undefined_to_opt(C.duration):c("bs_js_primitive").null_undefined_to_opt(B.duration);if(D)return l(D[0]);else return null},y=function y(){if(t)return c("bs_curry")._1(t[0],p);else return 0},z=function z(B){var C=B.legacy_attachment_id;if(c("utilsRe").isDefined(C))return[c("ReasonReact").element(0,0,c("messengerVideoPlayerReact").make([p],[c("joinClasses")(w,"_ccq","_4tsk","_3o67",c("bs_js_boolean").to_js_boolean(q)?"_52mr":"")],[1],s,0,0,B,[y],u,[]))];else return 0},A=j.slice();A[9]=function(){var B=k(p),C=z(B);if(C)return C[0];else return c("ReasonReact").element(0,0,c("messengerPhotoReact").make([c("joinClasses")(w,"_ccq")],p,q,r,t,[c("ReasonReact").element(0,0,c("imageReact").make(["_ccr"],0,[i("27983")],0,0,0,0,[])),c("React").createElement("span",{className:"_ccs"},x(0))]))};return A}var n=1800;g.component=j;g.large_window_width=n;g.constructVideoData=k;g.formatDuration=l;g.make=m}),null);
__d("MessengerXMATextBlock.react",["cx","LineClamp.react","React","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k=c("React").PropTypes,l=26;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerXMATextBlock1=function(){this.props.url&&window.open(this.props.url)}.bind(this),o}m.prototype.render=function(){if(!this.props)return c("React").createElement("div",{className:"__6j"});var n=this.props.width?{maxWidth:this.props.width-l,textAlign:"left"}:{textAlign:"left"},o={textDecoration:"none"};return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"__6j _43kk"),style:n},c("React").createElement(c("ShimButton.react"),{form:"link",onClick:this.$MessengerXMATextBlock1,style:o},this.renderTitle(),this.renderDescription(),this.renderSource()))};m.prototype.renderTitle=function(){if(!this.props.title)return null;return c("React").createElement("div",{className:"__6k"},c("React").createElement(c("LineClamp.react"),{lines:2,lineHeight:16},this.props.title))};m.prototype.renderDescription=function(){if(!this.props.description)return null;return c("React").createElement("div",{className:"__6l"},c("React").createElement(c("LineClamp.react"),{lines:2,lineHeight:15},this.props.description))};m.prototype.renderSource=function(){if(!this.props.source)return null;return c("React").createElement("div",{className:"__6m"},c("React").createElement(c("LineClamp.react"),{lines:1,lineHeight:14},this.props.source))};m.propTypes={className:k.string,description:k.string,source:k.string,title:k.string,url:k.string,width:k.number};f.exports=m}),null);
__d("messengerXMATextBlockReact",["ReasonReact","bs_js_null_undefined","MessengerXMATextBlock.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact").wrapJsForReason(c("MessengerXMATextBlock.react"),{className:c("bs_js_null_undefined").from_opt(i),description:c("bs_js_null_undefined").from_opt(j),source:c("bs_js_null_undefined").from_opt(k),title:c("bs_js_null_undefined").from_opt(l),url:c("bs_js_null_undefined").from_opt(m),width:c("bs_js_null_undefined").from_opt(n)},o)}g.make=h}),null);
__d("messengerVideoXMAReact",["cx","React","utilsRe","bs_pervasives","ReasonReact","joinClasses","bs_js_primitive","messengerVideoPlayerReact","messengerXMATextBlockReact"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReasonReact").statelessComponent("MessengerVideoXMA");function j(p){if(p==null)return null;else{var q=c("bs_pervasives").max(p.width,p.height),r=+(window.screen.width>1800),s=r!==0?640:450;if(q<=s)return{x:p.width,y:p.height};else{var t=s/q,u=p.width*t|0,v=p.height*t|0;return{x:u,y:v}}}}function k(p){var q=p.media,r=p.target;if(q==null)return 0;else if(r==null)return 0;else if(c("utilsRe").isDefined(q.image_size)&&c("utilsRe").isDefined(r.video_id)){var s=q.image_size;return[{legacy_attachment_id:r.video_id,original_dimensions:j(s),start_muted:true,hide_controls_on_finish:true,url:q.image,is_share:true}]}else return 0}function l(p,q,r,s,t){var u=p?p[0]:"",v=function v(y){if(y)return c("ReasonReact").element(0,0,c("messengerVideoPlayerReact").make([q],[c("joinClasses")(u,"_ccq","_4tsk","_3o67","_52mr")],[1],r,0,0,y[0],0,s,[]));else return null},w=function w(y){return c("ReasonReact").element(0,0,c("messengerXMATextBlockReact").make(["_2f5n _4br2 _29ew _3dug"],c("bs_js_primitive").null_undefined_to_opt(q.description),c("bs_js_primitive").null_undefined_to_opt(q.source),c("bs_js_primitive").null_undefined_to_opt(q.video_title),c("bs_js_primitive").null_undefined_to_opt(q.uri),y?[y[0].x]:0,[]))},x=i.slice();x[9]=function(){var y=k(q),z=v(y);return c("React").createElement("div",{className:"_3duc"},z,w(y?c("bs_js_primitive").null_undefined_to_opt(y[0].original_dimensions):0))};return x}var m=640,n=450,o=1800;g.large_preview_dim=m;g.thumbinail_inbox_dim=n;g.large_window_width=o;g.component=i;g.adjustSize=j;g.constructVideoData=k;g.make=l}),null);
__d("messengerPhotosGroupReact",["cx","URI","bs_list","bs_array","bs_block","bs_curry","React","fBIDRe","utilsRe","ActorURI","bs_caml_obj","bs_caml_array","bs_js_boolean","MercuryIDs","bs_pervasives","ReasonReact","joinClasses","bs_js_primitive","bs_js_null_undefined","MessagesViewerSetID","messengerPhotoReact","messengerVideoReact","MercuryAttachmentType","getPageIDFromThreadID","messagingGiftWrapReact","messengerVideoXMAReact","bs_caml_builtin_exceptions","chatSpeakingStickerReact","MessengerAttachmentViewer","mercuryAttachmentPayloadRe","messagingFlowerBorderReact","messengerThreadSharedPhotosReact"],(function aa(ba,a,ca,da,ea,b,fa){"use strict";var c="empty-spacer",d=a("ReasonReact").reducerComponent("MessengerPhotosGroup");function e(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=i?i[0]:"",w=function w(g){var C=g.length,D=+(C===2||C===4);return a("joinClasses")(v,"_2n8h",a("bs_js_boolean").to_js_boolean(+(C===1))?"_2n8i":"",a("bs_js_boolean").to_js_boolean(D)?"_4ksk":"",a("bs_js_boolean").to_js_boolean(+(C>1)&&1-D)?"_2n8k":"","_5fk1")},x=function x(){if(p){var C=p[0],D=C.thread_fbid;if(D==null)return a("MercuryIDs").getThreadFBIDFromThreadID(C.thread_id);else{var E=+(a("fBIDRe").compare(D,"")===0);if(E!==0)return a("MercuryIDs").getThreadFBIDFromThreadID(C.thread_id);else return D}}else return null},y=function y(C,D){var E=x(0),F=D.metadata,G=F==null?null:F.fbid;return a("ReasonReact").element(0,0,a("messengerThreadSharedPhotosReact").make(G,a("bs_curry")._1(C[3],function(){return 0}),E,[]))},z=function z(C,D,E,F){var G=a("utilsRe").isDefined(D.deduplication_key),H=D.metadata,I;if(G!==0)I=D.deduplication_key;else if(H==null)I=D.upload_id;else{var J=H.fbid;I=J==null?null:J}var K=a("utilsRe").$pipe$unknown(I==null?0:[I],""),L;if(!E&&m!==[1]){var M=D.metadata,N=0;if(M==null)N=1;else if(a("utilsRe").isDefined(M.fbid)){var O=1-a("utilsRe").isDefined(D.app_attribution);L=O!==0?[a("bs_curry")._1(C[3],function(D){return[D]})]:[function(ga){var Z=M,D=ga;if(a("utilsRe").isTruthy(D.preview_uploading))return 0;else if(D.attach_type===a("MercuryAttachmentType").VIDEO){var P=Z.dimensions,V=P==null?{x:null,y:null}:{x:P.width,y:P.height};a("MessengerAttachmentViewer").renderVideo({pageID:a("bs_js_null_undefined").from_opt(t),rootClassName:"_1j1h",videoID:Z.fbid,videoSize:V,videoURI:D.url});return 0}else if(D.attach_type===a("MercuryAttachmentType").PHOTO||D.attach_type===a("MercuryAttachmentType").THIRDPARTYSTICKER||D.attach_type===a("MercuryAttachmentType").ANIMATED_IMAGE){var ha=+(g.length===1),ia=D.url,S;if(n!==[1]&&D.attach_type===a("MercuryAttachmentType").PHOTO&&j!==0){var ja=x(0),ka=+(j===[1]),$=new(a("URI"))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:ja,image_id:Z.fbid}),la=t?new(a("ActorURI").create)($,t[0]):$;S=[a("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,la,ka]}else S=[null,ia,ha];a("MessengerAttachmentViewer").bootstrapWithConfig({actorid:a("bs_js_null_undefined").from_opt(t),dimensions:Z.dimensions,disableForward:a("bs_js_boolean").to_js_boolean(+(t!==0)),disablePaging:a("bs_js_boolean").to_js_boolean(S[2]),endpoint:S[1],fbid:Z.fbid,rootClassName:"_1j1h",setID:S[0],snapToPhoto:true,src:D.preview_url});return 0}else if(a("utilsRe").isDefined(D.uri))return window.open(D.uri);else return 0}]}else N=1;if(N===1){var P=a("utilsRe").isDefined(D.uri);if(P!==0){var Q=D.uri;L=[function(){return window.open(Q)}]}else L=0}}else L=0;var R=a("utilsRe").$pipe$unknown(h,D.attach_type);if(R===a("MercuryAttachmentType").PHOTO||R===a("MercuryAttachmentType").ANIMATED_IMAGE||R===a("MercuryAttachmentType").THIRDPARTYSTICKER)return a("ReasonReact").element([K],0,a("messengerPhotoReact").make(0,D,F,q,L,[]));else if(R===a("MercuryAttachmentType").VIDEO){var S=D.metadata,T=0;if(S==null)T=1;else if(a("utilsRe").isTruthy(S.render_as_sticker)){var U=S.dimensions,V=U==null?{height:null,width:null}:{height:U.height,width:U.width},W=D.url;return a("ReasonReact").element(0,0,a("chatSpeakingStickerReact").make(W,V,[]))}else T=1;if(T===1)if(a("bs_caml_obj").caml_equal(n,[1]))return a("ReasonReact").element([K],0,a("messengerVideoXMAReact").make(0,D,o,r,[]));else return a("ReasonReact").element([K],0,a("messengerVideoReact").make(0,D,F,q,o,L,r,[]))}else if(R===c){var X={className:"_4tsk _4rf-"},Y=a("bs_js_primitive").null_undefined_to_opt(D.key);if(Y)X.key=Y[0];return a("React").createElement("div",X)}else throw[a("bs_caml_builtin_exceptions").invalid_argument,R+" is not handled by MessengerPhotosGroup"]},A=function A(C,g,D){if(g.length===1)return z(C,a("bs_caml_array").caml_array_get(g,0),D,1);else{var E=+(g.length===2||g.length===4),F=E!==0?2:3,G=0,H=[0],I=g.length;while(H[0]<I){var J=a("bs_pervasives").min(F,I-H[0]|0),K=a("bs_array").init(F,function(J){return function(L){var E=+(L<J);if(E!==0)return z(C,a("bs_caml_array").caml_array_get(g,H[0]+L|0),D,0);else{var M="ghost"+a("bs_pervasives").string_of_int(F-L|0),N=a("mercuryAttachmentPayloadRe").create(c,[M],new(a("URI"))(""));return z(C,N,D,0)}}}(J));G=[a("React").createElement("div",{key:a("bs_pervasives").string_of_int(H[0]),className:"_2n8g"},K),G];H[0]=H[0]+F|0}return a("bs_array").of_list(a("bs_list").rev(G))}},B=d.slice();B[4]=function(){a("MessengerAttachmentViewer").preload();return 0};B[9]=function(C){var D=p?a("utilsRe").isDefined(a("getPageIDFromThreadID")(p[0].thread_id)):0,E=A(C,g,D),F=+(l===[1]),G=F!==0?a("React").createElement("div",undefined,E):E,H=C[4][0],I=H?y(C,H[0]):null,J=+(l===[1]),K=+(k===[1]);return a("React").createElement("div",{className:w(g),tabIndex:0},I,G,J!==0?a("ReasonReact").element(0,0,a("messagingGiftWrapReact").make(0,s,[])):null,K!==0?a("ReasonReact").element(0,0,a("messagingFlowerBorderReact").make(-10,[])):null)};B[10]=function(){return[0]};B[12]=function(C,u){if(C)return a("bs_block").__(0,[[[C[0]]]]);else return a("bs_block").__(0,[[0]])};return B}var f=a("ReasonReact").wrapReasonForJs(d,function(g){return e(g.attachments,a("bs_js_primitive").null_undefined_to_opt(g.attachType),a("bs_js_primitive").null_undefined_to_opt(g.className),g.count,a("utilsRe").nullUndefinedBooleanToOptionBool(g.hasFlowerBorder),a("utilsRe").nullUndefinedBooleanToOptionBool(g.isGiftWrapped),a("utilsRe").nullUndefinedBooleanToOptionBool(g.isPageMessage),a("utilsRe").nullUndefinedBooleanToOptionBool(g.isXMA),a("utilsRe").nullUndefinedBooleanToOptionBool(g.isVisible),a("bs_js_primitive").null_undefined_to_opt(g.message),a("bs_js_primitive").null_undefined_to_opt(g.onAttachmentLoad),a("bs_js_primitive").null_undefined_to_opt(g.onSelect),a("bs_js_primitive").null_undefined_to_opt(g.onUnwrap),a("bs_js_primitive").null_undefined_to_opt(g.pageID),[])});b.empty_spacer_type=c;b.component=d;b.make=e;b.jsComponent=f}),null);
__d("MessengerPhotosGroup.react",["messengerPhotosGroupReact"],(function a(b,c,d,e,f,g){"use strict";var h=c("messengerPhotosGroupReact").jsComponent;f.exports=h}),null);