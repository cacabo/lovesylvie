if (self.CavalryLogger) { CavalryLogger.start_js(["TmNBr"]); }

__d("ChatSidebarPreloadStore",["ChatSidebarData","InitialChatFriendsList"],(function a(b,c,d,e,f,g){"use strict";var h={onLoaded:function i(j){if(c("ChatSidebarData").AsyncDataPreloader)c("ChatSidebarData").AsyncDataPreloader.onLoaded(function(k){var l=k.result,m=l.list,n=l.groups,o=l.shortProfiles,p=l.nearby,q=l.adminedPages,r=l.pageListModule,s=l.pymmList;return j({buddies:m,groups:n,shortProfiles:o,nearby:p,adminedPages:q,pageListModule:r,pymmList:s,profiles:[]})});else if(c("ChatSidebarData").WebGraphQLPreloader)c("ChatSidebarData").WebGraphQLPreloader.onLoaded(function(k){return j(c("ChatSidebarData").WebGraphQLNormalizer.normalize(k))});else j({buddies:c("InitialChatFriendsList").list||[],groups:c("InitialChatFriendsList").groups||[],shortProfiles:c("InitialChatFriendsList").shortProfiles||{},nearby:c("InitialChatFriendsList").nearby||[],adminedPages:c("InitialChatFriendsList").adminedPages||[],pageListModule:c("InitialChatFriendsList").pageListModule,pymmList:c("InitialChatFriendsList").pymmList||{},profiles:[]})}};f.exports=h}),null);
__d("ChatSortUsers",["ShortProfiles","TokenizeUtil"],(function a(b,c,d,e,f,g){var h={};function i(k){if(h[k])return h[k];var l=(c("ShortProfiles").getNow(k)||{}).name;if(l)return h[k]=c("TokenizeUtil").flatten(l);return"~"}var j={sortAlphabetical:function k(l,m){var n=i(l),o=i(m);if(n!==o)return n<o?-1:1;return 0}};f.exports=j}),null);
__d("PresenceStatusActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({AVAILABILITY_CHANGED:null})}),null);
__d("ChatDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("PresenceStatusStore",["ChatDispatcher","FluxStore","PresenceStatus","PresenceStatusActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"))}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c("PresenceStatusActionTypes").AVAILABILITY_CHANGED:this.__emitChange();break;default:break}};j.prototype.get=function(k){return c("PresenceStatus").get(k)};j.prototype.getIsPlaying=function(k){return c("PresenceStatus").isPlayingCanvasGameUser(k)};f.exports=new j()}),null);
__d("MeasurePeopleTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$MeasurePeopleTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$MeasurePeopleTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MeasurePeopleTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MeasurePeopleTypedLogger1=babelHelpers["extends"]({},this.$MeasurePeopleTypedLogger1,j);return this};var i={};f.exports=h}),null);
__d("PresenceOrderedList",["ChatSidebarPreloadStore","ChatSortUsers","PresencePrivacy","PresenceStatus"],(function a(b,c,d,e,f,g){function h(k){return k.map(function(l){var m=l.slice(0,-2),n=Number(l.slice(-1));return[m,n]})}function i(k,l){var m=[];k.forEach(function(n){var o=n[0],p=n[1];if(m.length>=l)return;if(c("PresencePrivacy").getFriendVisibility(o)==c("PresencePrivacy").BLACKLISTED)return;if(p==c("PresenceStatus").get(o))m.push(o)});return m}function j(){"use strict";this.$PresenceOrderedList1=null}j.prototype.getSorted=function(k,l){"use strict";if(this.$PresenceOrderedList1){l(i(this.$PresenceOrderedList1,k));return}c("ChatSidebarPreloadStore").onLoaded(function(m){var n=m.buddies;this.$PresenceOrderedList1=h(n);l(i(this.$PresenceOrderedList1,k))}.bind(this))};j.prototype.getAvailableSorted=function(k){"use strict";var l=c("PresenceStatus").getOnlineIDs();if(k)l=l.filter(function(m){return k&&k.indexOf(m)===-1});return l.sort(c("ChatSortUsers").sortAlphabetical)};j.prototype.getAllSorted=function(k){"use strict";var l=[],m=this.$PresenceOrderedList1||[];c("PresenceStatus").getAllIDs().concat(m.map(function(n){return n[0]})).forEach(function(n){return l.indexOf(n)===-1&&l.push(n)});if(k)l=l.filter(function(n){return k&&k.indexOf(n)===-1});return l.sort(c("ChatSortUsers").sortAlphabetical)};f.exports=new j()}),null);
__d("messengerSignalsRe",["EventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h=new(c("EventEmitter"))(),i="resize";function j(){h.emit(i);return 0}function k(l){return h.addListener(i,l)}g.emitter=h;g.resizeEvent=i;g.resize=j;g.onResize=k}),null);
__d("MessengerFlexArea.react",["cx","CSS","Event","messengerSignalsRe","React","ReactDOM","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","getScrollPosition","joinClasses","throttle"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("React").PropTypes,j=c("React").createClass({displayName:"MessengerFlexArea",propTypes:{beforeResize:i.func,onResize:i.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function k(){return{height:0}},componentDidMount:function k(){var l=new(c("SubscriptionsHandler"))();l.addSubscriptions(c("Event").listen(window,"resize",c("throttle")(this.recalculateHeight,51)),c("messengerSignalsRe").onResize(function(){this.recalculateHeight()}.bind(this)));this._subscriptions=l;this.recalculateHeight()},componentWillUnmount:function k(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout)},render:function k(){return c("React").createElement(c("ResponsiveBlock.react"),{className:c("joinClasses")(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+"px"}},this.props.children)},recalculateHeight:function k(){if(!this.isMounted())return;var l=c("ReactDOM").findDOMNode(this),m=l.parentNode,n=this.state.height,o=c("Vector").getViewportDimensions().y,p=false;if(m&&c("Style").get(m,"display")==="none"){c("Style").set(m,"display","initial");p=true}var q=false;if(m instanceof Element&&c("CSS").hasClass(m,"hidden_elem")){c("CSS").removeClass(m,"hidden_elem");q=true}o-=c("Vector").getElementPosition(m||l).y;var r=c("getScrollPosition")(window);o+=r.y;if(m){Array.from(m.childNodes).forEach(function(s){if(s.nodeType===Node.COMMENT_NODE||c("Style").get(s,"position")==="absolute")return;o-=c("Vector").getElementDimensions(s).y});o+=c("Vector").getElementDimensions(l).y}if(p)c("Style").set(m,"display","");if(q&&m instanceof Element)c("CSS").addClass(m,"hidden_elem");if(isNaN(o)||o<0)o=0;if(o!==n){this.props.beforeResize&&this.props.beforeResize();this.setState({height:o},this.props.onResize)}},_handleResponsiveBlockResize:c("throttle")(function(k,l){if(!this.isMounted())return;if(l===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0)}},51)});f.exports=j}),null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$MessengerFlexScrollableArea3=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$MessengerFlexScrollableArea4()}.bind(this),this.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()}.bind(this),this.$MessengerFlexScrollableArea2=function(){this.trackBottomIfRequired()}.bind(this),this.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()}.bind(this),this.trackBottomIfRequired=function(){if(this.state.shouldTrackBottom)this.scrollToBottom()}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom()}.bind(this),this.scrollToTop=function(q){this.refs.scrollable&&this.refs.scrollable.scrollToTop(q)}.bind(this),this.isScrolledToBottom=function(){var q=this.refs.scrollable;return q?q.isScrolledToBottom():true}.bind(this),this.isScrolledToBottomWithHeight=function(q){return this.refs.scrollable.isScrolledToBottomWithHeight(q)}.bind(this),this.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()}.bind(this),this.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0}.bind(this),m}k.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount()};k.prototype.render=function(){return c("React").createElement(c("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$MessengerFlexScrollableArea2,ref:"flexArea"},this.props.flexChildren,c("React").createElement(c("MessengerScrollableArea.react"),{height:"100%",needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$MessengerFlexScrollableArea3,ref:"scrollable",tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren)};k.prototype.$MessengerFlexScrollableArea4=function(){if(this.isScrolledToBottom()){this.setState({shouldTrackBottom:true});this.$MessengerFlexScrollableArea5()}else{this.setState({shouldTrackBottom:false});this.$MessengerFlexScrollableArea6()}};k.prototype.$MessengerFlexScrollableArea5=function(){if(!this.props.useScrollProtection)return;this.$MessengerFlexScrollableArea6();this.$MessengerFlexScrollableArea1=setInterval(function(){this.trackBottomIfRequired()}.bind(this),500)};k.prototype.$MessengerFlexScrollableArea6=function(){if(this.$MessengerFlexScrollableArea1)clearInterval(this.$MessengerFlexScrollableArea1)};k.prototype.scrollToPosition=function(l,m,n){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(l,m,n)};k.propTypes={flexChildren:j.node,footerChildren:j.node,onMount:j.func,onScroll:j.func,shouldStickToBottom:j.bool,tabIndex:j.number,useScrollProtection:j.bool};f.exports=k}),null);
__d("messengerFlexScrollableAreaReact",["ReasonReact","bs_js_null_undefined","MessengerFlexScrollableArea.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MessengerFlexScrollableArea.react"),{onScroll:c("bs_js_null_undefined").from_opt(i)},j)}g.make=h}),null);
__d("messengerChatOnOffToggleReact",["cx","fbt","bs_curry","React","linkReact","bs_js_boolean","ReasonReact"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("ReasonReact").statelessComponent("MessengerChatOnOffToggleReact");function k(l,m,n){var o=function o(n,q){if(m)return c("bs_curry")._1(m[0],c("bs_js_boolean").to_js_boolean(1-l));else return 0},p=j.slice();p[9]=function(q){var r=l!==0?i._("Go Offline"):i._("Go Online");return c("ReasonReact").element(0,0,c("linkReact").make(0,0,0,0,0,0,[c("bs_curry")._1(q[0],o)],0,0,0,0,0,0,[r],[c("React").createElement("div",{className:"_3dwl"+(l?" _337l":"")},c("React").createElement("div",{className:"_3dwf"+(l?" _3dwk":"")}))]))};return p}g.component=j;g.make=k}),null);
__d("messengerViewerCardReact",["cx","React","ReasonReact","joinClasses","imageBlockReact","messengerContactImageReact","messengerChatOnOffToggleReact"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReasonReact").statelessComponent("MessengerViewerCardReact");function j(l,m,n,o,p){var q=l?l[0]:"",r=i.slice();r[9]=function(){if(o){var s=o[0];return c("ReasonReact").element(0,0,c("imageBlockReact").make([c("joinClasses")(q,"_1u5d")],0,0,["medium"],[c("ReasonReact").element(0,0,c("messengerContactImageReact").StraightJSComponent[0](["_1u5h"],0,[1],0,34,[s.image_src],[])),c("React").createElement("div",{className:"_1u5i"},c("React").createElement("div",{className:"_364g"},s.name)),c("ReasonReact").element(0,0,c("messengerChatOnOffToggleReact").make(m,n,[]))]))}else return c("React").createElement("div",undefined)};return r}var k=34;g.imageSize=k;g.component=i;g.make=j}),null);
__d("messengerActiveUsersListReact",["cx","fbt","bs_list","bs_array","bs_block","bs_curry","React","utilsRe","MercuryIDs","bs_pervasives","ReasonReact","bs_js_primitive","MercuryThreads","PresencePrivacy","MessengerActions","bs_js_null_undefined","MercuryParticipants","PresenceOrderedList","PresenceStatusStore","AvailableListConstants","MeasurePeopleTypedLogger","MessengerContactAdapters","messengerViewerCardReact","messengerContactListRowReact","messengerFlexScrollableAreaReact"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("MercuryThreads").get();function k(v,w){var x=w[5],y=w[3];c("PresenceOrderedList").getSorted(200,function(z){var A=c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(x)),B=A==null?0:[A],C=c("PresenceOrderedList").getAvailableSorted(z),D=z.filter(function(F){return+c("PresencePrivacy").allows(F)}),E=c("utilsRe").listFilterMap(function(F){return c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(F))},c("bs_list").map(function(F){return c("MercuryIDs").getParticipantIDFromUserID(F)},c("bs_list").filter(function(F){return+(c("PresenceStatusStore").get(F)===c("AvailableListConstants").ACTIVE)})(c("bs_array").to_list(c("bs_array").concat([D,[C,0]])))));return c("bs_curry")._2(y,function(){return[B,E]},0)});return 0}function l(v){var w=v[4];new(c("MeasurePeopleTypedLogger"))().log();var x=c("PresencePrivacy").subscribe("privacy-user-presence-changed",c("bs_curry")._1(v[0],k)),y=c("MercuryParticipants").addListener("change",function(A,B){return c("bs_curry")._2(v[0],k,0)}),z=c("PresenceStatusStore").addListener(c("bs_curry")._1(v[0],k));k(0,v);w[3][0]=[y];w[4][0]=[z];w[5][0]=[x];return 0}function m(v){var w=v[4],q=w[3][0];if(q)q[0].remove();var x=w[4][0];if(x)x[0].remove();var y=w[5][0];if(y){c("PresencePrivacy").unsubscribe(y[0]);return 0}else return 0}function n(v){var q=+v;c("PresencePrivacy").setVisibility(q!==0?c("PresencePrivacy").ONLINE:c("PresencePrivacy").OFFLINE);return 0}function o(v,w){var q=v.fbid;if(q==null)return 0;else{j.getThreadMeta(c("MercuryIDs").getThreadIDFromUserID(q),function(x){c("MessengerActions").selectThread(x.thread_id,undefined);return 0});return 0}}var p=c("ReasonReact").reducerComponentWithRetainedProps("MessengerActiveUsersListReact"),q=c("messengerContactListRowReact").createMake(0),r=q[1];function s(v,w,x){return[p[0],p[1],p[2],p[3],l,p[5],m,p[7],p[8],function(y){var z=y[4],q=c("MercuryIDs").getUserIDFromThreadID(c("bs_js_null_undefined").from_opt(v)),A=!(q==null)&&q!==""?[q]:0,B=z[1],C=B!==0?c("React").createElement("div",undefined,c("React").createElement("div",{className:"_225b"},i._("Active Contacts ({number_of_contacts})",[i.param("number_of_contacts",c("bs_pervasives").string_of_int(c("bs_list").length(z[0])))])),c("React").createElement("ul",undefined,c("bs_array").of_list(c("bs_list").map(function(D){var q=D.fbid,E=!(q==null)&&A?+(q===A[0]):0;return c("ReasonReact").element([D.id],0,c("bs_curry").app(r,[function(F){return c("MessengerContactAdapters").fromMercuryParticipant(F)},D,0,o,0,0,0,0,0,0,0,[E],0,0,0,0,0,0,[1],0,0,w,[]]))},z[0])))):null;return c("ReasonReact").element(0,0,c("messengerFlexScrollableAreaReact").make(0,[c("ReasonReact").element(0,0,c("messengerViewerCardReact").make(0,z[1],[n],z[2],[])),C]))},function(){return[0,+(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE),c("bs_js_primitive").null_undefined_to_opt(c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(w))),[0],[0],[0]]},w,function(y,z){return c("bs_block").__(0,[[y[1],+(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE),y[0],z[3],z[4],z[5]]])},p[13]]}var t=c("ReasonReact").wrapReasonForJs(p,function(v){return s(c("bs_js_primitive").null_undefined_to_opt(v.activeThreadID),v.viewer,[])}),u=200;g.numTopUsers=u;g.mercuryThreadsRe=j;g.updateHelper=k;g.didMount=l;g.willUnmount=m;g.handleChangeAvailability=n;g.handleSelect=o;g.component=p;g.listRowReactForMercuryParticipantMake=r;g.make=s;g.jsComponent=t}),null);
__d("MessengerPeopleList.react",["messengerActiveUsersListReact","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("messengerActiveUsersListReact").jsComponent,i=function i(j){return c("React").createElement(h,{activeThreadID:j.activeThreadID||undefined,viewer:j.viewer})};f.exports=i}),null);